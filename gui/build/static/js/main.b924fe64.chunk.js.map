{"version":3,"sources":["services/http_operations.js","common/localizations/localization_it.js","common/localizations/localization_en.js","services/validations.js","config.js","common/locale.ts","resources/Hi_Drive_Logo_Claim_rgb.svg","components/languageSelector/languageSelector.tsx","components/logoHolder/logoHolder.jsx","components/authPage/authPage.comp.jsx","components/homePage/homePage.tsx","components/notFoundPage/notFoundPage.tsx","services/misc_functions.js","components/navigation/navigation.comp.jsx","components/actionsManager/actionsManager.jsx","components/contentTable/contentTable.jsx","context.jsx","components/page/page.jsx","components/profilePage/profilePage.jsx","components/unauthorizedPage/unauthorizedPage.tsx","components/notificationBar/notificationBar.jsx","components/horizontalNavigationBar/horizontalNavigationBar.jsx","components/formManager/formManager.jsx","services/objects_manipulation.js","components/versioningPage/versioningPage.jsx","components/editContentPage/editContentPage.jsx","components/formFileComp/formFile.jsx","components/addPage/addPage.jsx","components/addExperimentPage/addExperimentPage.jsx","components/addVersionPage/addVersionPage.jsx","components/addMeasurementsPage/addMeasurementsPage.jsx","components/passwordRecoveryPage/PasswordRecoveryPage.jsx","components/PasswordResetPage/PasswordResetPage.jsx","App.tsx","index.js"],"names":["api_url","localization_it","username","password","tenant","email","keep_logged","select","language","welcome","role","session_expire_in","resources","tools","notifications","file_content","preview","configuration","clear_all","enter","username_suggestion","password_suggestion","tenant_suggestion","email_suggestion","add_tenant","welcome_hp","left_bar_descr_hp","right_bar_descr_hp","session_expire_info_hp","github_page_hp","github_issue_page_hp","profile_page_desc","pass_change_confirm","email_change_confirm","email_changed","password_changed","password_rules","oh_no","broken_link","submit","cancel","login","logout","repeat","close","import","export","password_recovery","password_reset","forgot_password_link","go_login_page","email_sent_successfully","login_error","unauthorised_user","session_expired","no_username","no_password","define","no_changes","no_file","duplicate_resource_error","error_imported_file","pass_not_match","old_pass_empty","old_pass_wrong","pass_not_null","missing_tenant","missing_email","missing_token","stronger_password_required","email_sent_errors","password_not_changed_errors","network_error","empty_email_error","email_not_match","email_same_as_old","localization_en","axios","require","default","https","instance","create","httpsAgent","Agent","notificationManager","PushNotification","obj","RemoveNotification","id","ClearNotifications","saveToken","body","options","headers","url_string","Promise","resolve","reject","post","then","response","localStorage","setItem","data","token","token_expiration_time","user","_id","Date","getTime","toString","catch","error","refreshToken","Authorization","GetToken","put","post_file_generic","resource_type","formData","additionalHeader","undefined","console","log","tempH","Object","entries","forEach","k","v","name","time","toTimeString","msg","post_version_file_generic","post_generic","put_generic","padStart","length","JSON","stringify","message","delete_generic","delete","statusCode","delete_version","idResource","get_generic","qs","_options","url","filter","concat","limit","page","join","json","get","docs","totalDocs","totalPages","pagingCounter","hasPrevPage","hasNextPage","prevPage","nextPage","getItem","requestPasswordReset","resetPassword","reset","getPasswordStrength","alwaysTrue","base_api_url","website_name","languages","layout","pages","versionPages","aliasPages","original","timestamp","size","pageActions","viewFields","editFields","metadata","value","status","datasets","tags","users","visibility","addFields","organization","address","phone","admin_username","admin_password","ordinal","file","usage","editFieldsSpecifier","type","policy","addTypes","fetchedPageTypes","fetchedPageData","restrictionPages","locale","tkn","navigator","substring","_style","_g","_g2","LanguageSelector","setSessionLanguage","window","location","reload","includes","Button","variant","onClick","_excluded","_extends","assign","bind","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgHiDriveLogoClaimRgb","_ref","svgRef","title","titleId","props","xmlns","xmlnsXlink","x","y","viewBox","style","enableBackground","xmlSpace","ref","className","d","ForwardRef","LogoHolder","Fragment","href","userRef","React","createRef","pswRef","tenantRef","AuthPage","useState","setMsg","e","preventDefault","current","psw","replace","details","Form","onSubmit","Group","controlId","Label","Control","placeholder","color","to","width","height","marginRight","opacity","HomePage","useEffect","rel","NotFoundPage","isDefault","isNaN","Array","isArray","def","elem","constructor","nonDefaultLength","removeDefaultElements","entr","j","splice","subEntr","areEqual","obj1","obj2","k1","k2","values","capitalize","s","toUpperCase","slice","FormatMetadata","dt","str","map","el","fontawesome","library","add","faTimes","faBars","faUserTie","faUserGraduate","faUserCog","faUserTag","faUser","faCheck","intervalRef","loginTime","remainingSeconds","duration","Navigation","isOpened","setIsOpened","usr","rl","tn","CalcEnding","t0","remainingSec","retryLoginTime","parseInt","now","exp","endsWith","DurationToMilliSeconds","clearInterval","setInterval","clear","paddingLeft","paddingBottom","document","navData","isActive","ActionContent","toShow","resType","subK","resource","row","f","UnrollView","item","Accordion","defaultActiveKey","Children","toArray","Item","eventKey","Header","Body","some","single","Table","responsive","striped","bordered","hover","ActionManager","res","setRes","viewPopover","Popover","minWidth","test","userAgent","as","action","OverlayTrigger","trigger","placement","overlay","rootClose","takeSingle","downloadSingle","disabled","backgroundColor","border","confirm","removeSingle","ContentTable","header","actions","index","owner","isNotMine","replaceAll","faEye","faPencilAlt","faCopy","faCodeBranch","faDownload","AppContext","createContext","Page","params","myFetched","useParams","useSearchParams","searchParams","setSearchParams","setResource","setHeader","setActions","pageNum","setPageNum","pageLimit","setPageLimit","hasNext","setHasNext","hasPrev","setHasPrev","setPrevPage","setNextPage","setTotalPages","context","useContext","fetched","fetchData","num","RenderPagination","prevEllipsis","nextEllipsis","display","Pagination","alignSelf","marginLeft","First","Prev","Ellipsis","Next","Last","find","r","tmp","RemoveData","faPlusCircle","ProfilePage","setUsername","setRole","setTenant","emailShow","setEmailShow","oldPassword","setOldPassword","setPassword","passwordConfirm","setPasswordConfirm","isError","setIsError","setEmail","emailConfirm","setEmailConfirm","msgPass","setMsgPass","msgEmail","setMsgEmail","_email","submitPassword","requiredStr","passwordStrength","submitEmail","Container","fluid","Row","Col","xs","onChange","Text","UnauthorizedPage","oldNotifications","NotificationBar","show","setShow","highlight","setHighlight","layoutRef","useRef","myNotifications","handleClose","setTimeout","errorNot","textDecoration","Badge","pill","bg","Offcanvas","onHide","scroll","backdrop","keyboard","Title","ToastContainer","notification","Toast","animation","onClose","src","alt","HorizontalNavigationBar","padding","justifyContent","alignItems","FormManager","disabledFields","functionalFields","submitFunction","backFunction","handleChangesCallback","arrayDeleteCallback","types","val","borderBottomStyle","borderBottomWidth","marginBottom","sm","borderRightStyle","borderRightWidth","Select","SelectFormRow","allowedVal","Autocomplete","disableClearable","onBlur","optionalLabel","onInputChange","newValue","getOptionLabel","option","renderOption","Box","component","sx","mr","flexShrink","renderInput","TextField","label","md","ArrayStringFormRow","idx","_k","_v","ArrayObjectFormRow","NumericFormRow","alias","FetchedFormRow","StringFormRow","cloneDeep","sortObject","template","sortingKeys","ob","sort","a","b","reduce","accumulator","maintainEmptyElements","fieldSpecifier","copy","maintainEmptyElement","path","tmpPtr","fieldSpecifierCpy","tmpPath","element","push","VersioningPage","resourceElement","setResourceElement","resourceEntity","setResourceEntity","setOriginal","navigate","useNavigate","setValues","setDisabledFields","setIsNotMine","tmpValues","headerVersion","versions","evaluateSpecifiers","_key","specsEntries","resp","fst","identifier","route","responseType","filename","mimetype","blob","Blob","saveAs","EditContentPage","deleted","UpdateData","tmpOrig","toSend","remove","update","origArr","indexes","removed","missingValues","statusText","tmpVals","valuesPtr","lastIndexNumber","NaN","elements","minDel","Infinity","FormFile","setContentHeader","setContentPlain","setContentBody","setFile","contentBody","contentPlain","contentHeader","select_file","accept","filePickerExtensions","files","fileReader","FileReader","onloadend","content","result","regex","RegExp","splitted","split","parse","readAsText","overflow","h","resize","cols","rows","readOnly","AddPage","postType","setPostType","back","postBody","alert","postFile","FormData","append","Nav","justify","onSelect","Link","borderRadius","borderStyle","borderColor","borderWidth","margin","AddExperimentPage","protocols","setProtocols","handleProtocolChange","selectedProtocol","protocol","tmpDisabled","AddVersionsPage","postVersionFile","AddMeasurementsPage","samples","setSamples","items","setItems","formValues","setFormValues","features","setFeatures","feature","setFeature","handleFeatureChange","selectedFeature","addSample","tmpSample","dimension","enumValues","range","tmpSamples","sample","sampl","formValuesPtr","emailRef","PasswordRecoveryPage","pswConfirmRef","PasswordResetPage","setToken","pswConfirm","App","setNotifications","setTypes","setData","prev","origin","notificationManagement","fetchTypes","fetchedManagement","Provider","paddingRight","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b924fe64.chunk.js","sourcesContent":["import { base_api_url } from \"../config\";\r\n\r\nconst axios = require(\"axios\").default;\r\n\r\nconst https = require(\"https\");\r\n\r\nexport let api_url;\r\n\r\nconst instance = axios.create({\r\n  httpsAgent: new https.Agent({\r\n    //unsafe, delete in prod\r\n    //rejectUnauthorized: false,\r\n  }),\r\n});\r\n\r\nexport let notificationManager = {\r\n  PushNotification: (obj) => { },\r\n  RemoveNotification: (id) => { },\r\n  ClearNotifications: () => { },\r\n};\r\n\r\n//set APIs url according to configuration or GUI host\r\nexport function SetAPIUrl() {\r\n  console.log(window.location.origin);\r\n  api_url =\r\n    base_api_url !== undefined\r\n      ? base_api_url\r\n      : (window.location.origin.includes(\"localhost\")\r\n        ? \"https://localhost\"\r\n        : window.location.origin) + \"/v1\";\r\n}\r\n\r\n//login\r\nexport function login(username, password, tenant, saveToken = true) {\r\n  const body = {\r\n    username: `${username}`,\r\n    password: `${password}`,\r\n    tenant: `${tenant}`,\r\n  };\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      //Authorization: GetToken(),\r\n    },\r\n  };\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        if (saveToken === true) {\r\n          localStorage.setItem(\"token\", response.data.token);\r\n          localStorage.setItem(\r\n            \"token-expiration-time\",\r\n            response.data.token_expiration_time\r\n          );\r\n          localStorage.setItem(\"username\", response.data.user.username);\r\n          localStorage.setItem(\"userId\", response.data.user._id);\r\n          localStorage.setItem(\"user-role\", response.data.user.role);\r\n          localStorage.setItem(\"user-email\", response.data.user.email);\r\n          localStorage.setItem(\"user-tenant\", tenant);\r\n          localStorage.setItem(\"login-time\", new Date().getTime().toString());\r\n        }\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n//refresh token\r\nexport function refreshToken() {\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, {}, options)\r\n      .then((response) => {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"login-time\", new Date().getTime().toString());\r\n        localStorage.setItem(\r\n          \"token-expiration-time\",\r\n          response.data.token_expiration_time\r\n        );\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_file_generic(\r\n  resource_type,\r\n  formData,\r\n  additionalHeader = {},\r\n  token = undefined\r\n) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/file\";\r\n\r\n  console.log(\"POST file:\" + url_string);\r\n\r\n  const tempH = {\r\n    \"Content-Type\": \"multipart/form-data\",\r\n    \"Cache-Control\": \"no-cache\",\r\n    Authorization: token,\r\n  };\r\n\r\n  Object.entries(additionalHeader).forEach(([k, v]) => {\r\n    tempH[k] = v;\r\n  });\r\n  const options = {\r\n    headers: tempH,\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, formData, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of file on: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of file on: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_version_file_generic(\r\n  resource_type,\r\n  id,\r\n  formData,\r\n  additionalHeader = {},\r\n  token = undefined\r\n) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/\" + id + \"/versions\";\r\n\r\n  console.log(\"POST file:\" + url_string);\r\n\r\n  const tempH = {\r\n    \"Content-Type\": \"multipart/form-data\",\r\n    \"Cache-Control\": \"no-cache\",\r\n    Authorization: token,\r\n  };\r\n\r\n  Object.entries(additionalHeader).forEach(([k, v]) => {\r\n    tempH[k] = v;\r\n  });\r\n  const options = {\r\n    headers: tempH,\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, formData, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of file on: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of file on: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_generic(resource_type, body, token = undefined) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/\";\r\n\r\n  console.log(\"POST :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of a resource type: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of a resource type: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function put_generic(resource_type, body, id, token = undefined) {\r\n  const url_string = api_url + \"/\" + resource_type + \"/\" + id;\r\n  if (token === undefined) token = GetToken();\r\n\r\n  console.log(\"PUT :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, body, options)\r\n      .then((response) => {\r\n        //obscure password in notification bar\r\n        if (body[\"password\"] !== undefined)\r\n          body[\"password\"] = \"\".padStart(body[\"password\"].length, \"*\");\r\n\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Successful PUT of a resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body),\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        //obscure password in notification bar\r\n        if (body[\"password\"] !== undefined)\r\n          body[\"password\"] = \"\".padStart(body[\"password\"].length, \"*\");\r\n\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Error doing a PUT on resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body) +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function delete_generic(resource_type, id, token = undefined) {\r\n  let url_string = api_url + \"/\" + resource_type;\r\n  if (token === undefined) token = GetToken();\r\n  if (id !== undefined) {\r\n    url_string += \"/\" + id;\r\n  }\r\n  console.log(\"DELETE :\" + url_string);\r\n\r\n  //url: url_string;\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .delete(url_string, options)\r\n      .then((response) => {\r\n        if (id !== undefined) {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resource: \" + id + \", of type: \" + resource_type,\r\n          });\r\n        } else {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resources of type: \" + resource_type,\r\n          });\r\n        }\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"error deleting resource: \" +\r\n            id +\r\n            \", of type: \" +\r\n            resource_type +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n        if (error.statusCode === 404) {\r\n          //Not found\r\n          notificationManager.PushNotification({\r\n            name: \"error\",\r\n            time: new Date().toTimeString(),\r\n            msg:\r\n              \"Please check if your user is authorized to delete the resource. \" +\r\n              error.message,\r\n          });\r\n        }\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function delete_version(\r\n  resource_type,\r\n  idResource,\r\n  id,\r\n  token = undefined\r\n) {\r\n  if (idResource === undefined || id === undefined) {\r\n    console.log(\"idResource or id can't be null\");\r\n    return;\r\n  }\r\n  let url_string =\r\n    api_url + \"/\" + resource_type + \"/\" + idResource + \"/versions\" + \"/\" + id;\r\n  if (token === undefined) token = GetToken();\r\n\r\n  console.log(\"DELETE :\" + url_string);\r\n\r\n  //url: url_string;\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .delete(url_string, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Deleted resource: \" + id + \", version of type: \" + resource_type,\r\n        });\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"error deleting resource: \" +\r\n            id +\r\n            \", version of type: \" +\r\n            resource_type +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n        if (error.statusCode === 404) {\r\n          //Not found\r\n          notificationManager.PushNotification({\r\n            name: \"error\",\r\n            time: new Date().toTimeString(),\r\n            msg:\r\n              \"Please check if your user is authorized to delete the resource. \" +\r\n              error.message,\r\n          });\r\n        }\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function get_generic(\r\n  resource_type,\r\n  qs = {},\r\n  _options = {},\r\n  token\r\n) {\r\n  let url = api_url + \"/\" + resource_type + \"/\";\r\n  if (token === undefined) token = GetToken();\r\n\r\n  if (qs.filter !== undefined) {\r\n    url = url.concat(\"?filter=\" + qs.filter);\r\n  } else {\r\n    url = url.concat(\"?filter=\");\r\n  }\r\n  if (qs.limit !== undefined) {\r\n    url = url.concat(\"&limit=\" + qs.limit);\r\n  }\r\n  if (qs.page !== undefined) {\r\n    url = url.concat(\"&page=\" + qs.page);\r\n  }\r\n  if (qs.select !== undefined && qs.length !== 0) {\r\n    url = url.concat('&select=[\"' + qs.select.join('\",\"') + '\"]'); \r\n  }\r\n\r\n  console.log(\"GET :\" + url);\r\n\r\n  let options = {\r\n    ..._options,\r\n    ...{\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Cache-Control\": \"no-cache\",\r\n        Authorization: token,\r\n      },\r\n\r\n      json: true,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((response) => {\r\n        resolve({\r\n          response: response,\r\n          docs: response.data.docs,\r\n          totalDocs: response.data.totalDocs,\r\n          limit: response.data.limit,\r\n          totalPages: response.data.totalPages,\r\n          page: response.data.page,\r\n          pagingCounter: response.data.pagingCounter,\r\n          hasPrevPage: response.data.hasPrevPage,\r\n          hasNextPage: response.data.hasNextPage,\r\n          prevPage: response.data.prevPage,\r\n          nextPage: response.data.nextPage,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        /*commons.PushMsg({\r\n          type: \"error\",\r\n          msg:\r\n            \"Error getting resource(s) of type: \" +\r\n            resource_type +\r\n            \", with filter: \" +\r\n            qs.limit +\r\n            \". \" +\r\n            error.message,\r\n        });*/\r\n        reject({ error: error });\r\n      });\r\n  });\r\n}\r\n\r\n//return the login token from the localstorage\r\nfunction GetToken() {\r\n  return localStorage.getItem(\"token\");\r\n}\r\n\r\n//function to request a password reset\r\nexport async function requestPasswordReset(tenant, email) {\r\n  console.log({ email, tenant });\r\n\r\n  const url_string = api_url + \"/self/reset?tenant=\" + tenant;\r\n  const body = JSON.stringify({ email: email });\r\n  console.log(\"POST password reset request:\" + url_string);\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\n//function to reset the password from token\r\nexport async function resetPassword(tenant, token, password) {\r\n  const url_string = api_url + \"/self\";\r\n  console.log(\"PUT password reset:\" + url_string);\r\n  const body = JSON.stringify({\r\n    reset: token,\r\n    password: password,\r\n    tenant: tenant,\r\n  });\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, body, options)\r\n      .then((response) => {\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\n//get required password strength from the API\r\nexport async function getPasswordStrength() {\r\n  const url_string = api_url + \"/types/passwordStrength\";\r\n  console.log(\"GET password strength:\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url_string, options)\r\n      .then((response) => {\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n","const localization_it = {\r\n  username: \"Nome utente\",\r\n  password: \"Password\",\r\n  tenant: \"Organizzazione\",\r\n  email: \"email\",\r\n  keep_logged: \"Mantieni Accesso\",\r\n  select: \"Seleziona\",\r\n  language: \"Lingua\",\r\n  welcome: \"Bentornato\",\r\n  role: \"Ruolo\",\r\n  session_expire_in: \"La sessione scadrà in \",\r\n  resources: \"Risorse\",\r\n  tools: \"Strumenti\",\r\n  notifications: \"Notifiche\",\r\n  file_content: \"Contenuto del file\",\r\n  preview: \"Anteprima\",\r\n  configuration: \"Configurazione\",\r\n\r\n  clear_all: \"Cancella tutto\",\r\n\r\n  ///Completamento campi\r\n  enter: \"Inserisci\",\r\n  username_suggestion: \"Inserisci il nome utente\",\r\n  password_suggestion: \"Inserisci la password\",\r\n  tenant_suggestion: \"Inserisci la tua organizzazione\",\r\n  email_suggestion: \"Inserisci la tua email\",\r\n  add_tenant: \"Aggiungi organizzazione\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Benvenuto nel pannello di controllo del ML Registry!\",\r\n  left_bar_descr_hp:\r\n    \"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.\",\r\n  right_bar_descr_hp:\r\n    'La barra a destra può essere aperta cliccando sul pulsante \"Notifiche\" per mostrare la lista delle notifiche.',\r\n  session_expire_info_hp: ``,\r\n  github_page_hp: \"Pagina Github di Measurify\",\r\n  github_issue_page_hp: \"Segnala bug o problemi\",\r\n\r\n  //profile page\r\n  profile_page_desc:\r\n    \"questa è la pagina in cui puoi visionare il tuo profilo o modificare la password\",\r\n  pass_change_confirm: \"La password verrà modificata, procedere?\",\r\n  email_change_confirm: \"L'indirizzo email verrà modificato, procedere?\",\r\n  email_changed: \"Email cambiata\",\r\n  password_changed: \"Password cambiata\",\r\n  password_rules:\r\n    \"La password deve contenere almeno 6 caratteri, almeno una lettera maiuscola e un numero.\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link:\r\n    \"Sembra che tu abbia utilizzato un collegamento non funzionante.\",\r\n\r\n  ///Azioni\r\n  submit: \"Invio\",\r\n  cancel: \"Annulla\",\r\n  login: \"Accedi\",\r\n  logout: \"Esci\",\r\n  repeat: \"Ripeti\",\r\n  close: \"Chiudi\",\r\n  import: \"Importa\",\r\n  export: \"Esporta\",\r\n\r\n  password_recovery: \"Recupero Password\",\r\n  password_reset: \"Reset Password\",\r\n  forgot_password_link: \"Hai dimenticato la tua password?\",\r\n  go_login_page: \"Torna alla pagina di login\",\r\n  email_sent_successfully:\r\n    \"Email inviata, segui le istruzioni contenute per cambiare la tua password\",\r\n\r\n  ///Errori\r\n  login_error: \"Login errata!\",\r\n  unauthorised_user: \"Non sei abilitato a utilizzare questa pagina\",\r\n  session_expired: \"Sessione scaduta\",\r\n  //no_file: \"Seleziona un file\",\r\n  no_username: \"Inserisci il tuo username\",\r\n  no_password: \"Inserisci la tua password\",\r\n  define: \"Definisci: \",\r\n  no_changes: \"Non ci sono cambiamenti nella risorsa\",\r\n  no_file: \"Si prega di selezionare un file\",\r\n  duplicate_resource_error: \"Nel database è già presente una risorsa con\",\r\n  error_imported_file:\r\n    \"Nel file sono presenti errori, non è stato possibile importarlo\",\r\n  pass_not_match:\r\n    \"La password inserita e la conferma non combaciano, si prega di reinserirle.\",\r\n  old_pass_empty: \"Per favore, inserire la vecchia password\",\r\n  old_pass_wrong: \"La vecchia password è sbagliata\",\r\n  pass_not_null: \"La password non può essere vuota\",\r\n  missing_tenant: \"Si prega di inserire l'organizzazione\",\r\n  missing_email: \"Si prega di inserire l'email\",\r\n  missing_token: \"Si prega di inserire il token\",\r\n  stronger_password_required: \"Si prega di inserire una password più robusta\",\r\n  email_sent_errors:\r\n    \"Non è stato possibile inviare la mail, controllare i dati inseriti.\",\r\n\r\n  password_not_changed_errors: \"Non è stato possibile cambiare la password.\",\r\n  network_error: \"Errore di rete, si prega di controllare la connessione.\",\r\n  empty_email_error:\r\n    \"Il campo email è vuoto, si prega di inserire un indirizzo email valido.\",\r\n  email_not_match:\r\n    \"L'indirizzo email inserito e la sua conferma non combaciano, si prega di reinserirle.\",\r\n  email_same_as_old:\r\n    \"La nuova email coincide con quella vecchia, si prega di inserire un indirizzo email diverso dal precedente.\",\r\n};\r\n\r\nexport default localization_it;\r\n","const localization_en = {\r\n  username: \"Username\",\r\n  password: \"Password\",\r\n  tenant: \"Tenant\",\r\n  email: \"Email\",\r\n  keep_logged: \"Keep Logged In\",\r\n\r\n  select: \"Select\",\r\n  language: \"Language\",\r\n  welcome: \"Welcome back\",\r\n  role: \"Role\",\r\n  session_expire_in: \"Session will expire in \",\r\n  resources: \"Resources\",\r\n  tools: \"Tools\",\r\n  notifications: \"Notifications\",\r\n  file_content: \"File content\",\r\n  preview: \"Preview\",\r\n  configuration: \"Configuration\",\r\n\r\n  clear_all: \"Clear all\",\r\n\r\n  enter: \"Enter\",\r\n  username_suggestion: \"Insert your username\",\r\n  password_suggestion: \"Insert your password\",\r\n  tenant_suggestion: \"Insert your tenant\",\r\n  email_suggestion: \"Insert your email\",\r\n  add_tenant: \"Add tenant\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Welcome to the ML Registry dashboard!\",\r\n  left_bar_descr_hp:\r\n    \"The left bar contains the information about your account and  the list of tabs\",\r\n  right_bar_descr_hp:\r\n    'The right bar contains the notification bar (Click on \"Notifications\" to open).',\r\n  session_expire_info_hp: \"\",\r\n  github_page_hp: \"\",\r\n  github_issue_page_hp: \"Report bugs or issues\",\r\n\r\n  //profile page\r\n  profile_page_desc:\r\n    \"from this page you can view your own profile or change the password\",\r\n  pass_change_confirm: \"Password will be changed, do you confirm?\",\r\n  email_change_confirm: \"Email address will be changed, do you confirm?\",\r\n  email_changed: \"Email changed\",\r\n  password_changed: \"Password changed\",\r\n  password_rules:\r\n    \"Password length should be at least 6 characters, contains at least one uppercase character and one number.\",\r\n  forgot_password_link: \"Have you forgot your password?\",\r\n  go_login_page: \"Go to login page\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link: \"It looks like you have clicked on a broken link.\",\r\n\r\n  ///Actions\r\n  submit: \"Submit\",\r\n  cancel: \"Cancel\",\r\n  login: \"Login\",\r\n  logout: \"Logout\",\r\n  repeat: \"Repeat\",\r\n  close: \"Close\",\r\n  import: \"Import\",\r\n  export: \"Export\",\r\n\r\n  password_recovery: \"Password Recovery\",\r\n  password_reset: \"Reset Password\",\r\n  email_sent_successfully:\r\n    \"Email sent, please follow the provided instruction to reset the password\",\r\n\r\n  ///Errors\r\n  login_error: \"Wrong login!\",\r\n  unauthorised_user: \"You are not allowed to use this page\",\r\n  session_expired: \"Session expired\",\r\n  no_file: \"Please, select a file\",\r\n  no_username: \"Please, insert your username\",\r\n  no_password: \"Please, insert your password\",\r\n  define: \"Please, define: \",\r\n  no_changes: \"No changes in the resource\",\r\n  duplicate_resource_error: \"The database already contains a resource with\",\r\n  error_imported_file: \"File contains errors. It was not possible to import it\",\r\n  pass_not_match:\r\n    \"Provided password and the confirmation do not match. Please insert them again\",\r\n  old_pass_empty: \"Please. enter old password\",\r\n  old_pass_wrong: \"The old password is wrong\",\r\n  pass_not_null: \"Password cannot be empty\",\r\n  missing_tenant: \"Please, insert your tenant\",\r\n  missing_email: \"Please, insert your email\",\r\n  missing_token: \"Please, insert your token\",\r\n  stronger_password_required: \"Please, insert stronger password\",\r\n  email_sent_errors:\r\n    \"It was not possible to send the mail, please check the provided info.\",\r\n  password_not_changed_errors: \"It was not possible to change the password.\",\r\n  network_error: \"Network error, please check internet connection\",\r\n  empty_email_error:\r\n    \"Email field is empty, please insert a valid email address.\",\r\n  email_not_match:\r\n    \"Provided email and the confirmation do not match. Please insert them again.\",\r\n  email_same_as_old:\r\n    \"The new email is the same as the old email. Please insert a different email address.\",\r\n};\r\n\r\nexport default localization_en;\r\n","//validation functions used for input disable/validation etc.\r\n//the can be defined when required and used as \"pointer to function\" into the appropriate dict config.js\r\n//return must be coherent with name: i.e isInUse => true when is used\r\n\r\nimport { get_generic } from \"./http_operations\";\r\n\r\n//this function return true if the feature is in use (check on measurements/devices)\r\nexport async function isFeatureInUse(feature) {\r\n  const qs = { filter: JSON.stringify({ feature: feature }) };\r\n\r\n  try {\r\n    //check if feature has associated measurements\r\n    const res = await get_generic(\"measurements\", qs);\r\n    if (res.totalDocs > 0) {\r\n      //has measurements, so it's in use\r\n      return true;\r\n    } else {\r\n      //if the feature has no measurements, check if it has device associated\r\n      const qs = { filter: JSON.stringify({ features: feature }) };\r\n      const res = await get_generic(\"devices\", qs);\r\n\r\n      if (res.totalDocs > 0) {\r\n        //has a device, so it's in use\r\n        return true;\r\n      } else return false;\r\n    }\r\n  } catch (errors) {\r\n    console.log(\"Error on isFeatureInUse\");\r\n    console.log(errors);\r\n    return false;\r\n  }\r\n}\r\n\r\n//this function always return true\r\nexport function alwaysTrue() {\r\n  return true;\r\n}\r\n","import { isFeatureInUse, alwaysTrue } from \"./services/validations\";\r\n\r\n//url of APIs\r\n//base url of APIs (define it as undefined if you want to use the url where the GUI is actually hosted)\r\nexport const base_api_url = undefined;\r\n\r\n//name of this dashboard, shown to users\r\nexport const website_name = \"ML Registry Dashboard\";\r\n\r\n//languages enabled for this GUI, only english \"en\" and italian \"it\" are supported with this version\r\n//if no languages are enabled, the GUI will be localized in english\r\n//export const languages = [\"en\", \"it\"];\r\nexport const languages = [];\r\n\r\n//gui layout\r\n// options are \"horizontal\" or \"vertical\"\r\nexport const layout = \"vertical\";\r\n\r\n//dictionary of pages: key is the route for the API REST, value is an array that contains the fields shown to users\r\n//action is a special field that will enable actions for each row || still required, future version may have it removed\r\nexport const pages = {};\r\npages[\"users\"] = [\"username\", \"role\", \"email\", \"actions\"];\r\npages[\"tags\"] = [\"_id\", \"usage\", \"actions\"];\r\npages[\"datasets\"] = [\r\n  \"name\",\r\n  \"metadata\",\r\n  \"tags\",\r\n  \"actions\",\r\n];\r\npages[\"models\"] = [\r\n  \"name\",\r\n  \"metadata\",\r\n  \"status\",\r\n  \"tags\",\r\n  \"actions\",\r\n];\r\npages[\"algorithms\"] = [\r\n  \"name\",\r\n  \"metadata\",\r\n  \"status\",\r\n  \"tags\",\r\n  \"actions\",\r\n];\r\n\r\n//version pages: key is the model + \"Version\", value is an array that contains the fields shown to users\r\n//action is a special field that will enable actions for each row || still required, future version may have it removed\r\nexport const versionPages = {};\r\nversionPages[\"datasets\"] = [\"ordinal\", \"original\", \"timestamp\", \"size\", \"actions\"];\r\nversionPages[\"models\"] = [\"ordinal\", \"original\", \"timestamp\", \"size\", \"actions\"];\r\nversionPages[\"algorithms\"] = [\"ordinal\", \"original\", \"timestamp\", \"size\", \"actions\"];\r\n\r\n\r\n//alias dictionary: key is the page, value are object with pairs of the fields that will be renamed into page table header (\"key\" is renamed as \"value\")\r\nexport const aliasPages = {};\r\naliasPages[\"datasets\"] = { original: \"filename\", timestamp: \"data\", size: \"size (byte)\" };\r\naliasPages[\"models\"] = { original: \"filename\", timestamp: \"data\", size: \"size (byte)\" };\r\naliasPages[\"algorithms\"] = { original: \"filename\", timestamp: \"data\", size: \"size (byte)\" };\r\n//aliasPages[\"features\"] = { _id: \"Feature Name\", actions: \"Actions\" };\r\n//aliasPages[\"tags\"] = { _id: \"Tag Name\", actions: \"Actions\" };\r\n//aliasPages[\"devices\"] = { _id: \"Device Name\", actions: \"Actions\" };\r\n\r\n//actions dictionary: key is the page, value is an array that contains actions || working actions arae \"view\" | \"edit\" | \"delete\"\r\nexport const pageActions = {};\r\npageActions[\"users\"] = [\"view\", \"edit\", \"delete\"];\r\npageActions[\"tags\"] = [\"view\", \"delete\"];\r\npageActions[\"datasets\"] = [\"view\", \"edit\", \"versioning\", \"delete\"];\r\npageActions[\"models\"] = [\"view\", \"edit\", \"versioning\", \"delete\"];\r\npageActions[\"algorithms\"] = [\"view\", \"edit\", \"versioning\", \"delete\"];\r\npageActions[\"datasetsVersion\"] = [\"downloadVersion\", \"deleteVersion\"];\r\npageActions[\"modelsVersion\"] = [\"downloadVersion\", \"deleteVersion\"];\r\npageActions[\"algorithmsVersion\"] = [\"downloadVersion\", \"deleteVersion\"];\r\n\r\n//view dictionary: key is the page, value is an array that contains the fields shown to the user with \"view\" action\r\nexport const viewFields = {};\r\nviewFields[\"users\"] = [\"username\", \"role\", \"email\",\"_id\"];\r\nviewFields[\"tags\"] = [\"_id\", \"usage\", \"owner\", \"actions\"];\r\nviewFields[\"datasets\"] = [ \"name\", \"metadata\", \"versions\",\"tags\", \"users\", \"visibility\", \"_id\",\"owner\"];\r\nviewFields[\"models\"] = [\r\n  \"name\",\r\n  \"metadata\",\r\n  \"versions\",\r\n  \"status\",\r\n  \"datasets\",  \r\n  \"tags\",\r\n  \"users\",  \r\n  \"visibility\",\r\n  \"_id\",\r\n  \"owner\"\r\n];\r\nviewFields[\"algorithms\"] = [\r\n  \"name\",\r\n  \"metadata\",\r\n  \"versions\",\r\n  \"status\",\r\n  \"datasets\",\r\n  \"tags\",\r\n  \"users\",  \r\n  \"visibility\",\r\n  \"_id\",\r\n  \"owner\"\r\n];\r\n\r\n\r\n//edit dictionary: key is the page, value is an array that contains the fields that can be edited with \"edit\" action\r\n//fields should be specified in the same format of the object that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:NaN for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\nexport const editFields = {};\r\n//editFields[\"devices\"] = { visibility: \"\", tags: [\"\"] };\r\n\r\n//editFields[\"tags\"] = { _id:\"\", usage: \"\" };\r\n\r\neditFields[\"models\"] = {\r\n  name: \"\",      \r\n  metadata: [{ name: \"\", value: \"\" }],  \r\n  status: \"\",    \r\n  datasets: [\"\"],\r\n  tags: [\"\"], \r\n  users: [\"\"],\r\n  visibility: \"\"\r\n};\r\n\r\neditFields[\"algorithms\"] = {\r\n  name: \"\",     \r\n  metadata: [{ name: \"\", value: \"\" }],  \r\n  status: \"\",     \r\n  datasets: [\"\"],\r\n  tags: [\"\"], \r\n  users: [\"\"],\r\n  visibility: \"\"\r\n};\r\n\r\neditFields[\"datasets\"] = {\r\n  name: \"\",   \r\n  metadata: [{ name: \"\", value: \"\" }],\r\n  tags: [\"\"],\r\n  users: [\"\"],\r\n  visibility: \"\"\r\n};\r\n\r\neditFields[\"users\"]={username:\"\",email:\"\"}\r\n\r\n//add dictionary: key is the page, value is an array that contains the fields that can will be used to post the entity\r\n//fields should be specified in the same format of the objet that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:NaN for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\nexport const addFields = {};\r\naddFields[\"tenants\"] = {\r\n  token: \"\",\r\n  _id: \"\",\r\n  organization: \"\",\r\n  address: \"\",\r\n  email: \"\",\r\n  phone: \"\",\r\n  admin_username: \"\",\r\n  admin_password: \"\"\r\n};\r\n\r\naddFields[\"datasets\"] = {\r\n  name: \"\",  \r\n  metadata: [{ name: \"\", value: \"\" }],\r\n  tags: [\"\"],\r\n  users: [\"\"],\r\n  visibility: \"\"\r\n};\r\n\r\naddFields[\"models\"] = {\r\n  name: \"\",  \r\n  metadata: [{ name: \"\", value: \"\" }],\r\n  status: \"\",\r\n  datasets: [\"\"],\r\n  tags: [\"\"],\r\n  users: [\"\"],\r\n  visibility: \"\"  \r\n};\r\n\r\naddFields[\"algorithms\"] = {\r\n  name: \"\",  \r\n  metadata: [{ name: \"\", value: \"\" }],\r\n  status: \"\",\r\n  datasets: [\"\"],\r\n  tags: [\"\"],\r\n  users: [\"\"],\r\n  visibility: \"\"\r\n};\r\n\r\naddFields[\"versions\"] = {\r\n  ordinal: \"\",\r\n  file: \"\",\r\n};\r\n\r\naddFields[\"users\"] = { username: \"\", password: \"\", email:\"\", role: \"\" };\r\n\r\naddFields[\"tags\"] = { _id: \"\", usage: \"\" };\r\n\r\n//edit fields specifiers dictionary\r\n//this dictionary allow to specify particular behaviour for input fields, that can be managed by a specific function\r\n// type can be \"disable\" -> policy is applied to fields to be disabled, true when field should be disabled\r\n//\r\nexport const editFieldsSpecifier = {};\r\n//editFieldsSpecifier[\"features\"] = {\r\n  //_id: { type: \"disable\", policy: isFeatureInUse },\r\n  //items: { type: \"disable\", policy: isFeatureInUse },\r\n//}\r\n\r\neditFieldsSpecifier[\"users\"] = {\r\n  username: { type: \"disable\", policy: alwaysTrue },\r\n};\r\neditFieldsSpecifier[\"datasets\"] = {  \r\n  name: { type: \"disable\", policy: alwaysTrue },\r\n};\r\neditFieldsSpecifier[\"models\"] = {\r\n  name: { type: \"disable\", policy: alwaysTrue },\r\n};\r\neditFieldsSpecifier[\"algorithms\"] = {\r\n  name: { type: \"disable\", policy: alwaysTrue },\r\n};\r\n\r\n//dictionary to select the way to post entity/ies, it's an array which can contain \"form\", \"file\", or both\r\nexport const addTypes = {};\r\naddTypes[\"users\"] = [\"form\", \"file\"];\r\naddTypes[\"tags\"] = [\"form\", \"file\"];\r\naddTypes[\"models\"] = [\"form\", \"file\"];\r\naddTypes[\"algorithms\"] = [\"form\", \"file\"];\r\naddTypes[\"datasets\"] = [\"form\", \"file\"];\r\naddTypes[\"versions\"] = [\"file\"];\r\naddTypes[\"tenants\"] = [\"form\"];\r\n\r\n//dictionary for fetched types\r\n//types are fetched on the /types route and matched with fields following this dictionary\r\nexport const fetchedPageTypes = {};\r\nfetchedPageTypes[\"users\"] = { role: \"UserRoles\" };\r\nfetchedPageTypes[\"datasets\"] = { visibility: \"VisibilityTypes\" };\r\nfetchedPageTypes[\"models\"] = { visibility: \"VisibilityTypes\", status: \"ModelStatusTypes\" };\r\nfetchedPageTypes[\"algorithms\"] = { visibility: \"VisibilityTypes\", status: \"AlgorithmStatusTypes\" };\r\nfetchedPageTypes[\"tags\"] = { usage: \"UsageTypes\" };\r\n\r\n//dictionary for fetched data\r\n//data is fetched on the according resource route and matched with fields following this dictionary\r\n//the value of the specified field is the route to search for data. _ids of that route will be used as options\r\nexport const fetchedPageData = {};\r\n/*fetchedPageData[\"tags\"] = { tags: \"tags\" };\r\nfetchedPageData[\"things\"] = { tags: \"tags\" };\r\nfetchedPageData[\"devices\"] = { features: \"features\" };\r\nfetchedPageData[\"features\"] = { tags: \"tags\" };\r\nfetchedPageData[\"measurements\"] = {\r\n  device: \"devices\",\r\n  thing: \"things\",\r\n  tags: \"tags\",\r\n};*/\r\n\r\nfetchedPageData[\"datasets\"] = { users: \"users\",tags:\"tags\" };\r\nfetchedPageData[\"models\"] = { datasets: \"datasets\", users: \"users\",tags:\"tags\" };\r\nfetchedPageData[\"algorithms\"] = { datasets: \"datasets\", users: \"users\",tags:\"tags\" };\r\n\r\n//restriction dictionary: key is the page, value is an array of roles allowed to access to that page\r\nexport const restrictionPages = {};\r\nrestrictionPages[\"users\"] = [\"admin\"];\r\nrestrictionPages[\"tags\"] = [\"admin\"];","import localization_it from \"./localizations/localization_it\";\r\nimport localization_en from \"./localizations/localization_en\";\r\n\r\nimport { languages } from \"../config\";\r\n\r\ninterface ILocalization {\r\n  username: string;\r\n  password: string;\r\n  tenant: string;\r\n  email: string;\r\n  keep_logged: string;\r\n  select: string;\r\n  language: string;\r\n  welcome: string;\r\n  role: string;\r\n  session_expire_in: string;\r\n  resources: string;\r\n  tools: string;\r\n  notifications: string;\r\n  file_content: string;\r\n  preview: string;\r\n  configuration: string;\r\n\r\n  clear_all: string;\r\n\r\n  ///Fields\r\n  enter: string;\r\n  username_suggestion: string;\r\n  password_suggestion: string;\r\n  tenant_suggestion: string;\r\n  email_suggestion: string;\r\n  add_tenant: string;\r\n\r\n  //homepage\r\n  welcome_hp: string;\r\n  left_bar_descr_hp: string;\r\n  right_bar_descr_hp: string;\r\n  session_expire_info_hp: string;\r\n  github_page_hp: string;\r\n  github_issue_page_hp: string;\r\n\r\n  //profile page\r\n  profile_page_desc: string;\r\n  pass_change_confirm: string;\r\n  email_change_confirm: string;\r\n  password_rules: string;\r\n\r\n  //404\r\n  oh_no: string;\r\n  broken_link: string;\r\n\r\n  ///Actions\r\n  submit: string;\r\n  cancel: string;\r\n  login: string;\r\n  logout: string;\r\n  repeat: string;\r\n  close: string;\r\n  import: string;\r\n  export: string;\r\n\r\n  //\r\n  password_recovery: string;\r\n  password_reset: string;\r\n  forgot_password_link: string;\r\n  go_login_page: string;\r\n  email_sent_successfully: string;\r\n\r\n  ///Errors\r\n  login_error: string;\r\n  unauthorised_user: string;\r\n  session_expired: string;\r\n  no_file: string;\r\n  no_username: string;\r\n  no_password: string;\r\n  define: string;\r\n  no_changes: string;\r\n  error_imported_file: string;\r\n  duplicate_resource_error: string;\r\n  pass_not_match: string;\r\n  old_pass_empty: string;\r\n  old_pass_wrong: string;\r\n  pass_not_null: string;\r\n  password_changed: string;\r\n  email_changed: string;\r\n  missing_tenant: string;\r\n  missing_email: string;\r\n  missing_token: string;\r\n  stronger_password_required: string;\r\n  email_sent_errors: string;\r\n  password_not_changed_errors: string;\r\n  network_error: string;\r\n  empty_email_error: string;\r\n  email_not_match: string;\r\n  email_same_as_old: string;\r\n}\r\n\r\nexport default function locale() {\r\n  let tkn = localStorage.getItem(\"language\");\r\n  if (languages.length === 0) {\r\n    return localization_en as ILocalization;\r\n  }\r\n  if (languages.length === 1) {\r\n    tkn = languages[0];\r\n  }\r\n\r\n  //check token first\r\n  if (tkn === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (tkn === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //then check language from browser\r\n  if (navigator.language.substring(0, 2) === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (navigator.language.substring(0, 2) === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //if the token found or language is not valid -> default language: english\r\n  return localization_en as ILocalization;\r\n}\r\n","var _style, _g, _g2;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgHiDriveLogoClaimRgb(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 2000 684.1443\",\n    style: {\n      enableBackground: \"new 0 0 2000 684.1443\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _style || (_style = /*#__PURE__*/React.createElement(\"style\", {\n    type: \"text/css\"\n  }, \"\\r\\n\\t.st0{fill:#412DDC;}\\r\\n\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Ebene_1\"\n  })), _g2 || (_g2 = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Ebene_2\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Ebene_1_00000087379663538115244230000007289071449435198639_\"\n  }, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M273.8813,0l-18.8949,154.1839h-78.9261L195.0387,0H80.6832L30.1849,411.0756h114.3555l22.154-180.0848 h78.8426l-22.154,180.0848h114.3555L388.2368,0H273.8813z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M432.8709,2.2803l-9.2844,75.5039h114.3535l9.2864-75.5039H432.8709z M420.0013,106.6177 l-37.3841,304.4579h114.3555l37.4656-304.4579H420.0013z\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1135.3733,165.1794l-0.4077-58.5617h-97.7394l-37.3841,304.4579h114.3535l21.1777-172.0214 c1.7101-14.1721,10.3442-20.1178,29.4857-20.1178h54.7338l14.6614-118.9166 C1191.5726,100.0198,1156.9567,126.4099,1135.3733,165.1794z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1263.7954,106.5778h114.3672l-37.3903,304.5068H1226.417L1263.7954,106.5778z M1276.6091,2.2963h114.3553 l-9.2589,75.5126h-114.3672L1276.6091,2.2963z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1712.9618,106.5778l-136.6525,304.5068h-109.7969l-62.5334-304.5068h116.1033l15.3057,190.612 l61.4706-190.612H1712.9618z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1998.9126,186.153l-11.4437,93.2038h-166.2128l-6.2474,50.948 c-1.2637,10.2274,1.4762,17.8566,24.2103,17.8566c20.8091,0,26.9502-4.3933,28.1194-13.9593l3.0942-25.1787h113.3988 l-2.8462,23.1474c-6.7908,55.294-37.0714,85.4801-150.293,85.4801c-118.9495,0-136.3809-35.7368-129.0587-95.4713 l15.5654-126.6967c7.334-59.7109,33.552-95.4477,152.4896-95.4477C1982.9102,100.0351,2005.6915,130.9535,1998.9126,186.153z  M1861.1619,169.5247c-22.7578,0-27.3518,7.6056-28.6036,17.833l-5.6805,46.2712h52.8138l6.0703-49.4835 C1886.9429,174.5557,1881.9591,169.5247,1861.1619,169.5247z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M851.1967,0H701.5729l-18.8969,153.8583h-97.1688l-9.3659,76.8069h97.0872l-22.1541,180.4104h149.6238 c126.5709,0,161.5131-35.2673,169.0873-96.436l26.7972-218.2031C1004.0756,35.2678,977.7676,0,851.1967,0z M881.8218,99.5311 L855.7563,311.626c-1.7101,13.8465-11.076,22.6427-45.6105,22.6427h-35.2683l12.8697-104.9071h-56.1179l9.0397-74.2819h56.1994 l9.6125-78.2729h35.2663C876.3633,76.8069,883.5319,85.6036,881.8218,99.5311z\"\n  })), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M110.5972,539.2612l-9.4614,77.0629c-2.2112,18.0159-14.2417,30.3447-54.8392,30.3447H0l16.9143-137.7523 h46.2926C103.8044,508.9164,112.8124,521.2452,110.5972,539.2612z M61.123,525.8904H38.4976L25.7473,629.6988h22.6333 c23.1264,0,28.3363-7.2263,29.2829-14.9139l9.0835-73.9846C87.6895,533.1127,84.2533,525.8904,61.123,525.8904z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M216.8713,570.5604l-3.6191,29.4777H149.409l-2.5334,20.6368 c-0.7914,6.4507-0.0398,12.6072,18.6284,12.6072c16.8706,0,20.5652-3.1657,21.2811-9.012l1.4158-11.5056h23.4923 l-1.4556,11.8317c-1.9249,15.6815-12.7026,24.3116-46.6505,24.3116c-36.4256,0-42.3633-12.0424-40.3151-28.7181l5.6235-45.8193 c2.0482-16.6796,10.9408-28.7221,47.3704-28.7221C210.2138,545.6483,218.7962,554.8948,216.8713,570.5604z M174.345,561.278 c-18.6682,0-20.9311,6.1564-21.7225,12.6031l-1.6425,13.3867h40.3509l2.0084-16.3774 C194.0591,565.0403,191.2155,561.278,174.345,561.278z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M301.256,583.263l1.6664-13.5696c0.5727-4.6531-2.2709-8.4153-18.5449-8.4153 c-16.2701,0-19.9647,3.1617-20.5374,7.8148l-1.0579,8.6381c-2.076,16.9064,62.1331,9.0398,58.6771,37.2091l-1.376,11.2032 c-1.7817,14.4803-12.6867,22.7645-46.4636,22.7645s-42.5343-9.2307-40.7566-23.7111l1.7061-13.9037h23.4923l-1.6664,13.5736 c-0.5727,4.6531,2.2709,8.4154,19.1414,8.4154c16.8705,0,20.5652-3.1657,21.1379-7.8149l1.0579-8.6421 c2.076-16.9023-61.9581-9.0358-58.5021-37.2051l1.3761-11.2033c1.7777-14.4684,12.5117-22.7685,45.6921-22.7685 c33.1764,0,41.7588,9.2466,39.981,23.715l-1.7061,13.8997H301.256z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M353.8004,547.8873h23.6633l-12.1259,98.7814h-23.6673L353.8004,547.8873z M357.9763,513.8679h23.6673 l-2.1953,17.8648H355.785L357.9763,513.8679z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M389.017,659.9163l1.6743-13.5935h23.2537l-1.6147,13.1799c-0.7198,5.8463,2.1118,9.012,18.5409,9.012 c18.2267,0,20.4061-6.1564,21.1976-12.6032l2.764-22.5259c-5.7031,4.4265-14.9178,7.5206-29.0045,7.5206 c-30.1658,0-34.4967-11.7044-32.6037-27.1234l5.0309-40.9912c1.8931-15.4189,9.0994-27.1234,39.2652-27.1234 c16.5643,0,25.7393,4.3628,29.7323,10.6266l2.426-8.3876h19.3164l-13.1918,107.4275 c-2.0482,16.6796-10.9527,28.8096-46.8494,28.8096C395.5274,684.1443,387.0921,675.5977,389.017,659.9163z M457.3623,612.7964 l4.7724-38.8476c0.7914-6.4468-0.5966-12.3049-18.6682-12.3049c-18.0676,0-20.8953,5.8582-21.6867,12.3049l-4.7685,38.8476 c-0.7914,6.4468,0.5966,12.309,18.6642,12.309C453.7432,625.1053,456.5708,619.2432,457.3623,612.7964z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M514.2576,547.8873h19.3164l0.3381,9.1432c6.9001-7.4131,17.4512-11.3823,32.9497-11.3823 c25.7433,0,34.1149,10.0818,31.8798,28.2806l-8.9284,72.7399h-23.6673l8.7495-71.2405 c1.1136-9.0836-3.7702-13.8043-17.8847-13.8043c-14.1144,0-21.4123,5.202-22.506,14.1026l-8.7097,70.9422h-23.6673 L514.2576,547.8873z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M627.2013,547.8873h23.6633l-12.1259,98.7814h-23.6673L627.2013,547.8873z M631.3771,513.8679h23.6673 l-2.1953,17.8648h-23.6633L631.3771,513.8679z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M676.0392,547.8873h19.3164l0.3381,9.1432c6.9001-7.4131,17.4512-11.3823,32.9496-11.3823 c25.7433,0,34.115,10.0818,31.8799,28.2806l-8.9284,72.7399h-23.6673l8.7495-71.2405 c1.1136-9.0836-3.7702-13.8043-17.8847-13.8043s-21.4124,5.202-22.506,14.1026l-8.7097,70.9422h-23.6673L676.0392,547.8873z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M775.278,659.9163l1.6743-13.5935h23.2537l-1.6147,13.1799c-0.7198,5.8463,2.1118,9.012,18.5409,9.012 c18.2267,0,20.4061-6.1564,21.1976-12.6032l2.764-22.5259c-5.7031,4.4265-14.9178,7.5206-29.0045,7.5206 c-30.1658,0-34.4968-11.7044-32.6037-27.1234l5.0309-40.9912c1.8931-15.4189,9.0994-27.1234,39.2652-27.1234 c16.5643,0,25.7354,4.3628,29.7323,10.6266l2.426-8.3876h19.3164l-13.1918,107.4275 c-2.0482,16.6796-10.9528,28.8096-46.8494,28.8096C781.7884,684.1443,773.3531,675.5977,775.278,659.9163z M843.6232,612.7964 l4.7724-38.8476c0.7914-6.4468-0.5966-12.3049-18.6682-12.3049c-18.0676,0-20.8953,5.8582-21.6868,12.3049l-4.7684,38.8476 c-0.7914,6.4468,0.5966,12.309,18.6642,12.309S842.8318,619.2432,843.6232,612.7964z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1010.4437,612.4146h-42.073l-14.2258,34.2542h-24.5422l61.0076-137.7523h24.3115l26.0894,137.7523 h-25.2104L1010.4437,612.4146z M1007.791,595.4526l-8.8568-56.6289l-23.5201,56.6289H1007.791z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1060.4349,620.6312l8.9324-72.7438h23.6633l-8.7455,71.2445 c-1.1176,9.0795,3.7662,13.8043,17.2842,13.8043s20.8118-5.202,21.9054-14.1065l8.7097-70.9423h23.6674l-12.126,98.7814 h-19.3204l-0.338-9.1432c-6.6417,7.1984-18.028,11.3823-32.6077,11.3823 C1065.6527,648.9078,1058.1998,638.826,1060.4349,620.6312z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1199.8815,620.1062c-0.7915,6.4507,0.1432,11.1078,10.4318,11.1078h14.8383l-1.8971,15.4547h-18.9187 c-25.437,0-30.1101-10.3721-28.0579-27.0478l6.9081-56.2789h-11.1556l1.8931-15.4547h11.1595l2.3147-18.8551l24.7053-8.4671 l-3.3527,27.3222h26.6342l-1.8971,15.4547h-26.6381L1199.8815,620.1062z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1334.0784,574.0681l-5.6991,46.4199c-2.0482,16.6757-10.905,28.4199-47.3307,28.4199 c-36.4255,0-42.4031-11.7441-40.3549-28.4199l5.6991-46.4199c2.0481-16.6757,10.905-28.4199,47.3346-28.4199 C1330.153,545.6483,1336.1265,557.3925,1334.0784,574.0681z M1310.4707,573.5829c0.7914-6.4467,0.0039-12.3049-18.6642-12.3049 c-18.6682,0-20.8954,5.8582-21.6868,12.3049l-5.8184,47.3903c-0.7915,6.4507-0.004,12.3089,18.6642,12.3089 c18.6681,0,20.8953-5.8582,21.6868-12.3089L1310.4707,573.5829z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1468.0803,545.6522c22.7526,0,31.2356,9.183,28.9647,27.6761l-9.004,73.3404h-23.6672l8.821-71.837 c1.1533-9.3818-3.8379-13.2037-14.9617-13.2037c-11.1237,0-18.3102,4.2991-19.4397,13.502l-8.7853,71.5388h-22.7924 l8.8171-71.837c1.1533-9.3818-3.8379-13.2037-14.9615-13.2037c-11.1238,0-18.3103,4.2991-19.4397,13.502l-8.7853,71.5388 h-23.6633l12.1299-98.7775h19.3164l0.3619,8.475c6.6178-7.1268,16.3774-10.7181,29.4937-10.7181 c14.3253,0,23.2697,3.7861,26.9364,11.5771c6.4547-7.795,16.5166-11.5771,30.6589-11.5771V545.6522z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1608.5012,574.3704l-8.8767,72.2984h-19.3164l-0.6045-6.4587 c-5.7509,5.3133-16.7155,8.6978-33.8962,8.6978c-27.175,0-33.0531-8.833-31.5419-21.1617l2.1238-17.3041 c1.5153-12.3248,9.5449-20.9868,36.7159-20.9868c14.8025,0,24.0848,2.2072,29.1636,5.8303l2.6288-21.4044 c0.7914-6.4467,0.1233-12.6031-18.1034-12.6031c-15.8326,0-19.4397,3.1617-20.1556,9.0119l-1.5829,12.8737h-23.2576 l1.6425-13.3748c1.9249-15.6814,12.4481-24.1406,45.2745-24.1406C1604.6117,545.6483,1610.5494,557.6907,1608.5012,574.3704z  M1578.3911,626.8791l1.913-15.5701c0.4932-4.0526-3.619-7.2144-21.0901-7.2144c-15.6736,0-18.7677,3.1617-19.2648,7.2144 l-1.913,15.5701c-0.4971,4.0526,1.8215,7.2183,17.495,7.2183C1573.0023,634.0974,1577.894,630.9316,1578.3911,626.8791z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1655.7285,620.1062c-0.7915,6.4507,0.1431,11.1078,10.4316,11.1078h14.8384l-1.8971,15.4547h-18.9187 c-25.4371,0-30.1101-10.3721-28.058-27.0478l6.9081-56.2789h-11.1555l1.8931-15.4547h11.1595l2.3147-18.8551l24.7052-8.4671 l-3.3525,27.3222h26.6342l-1.8971,15.4547h-26.6382L1655.7285,620.1062z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1706.8651,547.8873h23.6633l-12.126,98.7814h-23.6674L1706.8651,547.8873z M1711.041,513.8679h23.6672 l-2.1953,17.8648h-23.6633L1711.041,513.8679z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1838.8468,574.0681l-5.6991,46.4199c-2.0482,16.6757-10.905,28.4199-47.3307,28.4199 c-36.4255,0-42.4031-11.7441-40.3549-28.4199l5.6991-46.4199c2.0481-16.6757,10.905-28.4199,47.3346-28.4199 C1834.9214,545.6483,1840.8949,557.3925,1838.8468,574.0681z M1815.2391,573.5829c0.7914-6.4467,0.0039-12.3049-18.6642-12.3049 c-18.6682,0-20.8954,5.8582-21.6868,12.3049l-5.8184,47.3903c-0.7915,6.4507-0.004,12.3089,18.6642,12.3089 s20.8953-5.8582,21.6868-12.3089L1815.2391,573.5829z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1866.0854,547.8873h19.3164l0.338,9.1432c6.9001-7.4131,17.4513-11.3823,32.9497-11.3823 c25.7433,0,34.115,10.0818,31.8799,28.2806l-8.9285,72.7399h-23.6672l8.7494-71.2405 c1.1136-9.0836-3.7701-13.8043-17.8846-13.8043s-21.4124,5.202-22.506,14.1026l-8.7097,70.9422h-23.6674L1866.0854,547.8873z\"\n  })))))));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgHiDriveLogoClaimRgb);\nexport default __webpack_public_path__ + \"static/media/Hi_Drive_Logo_Claim_rgb.e39905c1.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { languages } from \"../../config\";\r\nimport \"./languageSelector.scss\";\r\n\r\nexport const LanguageSelector = () => {\r\n  function setSessionLanguage(language: string) {\r\n    localStorage.setItem(\"language\", language);\r\n    window.location.reload();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {locale().language}\r\n      <div>\r\n        {languages.includes(\"it\") && (\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => setSessionLanguage(\"it\")}\r\n          >\r\n            Ita\r\n          </Button>\r\n        )}\r\n        {languages.includes(\"en\") && (\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => setSessionLanguage(\"en\")}\r\n          >\r\n            Eng\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n  //\r\n};\r\n","import React from \"react\";\r\nimport { ReactComponent as Logo } from \"../../resources/Hi_Drive_Logo_Claim_rgb.svg\";\r\nimport \"../authPage/authPage.scss\";\r\n\r\n//this component define the top left logo section of the authpage, password recovery page and password reset page\r\nexport default function LogoHolder() {\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"logo-section\">\r\n        <Logo />\r\n      </div>\r\n      <div className=\"title-section\">ML Registry Dashboard</div>\r\n      <br />\r\n      <div className=\"subtitle-section\">Online repository for trained machine learning models, algorithms and datasets.</div>\r\n      <br />\r\n      <div className=\"poweredtitle-section\">\r\n        Powered by&nbsp;\r\n        <a target=\"_blank\" href=\"https://measurify.org/\">\r\n          Measurify\r\n        </a>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { login } from \"../../services/http_operations\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { languages } from \"../../config\";\r\nimport \"./authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport LogoHolder from \"../logoHolder/logoHolder\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nconst userRef = React.createRef();\r\nconst pswRef = React.createRef();\r\nconst tenantRef = React.createRef();\r\n\r\nconst AuthPageComp = () => {\r\n  //const { location, replace } = useHistory();\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    const user = userRef.current.value;\r\n    const psw = pswRef.current.value;\r\n    const tenant = tenantRef.current.value;\r\n\r\n    if (user === \"\") {\r\n      setMsg(locale().no_username);\r\n      return;\r\n    }\r\n    if (psw === \"\") {\r\n      setMsg(locale().no_password);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await login(user, psw, tenant);\r\n      window.location.replace(\"/\");\r\n    } catch (error) {\r\n      console.log({ error: error.response.data });\r\n      setMsg(error.response.data.message + \" : \" + error.response.data.details);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <LogoHolder />\r\n      </div>\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <h4>{locale().login}</h4>\r\n        <Form onSubmit={submitForm}>\r\n          <Form.Group className=\"mb-3\" controlId=\"username\">\r\n            <Form.Label>{locale().username}</Form.Label>\r\n            <Form.Control\r\n              ref={userRef}\r\n              type=\"text\"\r\n              placeholder={locale().username_suggestion}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n            <Form.Label>{locale().password}</Form.Label>\r\n            <Form.Control\r\n              type=\"password\"\r\n              ref={pswRef}\r\n              placeholder={locale().password_suggestion}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n            <Form.Label>{locale().tenant}</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              ref={tenantRef}\r\n              placeholder={locale().tenant_suggestion}\r\n            />\r\n          </Form.Group>\r\n          <Button variant=\"success\" type=\"submit\">\r\n            {locale().submit}\r\n          </Button>\r\n        </Form>\r\n        <br />\r\n        <div style={{ color: \"red\" }}>{msg}</div>\r\n        <div className=\"form-row row\">\r\n          <NavLink to={`/passwordrecovery`}>\r\n            {locale().forgot_password_link}\r\n          </NavLink>\r\n        </div>\r\n        <br />\r\n        <div className=\"form-row row\">\r\n          <NavLink to={`/add/tenants`}>\r\n            <Button variant=\"outline-success\" size=\"sm\">\r\n              {locale().add_tenant}\r\n              <i\r\n                className=\"fa fa-plus-circle\"\r\n                aria-hidden=\"true\"\r\n                title={\"Add\"}\r\n                style={{\r\n                  width: 30 + \"px\",\r\n                  height: 30 + \"px\",\r\n                  marginRight: 10 + \"px\",\r\n                  opacity: 0.85,\r\n                }}\r\n              ></i>\r\n            </Button>\r\n          </NavLink>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AuthPage = AuthPageComp;\r\n","import React, { useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { website_name } from \"../../config\";\r\n\r\nimport \"./homePage.scss\";\r\n\r\nconst HomePageComp = () => {\r\n  useEffect(() => {});\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">{website_name}</header>\r\n      <main className=\"page-content\">\r\n        <div className=\"home-page\">\r\n          <div className=\"info-box\">\r\n            <div className=\"info-text\">\r\n              {locale().welcome_hp}\r\n              <br />\r\n              <br />\r\n              {locale().left_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().right_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().session_expire_info_hp}\r\n              <br />\r\n              <br />\r\n              <a\r\n                href=\"https://github.com/measurify/server/issues\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                title=\"https://github.com/measurify/server/issues\"\r\n              >\r\n                {locale().github_issue_page_hp}\r\n              </a>\r\n              <br />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const HomePage = HomePageComp;\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./notFoundPage.scss\";\r\n\r\nconst notFoundPageComp = () => {\r\n  return (\r\n    <div className=\"notFound-page\">\r\n      {locale().oh_no}\r\n      <br />\r\n      <br />\r\n      {locale().broken_link}\r\n      <br />\r\n      <br />\r\n      <a\r\n        href=\"https://github.com/measurify/server/issues\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        title=\"https://github.com/measurify/server/issues\"\r\n      >\r\n        {locale().github_issue_page_hp}\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NotFoundPage = notFoundPageComp;\r\n","//check if a generic object is default, according to its type\r\nexport const isDefault = (obj) => {\r\n  //undefined is considered default\r\n  if (obj === undefined) return true;\r\n  //null is considered default\r\n  if (obj == null) return true;\r\n  //Nan is default for numbers\r\n  if (typeof obj === \"number\") {\r\n    return isNaN(obj);\r\n  }\r\n\r\n  //default check for strings\r\n  if (typeof obj === \"string\") {\r\n    return obj === \"\";\r\n  }\r\n\r\n  //input field is an array\r\n  if (Array.isArray(obj)) {\r\n    if (obj.length === 0) return true;\r\n    let def = true;\r\n    obj.forEach((elem) => {\r\n      def = def && isDefault(elem);\r\n    });\r\n    return def;\r\n  }\r\n\r\n  //check all values if object\r\n  if (obj.constructor === Object) {\r\n    let def = true;\r\n    Object.entries(obj).forEach(([_, v]) => {\r\n      def = def && isDefault(v);\r\n    });\r\n    return def;\r\n  }\r\n};\r\n\r\n//non-default items lenght\r\nexport const nonDefaultLength = (obj) => {\r\n  if (Array.isArray(obj) === false) return -1;\r\n  return obj.filter((e) => !isDefault(e)).length;\r\n};\r\n\r\n//remove all default or empty field from an object, recursively\r\nexport const removeDefaultElements = (obj) => {\r\n  if (Array.isArray(obj)) {\r\n  }\r\n  if (obj.constructor === Object) {\r\n    const entr = Object.entries(obj);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      //check if value is an array\r\n      if (Array.isArray(entr[i][1])) {\r\n        for (let j = 0; j < entr[i][1].length; j++) {\r\n          if (\r\n            entr[i][1][j].constructor === Object ||\r\n            Array.isArray(entr[i][1][j])\r\n          ) {\r\n            removeDefaultElements(entr[i][1][j]);\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          } else {\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      //check if value is an Object\r\n      if (entr[i][1].constructor === Object) {\r\n        const subEntr = Object.entries(entr[i][1]);\r\n        for (let j = 0; j < subEntr.length; j++) {\r\n          if (\r\n            subEntr[i][1].constructor === Object ||\r\n            Array.isArray(subEntr[i][1])\r\n          ) {\r\n            removeDefaultElements(subEntr[i][1]);\r\n          } else {\r\n            if (isDefault(subEntr[i][1])) delete entr[i][1][subEntr[i][0]];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return obj;\r\n};\r\n\r\n//check if two objects (arrays, variables or objects) are equal\r\nexport const areEqual = (obj1, obj2) => {\r\n  //undefined check\r\n  if (obj1 === undefined || obj2 === undefined) return false;\r\n  //single value and ref check\r\n  if (obj1 === obj2) return true;\r\n\r\n  if (typeof obj1 !== typeof obj2) return false;\r\n\r\n  //one is array, other isn't\r\n  if (\r\n    (Array.isArray(obj1) && !Array.isArray(obj2)) ||\r\n    (!Array.isArray(obj1) && Array.isArray(obj2))\r\n  )\r\n    return false;\r\n\r\n  //both are array\r\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\r\n    //different length => not equal\r\n    if (obj1.length !== obj2.length) return false;\r\n    for (let i = 0; i < obj1.length; i++) {\r\n      if (!areEqual(obj1[i], obj2[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //one is object, other isn't\r\n  if (\r\n    (obj1.constructor === Object && obj2.constructor !== Object) ||\r\n    (obj1.constructor !== Object && obj2.constructor === Object)\r\n  )\r\n    return false;\r\n\r\n  //both are object\r\n  if (obj1.constructor === Object && obj2.constructor === Object) {\r\n    const k1 = Object.keys(obj1);\r\n    const k2 = Object.keys(obj2);\r\n    if (k1.length !== k2.length) return false;\r\n    if (!areEqual(k1, k2)) return false;\r\n\r\n    const v1 = Object.values(obj1);\r\n    const v2 = Object.values(obj2);\r\n    if (!areEqual(v1, v2)) return false;\r\n\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\n//capitalize the first letter of a string\r\nexport function capitalize(s) {\r\n  return s && s[0].toUpperCase() + s.slice(1);\r\n}\r\n\r\n//format string date into yyyy/mm/dd\r\nexport function FormatDate(dt) {\r\n  dt = dt.replace(\"T\", \" \");\r\n  return dt.slice(0, 19).replaceAll(\"-\", \"/\");\r\n}\r\n\r\n//format metadata [name1:value1 ; name2:value2]\r\nexport function FormatMetadata(dt) {\r\n  const str =\r\n    \"[ \" +\r\n    dt\r\n      .map((el) =>\r\n        el.name + \" : \" + el.value)\r\n      .join(\" ; \") +\r\n    \" ]\";\r\n  return (    \r\n      str.length <= 100\r\n        ? str\r\n        : str.slice(0, 97) + \"...\"    \r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport \"./navigation.scss\";\r\n\r\nimport locale from \"../../common/locale\";\r\nimport { refreshToken } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nimport { restrictionPages, pages, languages, website_name } from \"../../config\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { capitalize } from \"../../services/misc_functions\";\r\n\r\nfontawesome.library.add(\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck\r\n);\r\n\r\nlet intervalRef = React.createRef();\r\nlet loginTime = React.createRef();\r\n\r\nlet remainingSeconds = React.createRef();\r\nlet duration = React.createRef();\r\n\r\nlet role = React.createRef();\r\nlet username = React.createRef();\r\nlet tenant = React.createRef();\r\n\r\nexport default function Navigation() {\r\n  const [isOpened, setIsOpened] = useState(false);\r\n\r\n  const usr = localStorage.getItem(\"username\");\r\n  const rl = localStorage.getItem(\"user-role\");\r\n  const tn = localStorage.getItem(\"user-tenant\");\r\n\r\n  username.current = usr !== null ? usr : \"\";\r\n  role.current = rl !== null ? rl : \"\";\r\n  tenant.current = tn !== null && tn !== \"\" ? tn : \"-\";\r\n\r\n  //useeffect on change time\r\n  useEffect(() => {\r\n    //convert duration time in string format to milliseconds\r\n    function DurationToMilliSeconds() {\r\n      let exp = localStorage.getItem(\"token-expiration-time\");\r\n\r\n      if (exp === null) return 300;\r\n      if (exp.endsWith(\"h\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n      } else if (exp.endsWith(\"m\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n      } else if (exp.endsWith(\"s\")) {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n      //default case, right now the same as seconds\r\n      else {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n    }\r\n\r\n    //calculate remaining seconds and refresh token if required\r\n    function CalcEnding() {\r\n      let t0;\r\n      let remainingSec;\r\n      //if remaining time is already calculated, just decrement that number by 1\r\n      if (remainingSeconds.current !== null) {\r\n        remainingSec = remainingSeconds.current - 1;\r\n      }\r\n      //otherwise, calculate remaining seconds\r\n      else {\r\n        //check if login time is already defined, if it's null get it from localstorage or current time (refresh case)\r\n        if (loginTime.current === null) {\r\n          const retryLoginTime = localStorage.getItem(\"login-time\");\r\n          //if localstorage containst login time, use it and store it into state\r\n          if (retryLoginTime !== null) {\r\n            loginTime.current = retryLoginTime;\r\n            t0 = parseInt(retryLoginTime, 10);\r\n          }\r\n          //otherwise get it from current time and store it into state\r\n          else {\r\n            t0 = Date.now();\r\n            loginTime.current = t0;\r\n          }\r\n        }\r\n        //use logintime stored into state\r\n        else {\r\n          t0 = parseInt(loginTime.current, 10);\r\n        }\r\n        if (duration.current === null)\r\n          duration.current = DurationToMilliSeconds();\r\n        const endTime = t0 + duration.current;\r\n\r\n        remainingSec = (endTime - Date.now()) / 1000;\r\n      }\r\n\r\n      if (remainingSec < 60) {\r\n        clearInterval(intervalRef.current);\r\n        refreshToken().then(() => {\r\n          remainingSeconds.current = null;\r\n          loginTime.current = null;\r\n\r\n          intervalRef.current = setInterval(() => {\r\n            CalcEnding();\r\n          }, 1000);\r\n          return;\r\n        });\r\n      }\r\n      if (remainingSec <= 0) {\r\n        localStorage.clear();\r\n        //session expired, automatically logout\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n\r\n      //const mins = Math.floor(remainingSec / 60);\r\n      //const secs = Math.floor(remainingSec % 60);\r\n\r\n      remainingSeconds.current = parseInt(remainingSec, 10);\r\n    }\r\n\r\n    intervalRef.current = setInterval(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, []);\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIconRole() {\r\n    if (role.current === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role.current === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role.current === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role.current === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {isOpened ? (\r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n        ) : (\r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        )}\r\n      </Button>\r\n      <NavLink to=\"/home\" className=\"nav-wrap\">\r\n        {website_name}\r\n      </NavLink>\r\n      <hr />\r\n      <div className={`app-nav-wrapper ${isOpened ? \"opened\" : \"\"}`}>\r\n        <div className=\"app-nav-links\">\r\n          <hr />\r\n          <div className=\"data-wrapper\">\r\n            <NavLink to={`/viewProfile/`} key={`viewProfile`}>\r\n              {locale().welcome + \" \"}\r\n              <b>{username.current}</b>\r\n            </NavLink>\r\n            <div style={{ paddingLeft: 10 + \"px\" }}>\r\n              <h3>\r\n                {locale().role + \" \"}\r\n                {renderIconRole()}\r\n              </h3>\r\n            </div>\r\n            <div style={{ paddingLeft: 10 + \"px\" }}>\r\n              <h3>\r\n                {locale().tenant + \" \"}\r\n                <b>{tenant.current}</b>\r\n              </h3>\r\n            </div>\r\n            <br />\r\n            <div style={{ paddingLeft: 20 + \"px\", paddingBottom: 20 + \"px\" }}>\r\n              <Button variant=\"outline-danger\" onClick={() => logOut()}>\r\n                {locale().logout}\r\n              </Button>\r\n            </div>\r\n            {languages.length > 1 && (\r\n              <React.Fragment>\r\n                <hr />\r\n                <h2>\r\n                  <LanguageSelector />\r\n                </h2>\r\n              </React.Fragment>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"app-nav-text\">{locale().resources}</div>\r\n          <hr />\r\n          {Object.keys(pages).map((k) => {\r\n            //check if user can access to the page\r\n            if (              \r\n              (restrictionPages[k] !== undefined &&\r\n                !restrictionPages[k].includes(role.current))\r\n            ) {\r\n              return \"\";\r\n            }\r\n            return (\r\n              <NavLink\r\n                to={`/` + k}\r\n                className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n                //activeClassName=\"active\"\r\n                key={k}\r\n                onClick={() => setIsOpened(false)}\r\n              >\r\n                {capitalize(k)}\r\n              </NavLink>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { viewFields } from \"../../config\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faEye,\r\n  faPencilAlt,\r\n  faCopy,\r\n  faCodeBranch,\r\n  faDownload,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\nimport {\r\n  Button,\r\n  OverlayTrigger,\r\n  Popover,\r\n  Accordion,\r\n  Table,\r\n} from \"react-bootstrap\";\r\n\r\nimport { delete_generic, delete_version } from \"../../services/http_operations\";\r\n\r\nfontawesome.library.add(faEye, faPencilAlt, faCopy, faCodeBranch, faDownload);\r\n\r\nfunction ActionContent(props) {\r\n  const toShow = {};\r\n  viewFields[props.resType].forEach((k) => {\r\n    if (k.constructor === Object) {\r\n      Object.keys(k).forEach((subK) => {\r\n        if (Array.isArray(props.resource[subK])) {\r\n          toShow[subK] = props.resource[subK].map((e) => {\r\n            const row = {};\r\n            k[subK].forEach((f) => {\r\n              row[f] = e[f];\r\n            });\r\n            return row;\r\n          });\r\n        } else {\r\n          toShow[subK] = props.resource[subK];\r\n        }\r\n      });\r\n    } else {\r\n      if (Object.keys(props.resource).includes(k)) {\r\n        toShow[k] = props.resource[k];\r\n      }\r\n    }\r\n  });\r\n\r\n  //render accordion with table when field is array of object\r\n  return UnrollView(toShow);\r\n}\r\n\r\nfunction UnrollView(item) {\r\n  return (\r\n    <Accordion defaultActiveKey={0} size={\"lg\"}>\r\n      {React.Children.toArray(\r\n        Object.entries(item).map(([key, value], i) => {\r\n          return (\r\n            <Accordion.Item eventKey={i}>\r\n              <Accordion.Header>\r\n                <b>{key}</b>\r\n              </Accordion.Header>\r\n              <Accordion.Body>\r\n                {value instanceof Object ? (\r\n                  Array.isArray(value) ? (\r\n                    value[0] !== undefined ? (\r\n                      Object.values(value[0]).some(\r\n                        (e) => e instanceof Object\r\n                      ) ? (\r\n                        React.Children.toArray(\r\n                          value.map((single, i) => {\r\n                            return (\r\n                              <Accordion>\r\n                                <Accordion.Item eventKey=\"0\">\r\n                                  <Accordion.Header>\r\n                                    {key === \"datasets\" ? single.name : key}{\" \"}\r\n                                    {key !== \"datasets\" ? <i>[{i}]</i> : \"\"}\r\n                                  </Accordion.Header>\r\n                                  <Accordion.Body>\r\n                                    {UnrollView(single)}\r\n                                  </Accordion.Body>\r\n                                </Accordion.Item>\r\n                              </Accordion>\r\n                            );\r\n                          })\r\n                        )\r\n                      ) : value[0] instanceof Object ? (\r\n                        <Table responsive striped bordered hover size=\"sm\">\r\n                          <thead>\r\n                            <tr>\r\n                              {React.Children.toArray(\r\n                                Object.keys(value[0]).map((e) => {\r\n                                  return <th>{e}</th>;\r\n                                })\r\n                              )}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {React.Children.toArray(\r\n                              value.map((row) => {\r\n                                return (\r\n                                  <tr>\r\n                                    {React.Children.toArray(\r\n                                      Object.values(row).map((v) => {\r\n                                        return <td>{v}</td>;\r\n                                      })\r\n                                    )}\r\n                                  </tr>\r\n                                );\r\n                              })\r\n                            )}\r\n                          </tbody>\r\n                        </Table>\r\n                      ) : (\r\n                        \"[ \" + value.join(\" , \") + \" ]\"\r\n                      )\r\n                    ) : (\r\n                      \"[ ]\"\r\n                    )\r\n                  ) : (\r\n                    <Table responsive striped bordered hover size=\"sm\">\r\n                      <tbody>\r\n                        {React.Children.toArray(\r\n                          Object.entries(value).map((entr) => {\r\n                            return (\r\n                              <tr>\r\n                                <td>\r\n                                  <b>{entr[0]}</b>\r\n                                </td>\r\n                                <td>{entr[1]}</td>\r\n                              </tr>\r\n                            );\r\n                          })\r\n                        )}\r\n                      </tbody>\r\n                    </Table>\r\n                  )\r\n                ) : value === undefined || value == null ? (\r\n                  <i>None</i>\r\n                ) : (\r\n                  value\r\n                )}\r\n              </Accordion.Body>\r\n            </Accordion.Item>\r\n          );\r\n        })\r\n      )}\r\n    </Accordion>\r\n  );\r\n}\r\n\r\nexport default function ActionManager(props) {\r\n  const [res, setRes] = useState(undefined);\r\n  useEffect(() => {\r\n    //use effect body\r\n  }, [props]);\r\n\r\n  const viewPopover =\r\n    res !== undefined ? (\r\n      <Popover\r\n        id=\"popover-positioned-left\"\r\n        style={{\r\n          width: 20 + \"vw\",\r\n          minWidth:\r\n            /Mobi/i.test(window.navigator.userAgent) == true ? 250 : 400 + \"px\",\r\n        }}\r\n      >\r\n        <Popover.Header as=\"h3\">View Resource</Popover.Header>\r\n        <Popover.Body>\r\n          <ActionContent resource={res} resType={props.resType} />\r\n        </Popover.Body>\r\n      </Popover>\r\n    ) : (\r\n      <Popover id=\"popover-positioned-left\" style={{ width: 20 + \"vw\" }}>\r\n        <Popover.Header as=\"h3\">\r\n          Loading<Popover.Body></Popover.Body>\r\n        </Popover.Header>\r\n      </Popover>\r\n    );\r\n  if (props.action === \"view\") {\r\n    return (\r\n      <OverlayTrigger\r\n        trigger=\"click\"\r\n        placement=\"left\"\r\n        overlay={viewPopover}\r\n        rootClose={true}\r\n      >\r\n        <Button\r\n          variant=\"link\"\r\n          size=\"sm\"\r\n          onClick={() => {\r\n            setRes(props.takeSingle(props.id));\r\n          }}\r\n        >\r\n          <i\r\n            className=\"fa fa-eye\"\r\n            aria-hidden=\"true\"\r\n            title=\"View\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n  if (props.action === \"downloadVersion\") {\r\n    return (\r\n      <Button\r\n        variant=\"link\"\r\n        size=\"sm\"\r\n        onClick={() => {\r\n          setRes(props.downloadSingle(props.id));\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fa fa-download\"\r\n          aria-hidden=\"true\"\r\n          title=\"Download\"\r\n          style={{\r\n            width: 25 + \"px\",\r\n            height: 25 + \"px\",\r\n            marginRight: 10 + \"px\",\r\n            opacity: 0.85,\r\n          }}\r\n        ></i>\r\n      </Button>\r\n    );\r\n  }\r\n  if (props.action === \"delete\") {\r\n    return (\r\n      <Button\r\n        variant={props.disabled ? \"outline-secondary\" : \"link\"}\r\n        size=\"sm\"\r\n        style={{ backgroundColor: \"transparent\", border: 0 + \"px\" }}\r\n        onClick={async () => {\r\n          if (!props.disabled) {\r\n            const result = window.confirm(\"Want to delete: \" + props.id + \"?\");\r\n            if (result) {\r\n              try {\r\n                const response = await delete_generic(props.resType, props.id);\r\n\r\n                if (response.response.status === 200) {\r\n                  props.removeSingle(props.id);\r\n                }\r\n              } catch (error) {\r\n                console.log(error);\r\n              }\r\n            }\r\n          }\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fa fa-times\"\r\n          aria-hidden=\"true\"\r\n          title={\r\n            props.disabled\r\n              ? \"You cannot delete resources that are not yours\"\r\n              : \"Delete\"\r\n          }\r\n          style={{\r\n            width: 30 + \"px\",\r\n            height: 30 + \"px\",\r\n            marginRight: 10 + \"px\",\r\n            opacity: 0.85,\r\n          }}\r\n        ></i>\r\n      </Button>\r\n    );\r\n  }\r\n  if (props.action === \"deleteVersion\") {\r\n    return (\r\n      <Button\r\n        variant={props.disabled ? \"outline-secondary\" : \"link\"}\r\n        size=\"sm\"\r\n        style={{ backgroundColor: \"transparent\", border: 0 + \"px\" }}\r\n        onClick={async () => {\r\n          if (!props.disabled) {\r\n            const result = window.confirm(\"Want to delete: \" + props.id + \"?\");\r\n            if (result) {\r\n              try {\r\n                const response = await delete_version(\r\n                  props.resType,\r\n                  props.idResource,\r\n                  props.id\r\n                );\r\n\r\n                if (response.response.status === 200) {\r\n                  props.removeSingle(props.id);\r\n                }\r\n              } catch (error) {\r\n                console.log(error);\r\n              }\r\n            }\r\n          }\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fa fa-times\"\r\n          aria-hidden=\"true\"\r\n          title={\r\n            props.disabled\r\n              ? \"You cannot delete versions of a resource that is not yours\"\r\n              : \"Delete\"\r\n          }\r\n          style={{\r\n            width: 30 + \"px\",\r\n            height: 30 + \"px\",\r\n            marginRight: 10 + \"px\",\r\n            opacity: 0.85,\r\n          }}\r\n        ></i>\r\n      </Button>\r\n    );\r\n  }\r\n  if (props.action === \"edit\") {\r\n    return (\r\n      <NavLink\r\n        to={props.disabled ? \"\" : `/edit/` + props.resType + \"/\" + props.id}\r\n      >\r\n        <Button\r\n          variant={props.disabled ? \"outline-secondary\" : \"link\"}\r\n          size=\"sm\"\r\n          style={{ backgroundColor: \"transparent\", border: 0 + \"px\" }}\r\n        >\r\n          <i\r\n            className=\"fa fa-pencil-alt\"\r\n            aria-hidden=\"true\"\r\n            title={\r\n              props.disabled\r\n                ? \"You cannot edit resources that are not yours\"\r\n                : \"Edit\"\r\n            }\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n  if (props.action === \"duplicate\") {\r\n    return (\r\n      <NavLink to={`/add/` + props.resType + \"/?from=\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-copy\"\r\n            aria-hidden=\"true\"\r\n            title=\"Duplicate\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n  if (props.action === \"versioning\") {\r\n    return (\r\n      <NavLink to={`/versions/` + props.resType + \"/\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-code-branch\"\r\n            aria-hidden=\"true\"\r\n            title=\"Version Management\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n  return <div />;\r\n}\r\n","import React from \"react\";\r\nimport { aliasPages } from \"../../config\";\r\n\r\nimport { Table } from \"react-bootstrap\";\r\nimport ActionManager from \"../actionsManager/actionsManager\";\r\nimport { FormatDate, FormatMetadata } from \"../../services/misc_functions\";\r\n\r\nexport default function ContentTable(props) {\r\n  if (props.header === undefined || props.resources === undefined)\r\n    return <div>Loading</div>;\r\n  if (props.header.includes(\"actions\") && props.actions === undefined)\r\n    return <div>Loading</div>;\r\n  return (\r\n    <div>\r\n      <Table responsive striped bordered hover>\r\n        <thead>\r\n          <tr key={\"header\"}>\r\n            {React.Children.toArray(\r\n              props.header.map((e) => {\r\n                if (aliasPages[props.resType] !== undefined)\r\n                  if (aliasPages[props.resType][e] !== undefined)\r\n                    return <th>{aliasPages[props.resType][e]}</th>;\r\n                return <th>{e}</th>;\r\n              })\r\n            )}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {React.Children.toArray(\r\n            props.resources.map((row, index) => {\r\n              return (\r\n                <tr>\r\n                  {React.Children.toArray(\r\n                    props.header.map((e) => {\r\n                      if (e === \"actions\") {\r\n                        return (\r\n                          <td>\r\n                            {props.actions.includes(\"view\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"view\"\r\n                                k={index + \"_view\"}\r\n                                id={row[\"_id\"]}\r\n                                takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"downloadVersion\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"downloadVersion\"\r\n                                k={index + \"_downloadVersion\"}\r\n                                idResource={props.idResource}\r\n                                id={row[\"ordinal\"]}\r\n                                downloadSingle={props.downloadSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"edit\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"edit\"\r\n                                k={index + \"_edit\"}\r\n                                id={row[\"_id\"]}\r\n                                disabled={row.owner&&localStorage.getItem(\"user-role\")!==\"admin\"&&row.owner!=localStorage.getItem(\"userId\")}\r\n                                //takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"duplicate\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"duplicate\"\r\n                                k={index + \"_duplicate\"}\r\n                                id={row[\"_id\"]}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"versioning\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"versioning\"\r\n                                id={row[\"_id\"]}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"delete\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"delete\"\r\n                                k={index + \"_delete\"}\r\n                                id={row[\"_id\"]}\r\n                                removeSingle={props.removeSingle}\r\n                                disabled={row.owner&&localStorage.getItem(\"user-role\")!==\"admin\"&&row.owner!=localStorage.getItem(\"userId\")}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"deleteVersion\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"deleteVersion\"\r\n                                k={index + \"_deleteVersion\"}\r\n                                idResource={props.idResource}\r\n                                id={row[\"ordinal\"]}\r\n                                removeSingle={props.removeSingle}\r\n                                disabled={props.isNotMine}  \r\n                                                              \r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                          </td>\r\n                        );\r\n                      }\r\n                      if (row[e] === undefined) return (<td>--undefined--</td>);\r\n                      if (Array.isArray(row[e])) {\r\n                        if (\r\n                          row[e][0] !== undefined &&\r\n                          row[e][0].constructor === Object\r\n                        ) {                          \r\n                          if (e === \"metadata\") {\r\n                            return <td>{FormatMetadata(row[e])}</td>;\r\n                          }\r\n                          const str =\r\n                            \"[ \" +\r\n                            row[e]\r\n                              .map((el) =>\r\n                                Object.entries(el)\r\n                                  .map((e) => e[0] + \" : \" + e[1])\r\n                                  .join(\" - \")\r\n                              )\r\n                              .join(\" -- \") +\r\n                            \" ]\";\r\n                          return (\r\n                            <td>\r\n                              {str.length <= 100\r\n                                ? str\r\n                                : str.slice(0, 97) + \"...\"}\r\n                            </td>\r\n                          );\r\n                        }\r\n                        return <td>{\"[ \" + row[e].join(\" , \") + \" ]\"}</td>;\r\n                      }\r\n                      if (e === \"date\" || e === \"timestamp\")\r\n                        return <td>{FormatDate(row[e])}</td>;\r\n                      return <td>{row[e]}</td>;\r\n                    })\r\n                  )}\r\n                </tr>\r\n              );\r\n            })\r\n          )}\r\n        </tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst AppContext = React.createContext();\r\n\r\nexport default AppContext;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { pages, pageActions, addFields } from \"../../config\";\r\nimport { get_generic } from \"../../services/http_operations\";\r\nimport ContentTable from \"../contentTable/contentTable\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { Pagination } from \"react-bootstrap\";\r\nimport AppContext from \"../../context\";\r\nimport \"./page.scss\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { faPlusCircle } from \"@fortawesome/fontawesome-free-solid\";\r\nfontawesome.library.add(faPlusCircle);\r\n\r\nexport default function Page(params) {\r\n  const { page } = useParams();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [resource, setResource] = useState(undefined);\r\n  const [header, setHeader] = useState(undefined);\r\n  const [actions, setActions] = useState(undefined);\r\n\r\n  const [pageNum, setPageNum] = useState(1);\r\n  const [pageLimit, setPageLimit] = useState(1);\r\n\r\n  const [hasNext, setHasNext] = useState();\r\n  const [hasPrev, setHasPrev] = useState();\r\n\r\n  const [prevPage, setPrevPage] = useState();\r\n  const [nextPage, setNextPage] = useState();\r\n\r\n  const [totalPages, setTotalPages] = useState();\r\n\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(page, qs);\r\n\r\n        // set state with the result\r\n        setHeader(pages[page]);\r\n        setResource(response.docs);\r\n        if (pageActions[page] !== undefined) setActions(pageActions[page]);\r\n\r\n        setHasNext(response.hasNextPage);\r\n        setHasPrev(response.hasPrevPage);\r\n\r\n        setTotalPages(response.totalPages);\r\n\r\n        setPrevPage(response.prevPage);\r\n        setNextPage(response.nextPage);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        setHeader(undefined);\r\n        setResource(undefined);\r\n        setHasNext(undefined);\r\n        setHasPrev(undefined);\r\n        setTotalPages(undefined);\r\n        setPrevPage(undefined);\r\n        setNextPage(undefined);\r\n      }\r\n    };\r\n\r\n    //get params for pagination\r\n    const num =\r\n      searchParams.get(\"page\") !== null ? searchParams.get(\"page\") : 1;\r\n    setPageNum(num);\r\n\r\n    const limit =\r\n      searchParams.get(\"limit\") !== null ? searchParams.get(\"limit\") : 10;\r\n    setPageLimit(limit);\r\n\r\n    const qs = { page: num, limit: limit };\r\n\r\n    // call the function\r\n    fetchData(qs)\r\n      // make sure to catch any error\r\n      .catch(console.error);\r\n  }, [params, page, searchParams]);\r\n\r\n  const takeSingle = (id) => {\r\n    return resource.find((r) => r._id === id);\r\n  };\r\n\r\n  const removeSingle = (id) => {\r\n    let tmp = resource.filter((el) => {\r\n      return el._id !== id;\r\n    });\r\n    myFetched.RemoveData(page);\r\n    setResource(tmp);\r\n  };\r\n\r\n  const RenderPagination = () => {\r\n    const prevEllipsis = parseInt(pageNum, 10) - 2 > 0;\r\n    const nextEllipsis = parseInt(pageNum, 10) + 2 < totalPages;\r\n\r\n    return (\r\n      <div style={{ display: \"inline-flex\", width: 100 + \"%\" }}>\r\n        <Pagination\r\n          style={{\r\n            alignSelf: \"center\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n          }}\r\n        >\r\n          <Pagination.First\r\n            disabled={pageNum === 1}\r\n            onClick={() => setSearchParams({ page: 1, limit: pageLimit })}\r\n          />\r\n          <Pagination.Prev\r\n            disabled={!hasPrev}\r\n            onClick={() =>\r\n              setSearchParams({ page: prevPage, limit: pageLimit })\r\n            }\r\n          />\r\n          {prevEllipsis && <Pagination.Ellipsis />}\r\n          {parseInt(pageNum, 10) - 1 > 0 && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) - 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) - 1}\r\n            </Pagination.Item>\r\n          )}\r\n          <Pagination.Item>\r\n            <b>{pageNum}</b>\r\n          </Pagination.Item>\r\n          {parseInt(pageNum, 10) + 1 <= totalPages && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) + 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) + 1}\r\n            </Pagination.Item>\r\n          )}\r\n          {nextEllipsis && <Pagination.Ellipsis />}\r\n\r\n          <Pagination.Next\r\n            disabled={!hasNext}\r\n            onClick={() =>\r\n              setSearchParams({ page: nextPage, limit: pageLimit })\r\n            }\r\n          />\r\n          <Pagination.Last\r\n            disabled={pageNum === totalPages}\r\n            onClick={() =>\r\n              setSearchParams({ page: totalPages, limit: pageLimit })\r\n            }\r\n          />\r\n        </Pagination>\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        {page}\r\n\r\n        {addFields[page] !== undefined && (\r\n          <NavLink to={`/add/` + page + \"/\"} key={page + \"_add_navlink\"}>\r\n            <Button variant=\"link\" size=\"sm\" key={page + \"button\"}>\r\n              <i\r\n                key={page + \"icon\"}\r\n                className=\"fa fa-plus-circle\"\r\n                aria-hidden=\"true\"\r\n                title={\"Add\"}\r\n                style={{\r\n                  width: 30 + \"px\",\r\n                  height: 30 + \"px\",\r\n                  marginRight: 10 + \"px\",\r\n                  opacity: 0.85,\r\n                }}\r\n              ></i>\r\n            </Button>\r\n          </NavLink>\r\n        )}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <ContentTable\r\n          resType={page}\r\n          header={header}\r\n          resources={resource}\r\n          actions={actions}\r\n          takeSingle={takeSingle}\r\n          removeSingle={removeSingle}\r\n        />\r\n        <RenderPagination />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  put_generic,\r\n  login,\r\n  getPasswordStrength,\r\n} from \"../../services/http_operations\";\r\nimport \"../page/page.scss\";\r\nimport { passwordStrength } from \"check-password-strength\";\r\n\r\nexport default function ProfilePage(params) {\r\n  //save in status informations of profile\r\n  const [username, setUsername] = useState(\"\");\r\n  const [role, setRole] = useState(\"\");\r\n  const [tenant, setTenant] = useState(\"\");\r\n  const [emailShow, setEmailShow] = useState(\"\");\r\n  const [oldPassword, setOldPassword] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [emailConfirm, setEmailConfirm] = useState(\"\");\r\n  const [msgPass, setMsgPass] = useState(\"\");\r\n  const [msgEmail, setMsgEmail] = useState(\"\");\r\n\r\n  function renderIconRole() {\r\n    if (role === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const username = localStorage.getItem(\"username\");\r\n    const role = localStorage.getItem(\"user-role\");\r\n    const tenant = localStorage.getItem(\"user-tenant\");\r\n    const _email = localStorage.getItem(\"user-email\");\r\n    setUsername(username !== null ? username : \"\");\r\n    setRole(role !== null ? role : \"\");\r\n    setTenant(tenant !== null && tenant !== \"\" ? tenant : \"-\");\r\n    setEmailShow(_email !== null ? _email : \"\");\r\n  }, []);\r\n\r\n  const submitPassword = async (e) => {\r\n    e.preventDefault();\r\n    if (oldPassword === \"\") {\r\n      setIsError(true);\r\n      setMsgPass(locale().old_pass_empty);\r\n    }\r\n    if (password !== passwordConfirm) {\r\n      setIsError(true);\r\n      setMsgPass(locale().pass_not_match);\r\n      return;\r\n    }\r\n    if (password === \"\" || passwordConfirm === \"\") {\r\n      setIsError(true);\r\n      setMsgPass(locale().pass_not_null);\r\n      return;\r\n    }\r\n\r\n    let requiredStr;\r\n    try {\r\n      const res = await getPasswordStrength();\r\n      requiredStr = res.response.data.passwordStrength;\r\n\r\n      const pswDetails = passwordStrength(password);\r\n\r\n      if (pswDetails.id < requiredStr) {\r\n        setIsError(true);\r\n        setMsgPass(locale().stronger_password_required);\r\n        return;\r\n      }\r\n    } catch (error) {\r\n      setIsError(true);\r\n      console.log(error);\r\n      //Required password strength cannot be acquired from the server, use the default\r\n      requiredStr = 1;\r\n    }\r\n\r\n    try {\r\n      await login(username, oldPassword, tenant !== \"-\" ? tenant : \"\", false);\r\n    } catch (error) {\r\n      setIsError(true);\r\n      setMsgPass(locale().old_pass_wrong);\r\n      return;\r\n    }\r\n    const result = window.confirm(locale().pass_change_confirm);\r\n    if (result) {\r\n      try {\r\n        const response = await put_generic(\r\n          \"users\",\r\n          { password: password },\r\n          username\r\n        );\r\n        setOldPassword(\"\");\r\n        setPassword(\"\");\r\n        setPasswordConfirm(\"\");\r\n        if (response.response.status === 200) {\r\n          setIsError(false);\r\n          setMsgPass(locale().password_changed);\r\n        }\r\n      } catch (error) {\r\n        setIsError(true);\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const submitEmail = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (email === \"\" || emailConfirm === \"\") {\r\n      setIsError(true);\r\n      setMsgEmail(locale().empty_email_error);\r\n      return;\r\n    }\r\n\r\n    if (email !== emailConfirm) {\r\n      setIsError(true);\r\n      setMsgEmail(locale().email_not_match);\r\n      return;\r\n    }\r\n    if (email === emailShow) {\r\n      setIsError(true);\r\n      setMsgEmail(locale().email_same_as_old);\r\n      return;\r\n    }\r\n    const result = window.confirm(locale().email_change_confirm);\r\n    if (result) {\r\n      try {\r\n        const response = await put_generic(\"users\", { email: email }, username);\r\n        setEmail(\"\");\r\n        setEmailConfirm(\"\");\r\n        if (response.response.status === 200) {\r\n          setIsError(false);\r\n          setMsgEmail(locale().email_changed);\r\n          setEmailShow(email);\r\n          localStorage.setItem(\"user-email\", email);\r\n        }\r\n      } catch (error) {\r\n        setIsError(true);\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        {locale().welcome}&nbsp;<b>{username}</b>:&nbsp;\r\n        {locale().profile_page_desc}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Container fluid>\r\n          <Row>\r\n            <Col xs={1}>Username:&nbsp;</Col>\r\n            <Col>\r\n              <b>{username}</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>{locale().role}</Col>\r\n            <Col>\r\n              {role}&nbsp;\r\n              {renderIconRole()}\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>{locale().email + \" \"}</Col>\r\n            <Col>\r\n              <b>{emailShow}</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>{locale().tenant + \" \"}</Col>\r\n            <Col>\r\n              <b>{tenant}</b>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <hr />\r\n        <Container fluid>\r\n          <Col>\r\n            <Row>\r\n              <b>Edit email</b>\r\n            </Row>\r\n          </Col>\r\n\r\n          <Row>\r\n            <Col>\r\n              <Form onSubmit={submitEmail}>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type=\"email\"\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setEmail(e.target.value);\r\n                      }}\r\n                      value={email}\r\n                      placeholder={locale().enter + \" new email\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type=\"email\"\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setEmailConfirm(e.target.value);\r\n                      }}\r\n                      value={emailConfirm}\r\n                      placeholder={locale().repeat + \" new email\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <font style={{ color: isError ? \"red\" : \"black\" }}>\r\n                      {msgEmail}\r\n                    </font>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <Button variant=\"primary\" type=\"submit\">\r\n                      {locale().submit}\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <hr />\r\n        <Container fluid>\r\n          <Col>\r\n            <Row>\r\n              <b>Edit password</b>\r\n            </Row>\r\n          </Col>\r\n\r\n          <Row>\r\n            <Col>\r\n              <Form onSubmit={submitPassword}>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setOldPassword(e.target.value);\r\n                      }}\r\n                      value={oldPassword}\r\n                      placeholder={locale().enter + \" old password\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setPassword(e.target.value);\r\n                      }}\r\n                      value={password}\r\n                      placeholder={locale().enter + \" new password\"}\r\n                    />{\" \"}\r\n                    <Form.Text className=\"text-muted\">\r\n                      {locale().password_rules}\r\n                    </Form.Text>\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setPasswordConfirm(e.target.value);\r\n                      }}\r\n                      value={passwordConfirm}\r\n                      placeholder={locale().repeat + \" new password\"}\r\n                      aria-describedby=\"passwordHelpBlock\"\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <font style={{ color: isError ? \"red\" : \"black\" }}>\r\n                      {msgPass}\r\n                    </font>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <Button variant=\"primary\" type=\"submit\">\r\n                      {locale().submit}\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import \"./unauthorizedPage.scss\";\r\n\r\nimport React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nexport default function UnauthorizedPage() {\r\n  return (\r\n    <div className=\"unAuth-page\">\r\n      <div className=\"info-box\">\r\n        <div className=\"info-text\">{locale().unauthorised_user}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  Button,\r\n  Badge,\r\n  Offcanvas,\r\n  Toast,\r\n  ToastContainer,\r\n} from \"react-bootstrap\";\r\nimport React, { useState, useContext, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport \"./notificationBar.scss\";\r\nimport AppContext from \"../../context\";\r\nimport { layout } from \"../../config\";\r\nconst oldNotifications = React.createRef();\r\n\r\nexport default function NotificationBar(props) {\r\n  const [show, setShow] = useState(false);\r\n  const [highlight, setHighlight] = useState(false);\r\n\r\n  let layoutRef = React.useRef();\r\n  const myNotifications = useContext(AppContext).notifications;\r\n  oldNotifications.current = 0;\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  /*\r\n  handleClick = () => {\r\n    this.setState({ highlight: true });\r\n    setTimeout(() => {\r\n      this.setState({ highlight: false });\r\n    }, 2000);\r\n  };*/\r\n\r\n  useEffect(() => {\r\n    if (oldNotifications.current < myNotifications.notifications.length) {\r\n      oldNotifications.current = myNotifications.notifications.length;\r\n\r\n      setHighlight(true);\r\n      setTimeout(() => {\r\n        setHighlight(false);\r\n      }, 600);\r\n    }\r\n  }, [myNotifications.notifications]);\r\n\r\n  //mobile view only allowed to be vertical\r\n  if (/Mobi/i.test(window.navigator.userAgent) === true) {\r\n    layoutRef.current = \"vertical\";\r\n  } else {\r\n    layoutRef.current = layout;\r\n  }\r\n  const errorNot = myNotifications.notifications.filter(\r\n    (e) => e.name === \"error\"\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className=\"notificationBar\"\r\n      style={\r\n        layoutRef.current === \"vertical\" &&\r\n        /Mobi/i.test(window.navigator.userAgent) === false\r\n          ? { height: 100 + \"vh\" }\r\n          : {}\r\n      }\r\n    >\r\n      <Button\r\n        variant=\"link\"\r\n        onClick={() => {\r\n          handleShow();\r\n        }}\r\n        style={{\r\n          color: \"#fff\",\r\n          textDecoration: \"none\",\r\n        }}\r\n      >\r\n        {locale().notifications}&nbsp;\r\n        <Badge\r\n          pill\r\n          bg={errorNot.length > 0 ? \"danger\" : \"success\"}\r\n          className={`element${highlight ? \" highlight\" : \"\"}`}\r\n        >\r\n          {myNotifications.notifications.length}\r\n        </Badge>\r\n        <span className=\"visually-hidden\">Unread notifications</span>\r\n      </Button>\r\n\r\n      <Offcanvas\r\n        style={{\r\n          backgroundColor: \"#123651\",\r\n          color: \"#fff\",\r\n        }}\r\n        show={show}\r\n        onHide={handleClose}\r\n        placement=\"end\"\r\n        name={\"notification_bar\"}\r\n        scroll={false}\r\n        backdrop={true}\r\n        keyboard={true}\r\n      >\r\n        <Offcanvas.Header>\r\n          <Offcanvas.Title>\r\n            {locale().notifications}\r\n            &nbsp;\r\n            <Badge pill bg={errorNot.length > 0 ? \"danger\" : \"success\"}>\r\n              {myNotifications.notifications.length}\r\n            </Badge>\r\n            &nbsp;&nbsp;&nbsp;\r\n            <Button variant=\"outline-secondary\" onClick={() => handleClose()}>\r\n              {locale().close + \" \" + locale().notifications}\r\n            </Button>\r\n          </Offcanvas.Title>\r\n        </Offcanvas.Header>\r\n        <Offcanvas.Body>\r\n          <div\r\n            style={{\r\n              width: 100 + \"%\",\r\n              height: 100 + \"%\",\r\n            }}\r\n          >\r\n            {myNotifications.notifications.length !== 0 && (\r\n              <Button\r\n                variant=\"warning\"\r\n                onClick={() => myNotifications.ClearNotifications()}\r\n              >\r\n                {locale().clear_all}\r\n              </Button>\r\n            )}\r\n\r\n            <ToastContainer>\r\n              {myNotifications.notifications.map((notification, index) => {\r\n                let type;\r\n                if (notification.name === \"info\") type = \"success\";\r\n                if (notification.name === \"error\") type = \"danger\";\r\n                return (\r\n                  <Toast\r\n                    className=\"d-inline-block m-1\"\r\n                    key={\"notification_\" + index}\r\n                    bg={type}\r\n                    animation={true}\r\n                    onClose={() => {\r\n                      myNotifications.RemoveNotification(index);\r\n                    }}\r\n                  >\r\n                    <Toast.Header>\r\n                      <img\r\n                        src=\"holder.js/20x20?text=%20\"\r\n                        className=\"rounded me-2\"\r\n                        alt=\"\"\r\n                      />\r\n                      <strong className=\"me-auto\">{notification.name}</strong>\r\n                      <small>{notification.time.slice(0, 15)}</small>\r\n                    </Toast.Header>\r\n                    <Toast.Body>{notification.msg}</Toast.Body>\r\n                  </Toast>\r\n                );\r\n              })}\r\n            </ToastContainer>\r\n          </div>\r\n        </Offcanvas.Body>\r\n      </Offcanvas>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Button, Container, Row, Col } from \"react-bootstrap\";\r\nimport NotificationBar from \"../notificationBar/notificationBar\";\r\nimport \"./horizontalNavigationBar.scss\";\r\n\r\nimport locale from \"../../common/locale\";\r\nimport { refreshToken } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nimport { pages, languages, website_name } from \"../../config\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { capitalize } from \"../../services/misc_functions\";\r\n\r\nfontawesome.library.add(\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck\r\n);\r\n\r\nlet intervalRef = React.createRef();\r\nlet loginTime = React.createRef();\r\n\r\nlet remainingSeconds = React.createRef();\r\nlet duration = React.createRef();\r\n\r\nlet role = React.createRef();\r\nlet username = React.createRef();\r\nlet tenant = React.createRef();\r\n\r\nexport default function HorizontalNavigationBar() {\r\n  const [isOpened, setIsOpened] = useState(false);\r\n\r\n  const usr = localStorage.getItem(\"username\");\r\n  const rl = localStorage.getItem(\"user-role\");\r\n  const tn = localStorage.getItem(\"user-tenant\");\r\n\r\n  username.current = usr !== null ? usr : \"\";\r\n  role.current = rl !== null ? rl : \"\";\r\n  tenant.current = tn !== null && tn !== \"\" ? tn : \"-\";\r\n\r\n  //useeffect on change time\r\n  useEffect(() => {\r\n    //convert duration time in string format to milliseconds\r\n    function DurationToMilliSeconds() {\r\n      let exp = localStorage.getItem(\"token-expiration-time\");\r\n\r\n      if (exp === null) return 300;\r\n      if (exp.endsWith(\"h\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n      } else if (exp.endsWith(\"m\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n      } else if (exp.endsWith(\"s\")) {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n      //default case, right now the same as seconds\r\n      else {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n    }\r\n\r\n    //calculate remaining seconds and refresh token if required\r\n    function CalcEnding() {\r\n      let t0;\r\n      let remainingSec;\r\n      //if remaining time is already calculated, just decrement that number by 1\r\n      if (remainingSeconds.current !== null) {\r\n        remainingSec = remainingSeconds.current - 1;\r\n      }\r\n      //otherwise, calculate remaining seconds\r\n      else {\r\n        //check if login time is already defined, if it's null get it from localstorage or current time (refresh case)\r\n        if (loginTime.current === null) {\r\n          const retryLoginTime = localStorage.getItem(\"login-time\");\r\n          //if localstorage containst login time, use it and store it into state\r\n          if (retryLoginTime !== null) {\r\n            loginTime.current = retryLoginTime;\r\n            t0 = parseInt(retryLoginTime, 10);\r\n          }\r\n          //otherwise get it from current time and store it into state\r\n          else {\r\n            t0 = Date.now();\r\n            loginTime.current = t0;\r\n          }\r\n        }\r\n        //use logintime stored into state\r\n        else {\r\n          t0 = parseInt(loginTime.current, 10);\r\n        }\r\n        if (duration.current === null)\r\n          duration.current = DurationToMilliSeconds();\r\n        const endTime = t0 + duration.current;\r\n\r\n        remainingSec = (endTime - Date.now()) / 1000;\r\n      }\r\n\r\n      if (remainingSec < 60) {\r\n        clearInterval(intervalRef.current);\r\n        refreshToken().then(() => {\r\n          remainingSeconds.current = null;\r\n          loginTime.current = null;\r\n\r\n          intervalRef.current = setInterval(() => {\r\n            CalcEnding();\r\n          }, 1000);\r\n          return;\r\n        });\r\n      }\r\n      if (remainingSec <= 0) {\r\n        localStorage.clear();\r\n        //session expired, automatically logout\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n\r\n      //const mins = Math.floor(remainingSec / 60);\r\n      //const secs = Math.floor(remainingSec % 60);\r\n\r\n      remainingSeconds.current = parseInt(remainingSec, 10);\r\n    }\r\n\r\n    intervalRef.current = setInterval(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, []);\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIconRole() {\r\n    if (role.current === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role.current === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role.current === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role.current === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"horizontal-nav\">\r\n      <div className=\"horizontal-nav-links\">\r\n        <div className=\"data-wrapper\">\r\n          <Container fluid>\r\n            <Row style={{ padding: 0 }}>\r\n              <Col>\r\n                <NavLink to=\"/home\" className=\"nav-wrap\">\r\n                  {website_name}\r\n                </NavLink>\r\n              </Col>\r\n              <Col>\r\n                <NavLink to={`/viewProfile/`} key={`viewProfile`}>\r\n                  {locale().welcome + \" \"}\r\n                  <b>{username.current}</b>\r\n                </NavLink>\r\n              </Col>\r\n              <Col>\r\n                <div className=\"horizontal-nav-text\">\r\n                  {locale().role + \" \"}\r\n                  {renderIconRole()}\r\n                </div>\r\n              </Col>\r\n              <Col>\r\n                <div className=\"horizontal-nav-text\">\r\n                  {locale().tenant + \" \"}\r\n                  <b>{tenant.current}</b>\r\n                </div>\r\n              </Col>\r\n              <Col>\r\n                <Button variant=\"outline-danger\" onClick={() => logOut()}>\r\n                  {locale().logout}\r\n                </Button>\r\n              </Col>\r\n\r\n              {languages.length > 1 && (\r\n                <Col>\r\n                  <LanguageSelector />\r\n                </Col>\r\n              )}\r\n              <Col>\r\n                <NotificationBar />\r\n              </Col>\r\n            </Row>\r\n            <Row style={{ padding: 0 }}>\r\n              <hr />\r\n              <div\r\n                style={{\r\n                  justifyContent: \"center\",\r\n                  alignItems: \"center\",\r\n                  alignSelf: \"flex-start\",\r\n                }}\r\n              >\r\n                {locale().tools}\r\n              </div>\r\n            </Row>\r\n            <Row style={{ padding: 0 }}>\r\n              {React.Children.toArray(\r\n                Object.keys(pages).map((k) => {\r\n                  return (\r\n                    <Col>\r\n                      <NavLink\r\n                        to={`/` + k}\r\n                        className={(navData) =>\r\n                          navData.isActive ? \"active\" : \"\"\r\n                        }\r\n                        //activeClassName=\"active\"\r\n                        key={k}\r\n                        onClick={() => setIsOpened(false)}\r\n                      >\r\n                        {capitalize(k)}\r\n                      </NavLink>\r\n                    </Col>\r\n                  );\r\n                })\r\n              )}\r\n            </Row>\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { nonDefaultLength } from \"../../services/misc_functions\";\r\nimport { Button, Form, Accordion, Container, Row, Col } from \"react-bootstrap\";\r\nimport Box from \"@mui/material/Box\";\r\n\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Autocomplete from \"@mui/material/Autocomplete\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../config\";\r\n\r\nexport const FormManager = (props) => {\r\n  //return if something is undefined\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  if (\r\n    props.values === undefined ||\r\n    props.resource === undefined ||\r\n    props.disabledFields === undefined ||\r\n    props.functionalFields === undefined ||\r\n    props.submitFunction === undefined ||\r\n    props.backFunction === undefined ||\r\n    props.handleChangesCallback === undefined ||\r\n    props.arrayDeleteCallback === undefined\r\n  )\r\n    return \"Loading\";\r\n  /*\r\n  console.log({\r\n    values: props.values,\r\n    resource: props.resource,\r\n    disabledFields: props.disabledFields,\r\n    functionalFields: props.functionalFields,\r\n    submitFunction: props.submitFunction,\r\n    backFunction: props.backFunction,\r\n    handleChangesCallback: props.handleChangesCallback,\r\n    arrayDeleteCallback: props.arrayDeleteCallback,\r\n    fetchedData: myFetched.data,\r\n    fetchedTypes: fetchedPageTypes,\r\n  });\r\n*/\r\n  //Numeric for row component\r\n  const NumericFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type=\"number\"\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(parseInt(e.target.value, 10), [\r\n                  key,\r\n                ]);\r\n              }}\r\n              value={isNaN(props.values[key]) ? \"\" : props.values[key]}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //string for row component\r\n  const StringFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type={key === \"password\" ? \"password\" :(key === \"email\"?\"email\": \"text\")}\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={props.values[key]}\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //fetched data for row component\r\n  const FetchedFormRow = (key, alias) => {\r\n    let options;\r\n    if (\r\n      myFetched !== {} &&\r\n      (myFetched.data[key] !== undefined || myFetched.data[alias] !== undefined)\r\n    ) {\r\n      options = myFetched.data[alias !== undefined ? alias : key];\r\n    }\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Autocomplete\r\n              id={key}\r\n              onChange={(e, newValue) => {\r\n                e.preventDefault();\r\n                if (newValue === \"\" || newValue === null)\r\n                  props.handleChangesCallback(\"\", [key]);\r\n                else props.handleChangesCallback(newValue._id, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={\r\n                props.values[key] === \"\"\r\n                  ? null\r\n                  : options.filter((e) => e._id === props.values[key])[0]\r\n              }\r\n              options={options}\r\n              getOptionLabel={(option) => {\r\n                return option.optionalLabel !== undefined\r\n                  ? option.optionalLabel\r\n                  : option._id;\r\n              }}\r\n              renderOption={(props, option) => (\r\n                <Box\r\n                  component=\"li\"\r\n                  sx={{ \"& > img\": { mr: 2, flexShrink: 0 } }}\r\n                  {...props}\r\n                >\r\n                  {option.optionalLabel !== undefined\r\n                    ? option.optionalLabel\r\n                    : option._id}\r\n                </Box>\r\n              )}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label={locale().enter + \" \" + key} />\r\n              )}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //select form row component\r\n  const SelectFormRow = (key, val) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Select\r\n              aria-label=\"Default select\"\r\n              value={props.values[key]}\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n            >\r\n              <option>{locale().select + \" \" + key}</option>\r\n              {React.Children.toArray(\r\n                Object.entries(val).map(([k, v]) => {\r\n                  return <option value={v}>{v}</option>;\r\n                })\r\n              )}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //numbers array form row component\r\n  const ArrayNumberFormRow = (k) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{k}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          {React.Children.toArray(\r\n            props.values[k].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>\r\n                      Insert <b>{k}</b>\r\n                      <i>[{index}]</i>\r\n                    </Form.Label>\r\n                    <Form.Control\r\n                      type=\"number\"\r\n                      disabled={\r\n                        props.disabledFields[k] !== undefined\r\n                          ? props.disabledFields[k]\r\n                          : false\r\n                      }\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        props.handleChangesCallback(\r\n                          parseInt(e.target.value, 10),\r\n                          [k, index]\r\n                        );\r\n                      }}\r\n                      value={\r\n                        isNaN(props.values[k][index])\r\n                          ? \"\"\r\n                          : props.values[k][index]\r\n                      }\r\n                      placeholder={locale().enter + \" \" + k}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //strings array form row component\r\n  const ArrayStringFormRow = (key) => {\r\n    let options;\r\n    if (myFetched !== {} && myFetched.data[key] !== undefined) {\r\n      options = myFetched.data[key];\r\n    }\r\n    const allowedVal = options !== undefined ? options.map((e) => e._id) : [];\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  <Col sm={4}>\r\n                    <Form.Group\r\n                      className=\"mb-3\"\r\n                      style={{ backgroundColor: \"white\" }}\r\n                    >\r\n                      {myFetched.data[key] !== undefined &&\r\n                      options !== undefined ? (\r\n                        <Autocomplete\r\n                          //freeSolo={key === \"tags\" ? true : false}\r\n                          disableClearable\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          onBlur={(e) => {\r\n                            if (\r\n                              e.target.value === \"\" ||\r\n                              (key !== \"tags\" &&\r\n                                key !== \"users\" && key !== \"datasets\"&&\r\n                                !allowedVal.includes(e.target.value)) ||\r\n                              (key === \"users\" &&\r\n                                !myFetched.data.users\r\n                                  .map((value) => value.optionalLabel)\r\n                                  .includes(e.target.value)) ||\r\n                              (key === \"datasets\" &&\r\n                                !myFetched.data.datasets\r\n                                  .map((value) => value.optionalLabel)\r\n                                  .includes(e.target.value))\r\n                            ) {                              \r\n                              e.preventDefault();\r\n                              props.arrayDeleteCallback([key, index]);\r\n                            }\r\n                          }}\r\n                          onInputChange={(e) => {\r\n                            if (e === null) return;\r\n                            e.preventDefault();\r\n                            if (e.target.value === 0) return;\r\n                            props.handleChangesCallback(e.target.value, [\r\n                              key,\r\n                              index,\r\n                            ]);\r\n                          }}\r\n                          onChange={(e, newValue) => {\r\n                            e.preventDefault();\r\n                            if (newValue === \"\" || newValue === null)\r\n                              props.handleChangesCallback(\"\", [key, index]);\r\n                            else\r\n                              props.handleChangesCallback(newValue._id, [\r\n                                key,\r\n                                index,\r\n                              ]);\r\n                          }}\r\n                          value={\r\n                            value === \"\"\r\n                              ? null\r\n                              : allowedVal.includes(value)\r\n                              ? options.filter((e) => e._id === value)[0]\r\n                              : value\r\n                          }\r\n                          options={options}\r\n                          getOptionLabel={(option) => {\r\n                            return option.optionalLabel !== undefined\r\n                              ? option.optionalLabel\r\n                              : option._id !== undefined\r\n                              ? option._id\r\n                              : option;\r\n                          }}\r\n                          renderOption={(props, option) => (\r\n                            <Box\r\n                              component=\"li\"\r\n                              sx={{ \"& > img\": { mr: 2, flexShrink: 0 } }}\r\n                              {...props}\r\n                            >\r\n                              {option.optionalLabel !== undefined\r\n                                ? option.optionalLabel\r\n                                : option._id}\r\n                            </Box>\r\n                          )}\r\n                          renderInput={(params) => (\r\n                            <TextField\r\n                              {...params}\r\n                              label={locale().enter + \" \" + key}\r\n                            />\r\n                          )}\r\n                        />\r\n                      ) : (\r\n                        <Form.Control\r\n                          type=\"text\"\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          onChange={(e) => {\r\n                            e.preventDefault();\r\n                            props.handleChangesCallback(e.target.value, [\r\n                              key,\r\n                              index,\r\n                            ]);\r\n                          }}\r\n                          value={props.values[key][index]}\r\n                          placeholder={locale().enter + \" \" + key}\r\n                        />\r\n                      )}\r\n                    </Form.Group>\r\n                  </Col>\r\n\r\n                  <Col md=\"auto\"></Col>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  //strings array form row component\r\n  const ArrayObjectFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((obj, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  {React.Children.toArray(\r\n                    Object.entries(obj).map(([k, value]) => {\r\n                      if (typeof value === \"number\") {\r\n                        return (\r\n                          <Col sm={2}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"number\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(\r\n                                    parseInt(e.target.value, 10),\r\n                                    [key, index, k]\r\n                                  );\r\n                                }}\r\n                                key={key + k + index + \"\"}\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                                value={\r\n                                  isNaN(props.values[key][index][k])\r\n                                    ? \"\"\r\n                                    : props.values[key][index][k]\r\n                                }\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //check if it's an enum\r\n                      if (\r\n                        fetchedPageTypes[props.resource] !== undefined &&\r\n                        fetchedPageTypes[props.resource][key] !== undefined &&\r\n                        fetchedPageTypes[props.resource][key][k] !==\r\n                          undefined &&\r\n                        myFetched.types !== undefined &&\r\n                        myFetched.types[\r\n                          fetchedPageTypes[props.resource][key][k]\r\n                        ] !== undefined\r\n                      ) {\r\n                        return (\r\n                          <Col sm={3}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Select\r\n                                aria-label=\"Default select\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                              >\r\n                                <option>{locale().select + \" \" + k}</option>\r\n                                {React.Children.toArray(\r\n                                  Object.entries(\r\n                                    myFetched.types[\r\n                                      fetchedPageTypes[props.resource][key][k]\r\n                                    ]\r\n                                  ).map(([k, v]) => {\r\n                                    return <option value={k}>{v}</option>;\r\n                                  })\r\n                                )}\r\n                              </Form.Select>\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //input field is a string\r\n                      if (typeof value === \"string\") {\r\n                        return (\r\n                          <Col sm={3}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"text\"\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //the object contains an array\r\n                      if (Array.isArray(value)) {\r\n                        if (value.length === 0) return k + \" is empty\";\r\n\r\n                        //only show range field when enum type is selected, otherwise skip it\r\n                        if (\r\n                          k === \"range\" &&\r\n                          props.values[key][index][\"type\"] !== \"enum\"\r\n                        )\r\n                          return \"\";\r\n                        return (\r\n                          <Row>\r\n                            <Accordion defaultActiveKey=\"0\">\r\n                              <Accordion.Item eventKey=\"0\">\r\n                                <Accordion.Header>\r\n                                  <b>{k}</b> : {nonDefaultLength(value)} items\r\n                                </Accordion.Header>\r\n                                <Accordion.Body>\r\n                                  {React.Children.toArray(\r\n                                    value.map((e, idx) => {\r\n                                      if (e.constructor === Object) {\r\n                                        const entr = Object.entries(e);\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col\r\n                                              sm={1}\r\n                                              style={{\r\n                                                borderRightStyle: \"dotted\",\r\n                                                borderRightWidth: 1 + \"px\",\r\n                                              }}\r\n                                            ></Col>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n\r\n                                            {React.Children.toArray(\r\n                                              entr.map(([_k, _v]) => {\r\n                                                return (\r\n                                                  <Col sm={3}>\r\n                                                    <Form.Group className=\"mb-3\">\r\n                                                      <Form.Control\r\n                                                        type=\"text\"\r\n                                                        disabled={\r\n                                                          props.disabledFields[\r\n                                                            key\r\n                                                          ] !== undefined\r\n                                                            ? props\r\n                                                                .disabledFields[\r\n                                                                key\r\n                                                              ]\r\n                                                            : false\r\n                                                        }\r\n                                                        onChange={(e) => {\r\n                                                          e.preventDefault();\r\n                                                          props.handleChangesCallback(\r\n                                                            e.target.value,\r\n                                                            [\r\n                                                              key,\r\n                                                              index,\r\n                                                              k,\r\n                                                              idx,\r\n                                                              _k,\r\n                                                            ]\r\n                                                          );\r\n                                                        }}\r\n                                                        value={_v}\r\n                                                        placeholder={\r\n                                                          locale().enter +\r\n                                                          \" \" +\r\n                                                          _k\r\n                                                        }\r\n                                                      />\r\n                                                    </Form.Group>\r\n                                                  </Col>\r\n                                                );\r\n                                              })\r\n                                            )}\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"number\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col sm={3}>\r\n                                              <Form.Control\r\n                                                type=\"number\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                key={\"\" + key + index + k + idx}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    parseInt(\r\n                                                      e.target.value,\r\n                                                      10\r\n                                                    ),\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={isNaN(e) ? \"\" : e} //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"string\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col sm={3}>\r\n                                              <Form.Control\r\n                                                type=\"text\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                key={\"\" + key + index + k + idx}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    e.target.value,\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={e} //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      }\r\n                                      return \"Unknown data type\";\r\n                                    })\r\n                                  )}\r\n                                </Accordion.Body>\r\n                              </Accordion.Item>\r\n                            </Accordion>\r\n                          </Row>\r\n                        );\r\n                      }\r\n                      return \"Unknown data type\";\r\n                    })\r\n                  )}\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //object form row comopnent\r\n  const ObjectFormRow = (key) => {\r\n    return \"TODO ObjectFormRow\";\r\n  };\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Container fluid>\r\n        {\r\n          //in case of unfetched data, do nothing\r\n          props.functionalFields[props.resource] === undefined &&\r\n            \"No operation allowed\"\r\n        }\r\n        {props.functionalFields[props.resource] !== undefined &&\r\n          React.Children.toArray(\r\n            Object.entries(props.values).map(([key, value]) => {\r\n              //enum type defined by config\r\n              //check if all the required resources are defined\r\n\r\n              if (\r\n                fetchedPageTypes[props.resource] !== undefined &&\r\n                fetchedPageTypes[props.resource][key] !== undefined &&\r\n                myFetched.types !== undefined &&\r\n                myFetched.types[fetchedPageTypes[props.resource][key]] !==\r\n                  undefined\r\n              ) {\r\n                return SelectFormRow(\r\n                  key,\r\n                  myFetched.types[fetchedPageTypes[props.resource][key]]\r\n                );\r\n              }\r\n              //input field is an array\r\n              if (Array.isArray(value)) {\r\n                if (typeof value[0] === \"number\") {\r\n                  return ArrayNumberFormRow(key);\r\n                }\r\n                if (typeof value[0] === \"string\") {\r\n                  return ArrayStringFormRow(key);\r\n                }\r\n                if (value[0].constructor === Object) {\r\n                  return ArrayObjectFormRow(key);\r\n                }\r\n              }\r\n              //input field is a number\r\n              if (typeof value === \"number\") {\r\n                return NumericFormRow(key);\r\n              }\r\n              //input field for fetched data\r\n\r\n              if (\r\n                fetchedPageData[props.resource] !== undefined &&\r\n                fetchedPageData[props.resource][key] !== undefined &&\r\n                myFetched.data[fetchedPageData[props.resource][key]] !==\r\n                  undefined\r\n              ) {\r\n                return FetchedFormRow(\r\n                  key,\r\n                  fetchedPageData[props.resource][key]\r\n                );\r\n              }\r\n              //input field is a string\r\n              if (typeof value === \"string\") {\r\n                return StringFormRow(key);\r\n              }\r\n\r\n              //input field is an object\r\n              if (value.constructor === Object) {\r\n                return ObjectFormRow();\r\n              }\r\n              //default return\r\n              return \"\";\r\n            })\r\n          )}\r\n      </Container>\r\n      <Button variant=\"primary\" type=\"submit\" key={\"submit\"}>\r\n        {locale().submit}\r\n      </Button>\r\n      &nbsp;&nbsp;&nbsp;\r\n      <Button variant=\"secondary\" key={\"cancel\"} onClick={props.backFunction}>\r\n        {locale().cancel}\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n","import { isDefault, removeDefaultElements, nonDefaultLength } from \"./misc_functions\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n// this function sort keys of an object and of its array-of-objects values (recursively) based on a template\r\nexport function sortObject(obj, template) {\r\n  //sorted array of keys\r\n  const sortingKeys = Object.keys(template);\r\n  //add to the obj default values of empty fields\r\n  sortingKeys.forEach((key)=> {if(obj[key]===undefined)obj[key]=template[key]})\r\n  //keys of the object to sort  \r\n  let keys = Object.keys(obj);\r\n  //remove uncommon keys between the two arrays from the key array  \r\n  keys = keys.filter((ob) => {\r\n    return sortingKeys.indexOf(ob) !== -1;\r\n  });\r\n  //sort the keys in the key array\r\n  keys.sort((a, b) => sortingKeys.indexOf(a) - sortingKeys.indexOf(b));\r\n\r\n  const sorted = keys.reduce((accumulator, key) => {\r\n    if (\r\n      Array.isArray(obj[key]) &&\r\n      obj[key].length !== 0 &&\r\n      obj[key][0].constructor === Object\r\n    ) {\r\n      const tmp = obj[key].map((el) => {\r\n        return sortObject(el, template[key][0]);\r\n      });\r\n\r\n      accumulator[key] = tmp;\r\n    } else accumulator[key] = obj[key];\r\n\r\n    return accumulator;\r\n  }, {});\r\n  return sorted;\r\n}\r\n\r\n//this function will check of each field of the object if it's an array, and then, only for array values, check if empty elements are contained into that array\r\nexport function maintainEmptyElements(original, fieldSpecifier, resource) {\r\n  const keys = Object.keys(original);\r\n  let copy = cloneDeep(original);\r\n  for (let i = 0; i < keys.length; i++) {\r\n    if (Array.isArray(copy[keys[i]])) {\r\n      copy = maintainEmptyElement(copy, [keys[i]], fieldSpecifier, resource);\r\n    }\r\n  }\r\n  return copy;\r\n}\r\n\r\n//this function check if an array contains a default element,\r\n//a default element is added when required\r\n//this causes issue for array of boolean, since boolean has no default value is difficult to know when to add an item\r\nexport function maintainEmptyElement(\r\n  original,\r\n  path,\r\n  fieldSpecifier,\r\n  resource,\r\n  item = undefined\r\n) {\r\n  let tmp = cloneDeep(original);\r\n  let tmpPtr = tmp;\r\n  let fieldSpecifierCpy =\r\n    fieldSpecifier !== undefined\r\n      ? cloneDeep(fieldSpecifier[resource])\r\n      : undefined;\r\n  const tmpPath = [...path];\r\n  //get the appropriate array to validate\r\n  for (let i = 0; i < tmpPath.length; i++) {\r\n    if (path[i] === undefined) break;\r\n    tmpPtr = tmpPtr[path[i]];\r\n  }\r\n  const nonDefLen = nonDefaultLength(tmpPtr);\r\n  const len = tmpPtr.length;\r\n  //if at least one element is non default, can return\r\n  if (nonDefLen < len) {\r\n    return tmp;\r\n  }\r\n  //otherwise, need to get the appropriate item to append to array\r\n  let element;\r\n  //get the appropriate item, travelling the fieldSpecified (addFields or editFields) according to path\r\n  //fieldSpecifierCpy becomes undefined when the item cannot be found there\r\n  for (let i = 0; i < tmpPath.length; i++) {\r\n    //if path or fieldSpecifier becomes undefined, break\r\n    if (path[i] === undefined) break;\r\n    if (fieldSpecifierCpy === undefined) break;\r\n    //indexes of path should be treated as 0\r\n    if (typeof path[i] === \"number\") fieldSpecifierCpy = fieldSpecifierCpy[0];\r\n    else fieldSpecifierCpy = fieldSpecifierCpy[path[i]];\r\n  }\r\n  //item found in fieldSpecifierCpy exist and it's not an array return\r\n  if (fieldSpecifierCpy !== undefined && !Array.isArray(fieldSpecifierCpy))\r\n    return tmp;\r\n  //add item according to addfield/editfield dictionary\r\n  if (fieldSpecifierCpy !== undefined) {\r\n    if (fieldSpecifierCpy[0].constructor === Object) {\r\n      element = {\r\n        ...fieldSpecifierCpy[0],\r\n      };\r\n    } else {\r\n      element = \"\";\r\n    }\r\n  }\r\n  //add item according to param item\r\n  if (item !== undefined && fieldSpecifierCpy === undefined) {\r\n    if (item.constructor === Object) {\r\n      element = { ...item };\r\n    } else {\r\n      element = item;\r\n    }\r\n  }\r\n  if (element !== undefined) tmpPtr.push(element);\r\n  return tmp;\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { get_generic, put_generic } from \"../../services/http_operations\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  areEqual,\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\n\r\nimport { editFields, editFieldsSpecifier, fetchedPageData } from \"../../config\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { FormManager } from \"../formManager/formManager\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nimport { versionPages, pageActions, addFields } from \"../../config\";\r\n\r\nimport ContentTable from \"../contentTable/contentTable\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\nimport locale from \"../../common/locale\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nexport default function VersioningPage(props) {\r\n  //get resource and id from url params\r\n  const { resource, id } = useParams();\r\n\r\n  const [resourceElement, setResourceElement] = useState(undefined);\r\n  const [resourceEntity, setResourceEntity] = useState({});\r\n  const [header, setHeader] = useState(undefined);\r\n  const [actions, setActions] = useState(undefined);\r\n\r\n  const [original, setOriginal] = useState();\r\n\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  //deep copy editOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(editFields[resource]));\r\n\r\n  //keep trace of deleted elements\r\n  const [deleted, setDeleted] = useState({});\r\n\r\n  const [disabledFields, setDisabledFields] = useState(undefined);\r\n  //const [mounted, setMounted] = useState(false);\r\n\r\n  //check if is my resource\r\n  const [isNotMine, setIsNotMine] = useState(true);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  /*\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n*/\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      //console.log(data.versions);\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      // set state with the result\r\n      const headerVersion = versionPages[resource];\r\n      //console.log(headerVersion);\r\n      //console.log(resource)\r\n      setHeader(headerVersion);\r\n      setResourceElement(response.docs[0].versions);\r\n      setResourceEntity(response.docs[0]);\r\n      setIsNotMine(localStorage.getItem(\"user-role\")!==\"admin\"&&response.docs[0].owner &&\r\n        localStorage.getItem(\"userId\") !=response.docs[0].owner);\r\n      if (pageActions[resource + \"Version\"] !== undefined)\r\n        setActions(pageActions[resource + \"Version\"]);\r\n\r\n      //this function evaluate if a field should be disabled or not\r\n      const evaluateSpecifiers = async () => {\r\n        if (editFieldsSpecifier[resource] === undefined) {\r\n          setDisabledFields({});\r\n\r\n          const keys = Object.keys(tmpValues);\r\n          for (let i = 0; i < keys.length; i++) {\r\n            const _key = keys[i];\r\n\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n\r\n          setValues(tmpValues);\r\n          //deep copy and set state\r\n          setOriginal(cloneDeep(tmpValues));\r\n          return;\r\n        }\r\n\r\n        let disabled = {};\r\n        if (disabledFields !== undefined) disabled = disabledFields;\r\n\r\n        const specsEntries = Object.entries(editFieldsSpecifier[resource]);\r\n\r\n        for (let i = 0; i < specsEntries.length; i++) {\r\n          const key = specsEntries[i][0]; //key\r\n          const value = specsEntries[i][1]; //value\r\n\r\n          if (tmpValues[key] === undefined) continue;\r\n\r\n          if (value.type === \"disable\") {\r\n            const resp = await value.policy(id);\r\n\r\n            disabled[key] = resp;\r\n          }\r\n        }\r\n\r\n        const keys = Object.keys(tmpValues);\r\n        for (let i = 0; i < keys.length; i++) {\r\n          const _key = keys[i];\r\n\r\n          if (disabled[_key] === undefined || disabled[_key] === false) {\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n        }\r\n\r\n        setDisabledFields(disabled);\r\n\r\n        setValues(tmpValues);\r\n        //deep copy and set state\r\n        setOriginal(cloneDeep(tmpValues));\r\n      };\r\n\r\n      evaluateSpecifiers();\r\n    };\r\n\r\n    const fst = { _id: id };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, []);\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        editFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      editFields,\r\n      resource,\r\n      item\r\n    );\r\n\r\n    //save removed element into appropriate structure\r\n    //do this only when array is on first layer of object\r\n    if (i === 1) {\r\n      if (deleted[path[0]] === undefined)\r\n        deleted[path[0]] = { indexes: [], elements: [], minDel: Infinity };\r\n\r\n      //ignore default\r\n      if (!isDefault(removed[0])) {\r\n        //save element (maybe not required anymore)\r\n        deleted[path[0]].elements.push(removed[0]);\r\n        //save index of deletion (considering the original ones)\r\n\r\n        deleted[path[0]].indexes.push(\r\n          path[i] >= deleted[path[0]].minDel\r\n            ? path[i] +\r\n                deleted[[path[0]]].indexes.filter((e) => e >= path[i]).length\r\n            : path[i]\r\n        );\r\n\r\n        if (path[i] < deleted[path[0]].minDel)\r\n          deleted[path[0]].minDel = path[i];\r\n      }\r\n    }\r\n\r\n    setValues(val);\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(\"/\" + resource);\r\n  };\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    //da fare\r\n    let tmpValues = cloneDeep(values);\r\n    let tmpOrig = cloneDeep(original);\r\n    removeDefaultElements(tmpValues);\r\n    removeDefaultElements(tmpOrig);\r\n    let toSend = {};\r\n\r\n    const entr = Object.entries(tmpValues);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      const k = entr[i][0];\r\n      const v = entr[i][1];\r\n\r\n      //value is array\r\n      if (Array.isArray(v)) {\r\n        //prepare add/update/remove elements\r\n        if (toSend[k] === undefined)\r\n          toSend[k] = { add: [], remove: [], update: [] };\r\n\r\n        //get original length of that array\r\n        const origArr = [...tmpOrig[k]];\r\n        //add removed elements (from original elements)\r\n        if (deleted[k] !== undefined) {\r\n          for (let i = 0; i < deleted[k].indexes.length; i++) {\r\n            const removed = origArr.splice(deleted[k].indexes[i][0], 1)[0];\r\n            if (removed.constructor === Object) {\r\n              const key = Object.keys(removed)[0];\r\n              toSend[k].remove.push(removed[key]);\r\n            } else {\r\n              toSend[k].remove.push(removed);\r\n            }\r\n          }\r\n        }\r\n        //check other elements\r\n        for (let j = 0; j < tmpValues[k].length; j++) {\r\n          if (j < origArr.length && !areEqual(tmpValues[k][j], origArr[j])) {\r\n            //update management\r\n\r\n            //object case\r\n            if (tmpValues[k][j].constructor === Object) {\r\n              const key = Object.keys(origArr[j])[0];\r\n              toSend[k].update.push({\r\n                [key]: origArr[j][key],\r\n                new: tmpValues[k][j],\r\n              });\r\n            }\r\n            //non object case (i.e., strings)\r\n            else {\r\n              //remove the old value and add the new one\r\n              toSend[k].add.push(tmpValues[k][j]);\r\n              toSend[k].remove.push(origArr[j]);\r\n            }\r\n          }\r\n          if (j >= origArr.length) toSend[k].add.push(tmpValues[k][j]);\r\n        }\r\n        if (areEqual(toSend[k], { add: [], remove: [], update: [] }))\r\n          delete toSend[k];\r\n      }\r\n      //value is obj\r\n      else if (v.constructor === Object) {\r\n        //compare both obj\r\n      }\r\n      //single valued prop\r\n      else {\r\n        //update when values are different\r\n        if (v !== original[k]) toSend[k] = v;\r\n      }\r\n    }\r\n\r\n    //end da fare\r\n\r\n    let res;\r\n    try {\r\n      const resp = await put_generic(resource, toSend, id);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n      navigate(\"/\" + resource);\r\n    } catch (error) {\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n  };\r\n\r\n  const takeSingle = (id) => {\r\n    return resourceElement.find((r) => r.ordinal === id);\r\n  };\r\n\r\n  const removeSingle = (id) => {\r\n    let tmp = resourceElement.filter((el) => {\r\n      return el.ordinal !== id;\r\n    });\r\n    setResourceElement(tmp);\r\n  };\r\n\r\n  const downloadSingle = async (identifier) => {\r\n    try {\r\n      const route = resource + \"/\" + id + \"/versions/\" + identifier;\r\n      const resp = await get_generic(\r\n        route,\r\n        {},\r\n        { responseType: \"arraybuffer\" }\r\n      );\r\n      //console.log(JSON.stringify(resp.response.data))\r\n      //console.log(resp)\r\n      //console.log(resp.response.data)\r\n\r\n      const filename = resourceElement.find(\r\n        (r) => r.ordinal === identifier\r\n      ).original;\r\n      const mimetype = resourceElement.find(\r\n        (r) => r.ordinal === identifier\r\n      ).mimetype;\r\n      const blob = new Blob([resp.response.data], { type: mimetype });\r\n      saveAs(blob, filename);\r\n      //res = resp.response;\r\n      //setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n\r\n      //res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Version of&nbsp;{resource.slice(0, -1)}&nbsp;\r\n        {resourceEntity.name !== undefined ? <b>{resourceEntity.name}</b> : \"\"}\r\n        &nbsp;(id:&nbsp;{id})\r\n        {addFields[\"versions\"] !== undefined && (\r\n          <NavLink\r\n            to={isNotMine?\"\":`/add/versions/` + resource + \"/\" + id}\r\n            key={resource + \"_versions_add_navlink\"}\r\n          >\r\n            <Button\r\n              variant={isNotMine ? \"outline-secondary\" : \"link\"}\r\n              size=\"sm\"\r\n              style={{ backgroundColor: \"transparent\", border: 0 + \"px\" }}\r\n              key={resource + \"button\"}\r\n              title={isNotMine? \"You cannot add versions to resources that are not yours\": \"Add\"}\r\n            >\r\n              <i\r\n                key={resource + \"icon\"}\r\n                className=\"fa fa-plus-circle\"\r\n                aria-hidden=\"true\"                \r\n                style={{\r\n                  width: 30 + \"px\",\r\n                  height: 30 + \"px\",\r\n                  marginRight: 10 + \"px\",\r\n                  opacity: 0.85,\r\n                }}\r\n              ></i>\r\n            </Button>\r\n          </NavLink>\r\n        )}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <div style={{ paddingBottom: 10 + \"px\" }}>\r\n          <Button variant=\"outline-primary\" onClick={back}>\r\n            Back to {resource}\r\n          </Button>\r\n        </div>\r\n        <ContentTable\r\n          resType={resource}\r\n          header={header}\r\n          resources={resourceElement}\r\n          actions={actions}\r\n          takeSingle={takeSingle}\r\n          removeSingle={removeSingle}\r\n          downloadSingle={downloadSingle}\r\n          idResource={id}\r\n          isNotMine={isNotMine}\r\n        />\r\n        {\r\n          //<RenderPagination />\r\n        }\r\n      </main>\r\n      {/*\r\n      <main className=\"page-content\">\r\n        <FormManager\r\n          values={values}\r\n          resource={resource}\r\n          functionalFields={editFields}\r\n          disabledFields={disabledFields}\r\n          handleChangesCallback={handleChanges}\r\n          arrayDeleteCallback={handleDeleteItemArray}\r\n          submitFunction={submit}\r\n          backFunction={back}\r\n        />\r\n        <br />\r\n        <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n      </main>\r\n  */}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { get_generic, put_generic } from \"../../services/http_operations\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  areEqual,\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\n\r\nimport locale from \"../../common/locale\";\r\n\r\nimport {\r\n  editFields,\r\n  editFieldsSpecifier,\r\n  fetchedPageData,\r\n  fetchedPageTypes,\r\n} from \"../../config\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { FormManager } from \"../formManager/formManager\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nexport default function EditContentPage(props) {\r\n  //get resource and id from url params\r\n  const { resource, id } = useParams();\r\n\r\n  const [original, setOriginal] = useState();\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  //deep copy editOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(editFields[resource]));\r\n\r\n  //keep trace of deleted elements\r\n  const [deleted, setDeleted] = useState({});\r\n\r\n  const [disabledFields, setDisabledFields] = useState(undefined);\r\n  //const [mounted, setMounted] = useState(false);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => {\r\n          return {\r\n            _id: e._id,\r\n            optionalLabel:\r\n              e.name !== undefined\r\n                ? e.name\r\n                : e.username !== undefined\r\n                ? e.username\r\n                : undefined,\r\n          };\r\n        }),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n      tmpValues = sortObject(data, tmpValues);\r\n      if (\r\n        data[\"datasets\"] !== undefined &&\r\n        (resource === \"models\" || resource === \"algorithms\")\r\n      )\r\n        tmpValues[\"datasets\"] = data[\"datasets\"].map((el) => el._id);\r\n\r\n      if (\r\n        data[\"users\"] !== undefined &&\r\n        (resource === \"models\" ||\r\n          resource === \"algorithms\" ||\r\n          resource === \"datasets\")\r\n      )\r\n        tmpValues[\"users\"] = data[\"users\"].map((el) => el._id);\r\n      //this function evaluate if a field should be disabled or not\r\n      const evaluateSpecifiers = async () => {\r\n        if (editFieldsSpecifier[resource] === undefined) {\r\n          setDisabledFields({});\r\n          const keys = Object.keys(tmpValues);\r\n          for (let i = 0; i < keys.length; i++) {\r\n            const _key = keys[i];\r\n\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n          setValues(tmpValues);\r\n          //deep copy and set state\r\n          setOriginal(cloneDeep(tmpValues));\r\n          return;\r\n        }\r\n\r\n        let disabled = {};\r\n        if (disabledFields !== undefined) disabled = disabledFields;\r\n\r\n        const specsEntries = Object.entries(editFieldsSpecifier[resource]);\r\n\r\n        for (let i = 0; i < specsEntries.length; i++) {\r\n          const key = specsEntries[i][0]; //key\r\n          const value = specsEntries[i][1]; //value\r\n\r\n          if (tmpValues[key] === undefined) continue;\r\n\r\n          if (value.type === \"disable\") {\r\n            const resp = await value.policy(id);\r\n\r\n            disabled[key] = resp;\r\n          }\r\n        }\r\n\r\n        const keys = Object.keys(tmpValues);\r\n        for (let i = 0; i < keys.length; i++) {\r\n          const _key = keys[i];\r\n\r\n          if (disabled[_key] === undefined || disabled[_key] === false) {\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n        }\r\n\r\n        setDisabledFields(disabled);\r\n\r\n        setValues(tmpValues);\r\n        //deep copy and set state\r\n        setOriginal(cloneDeep(tmpValues));\r\n      };\r\n\r\n      evaluateSpecifiers();\r\n    };\r\n\r\n    const fst = { _id: id };\r\n    const qs = { filter: JSON.stringify(fst), select:[\"_id\",\"name\",\"username\"] };\r\n    fetchData(qs);\r\n  }, []);\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        editFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      editFields,\r\n      resource,\r\n      item\r\n    );\r\n\r\n    //save removed element into appropriate structure\r\n    //do this only when array is on first layer of object\r\n    if (i === 1) {\r\n      if (deleted[path[0]] === undefined)\r\n        deleted[path[0]] = { indexes: [], elements: [], minDel: Infinity };\r\n\r\n      //ignore default\r\n      if (!isDefault(removed[0])) {\r\n        //save element (maybe not required anymore)\r\n        deleted[path[0]].elements.push(removed[0]);\r\n        //save index of deletion (considering the original ones)\r\n\r\n        deleted[path[0]].indexes.push(\r\n          path[i] >= deleted[path[0]].minDel\r\n            ? path[i] +\r\n                deleted[[path[0]]].indexes.filter((e) => e >= path[i]).length\r\n            : path[i]\r\n        );\r\n\r\n        if (path[i] < deleted[path[0]].minDel)\r\n          deleted[path[0]].minDel = path[i];\r\n      }\r\n    }\r\n\r\n    setValues(val);\r\n  };\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    //da fare\r\n    let tmpValues = cloneDeep(values);\r\n    let tmpOrig = cloneDeep(original);\r\n    removeDefaultElements(tmpValues);\r\n    removeDefaultElements(tmpOrig);\r\n    let toSend = {};\r\n\r\n    const entr = Object.entries(tmpValues);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      const k = entr[i][0];\r\n      const v = entr[i][1];\r\n\r\n      //value is array\r\n      if (Array.isArray(v)) {\r\n        //prepare add/update/remove elements\r\n        if (toSend[k] === undefined)\r\n          toSend[k] = { add: [], remove: [], update: [] };\r\n\r\n        //get original length of that array\r\n        const origArr = [...tmpOrig[k]];\r\n        //add removed elements (from original elements)\r\n        if (deleted[k] !== undefined) {\r\n          for (let i = 0; i < deleted[k].indexes.length; i++) {\r\n            const removed = origArr.splice(deleted[k].indexes[i][0], 1)[0];\r\n            if (removed.constructor === Object) {\r\n              const key = Object.keys(removed)[0];\r\n              toSend[k].remove.push(removed[key]);\r\n            } else {\r\n              toSend[k].remove.push(removed);\r\n            }\r\n          }\r\n        }\r\n        //check other elements\r\n        for (let j = 0; j < tmpValues[k].length; j++) {\r\n          if (j < origArr.length && !areEqual(tmpValues[k][j], origArr[j])) {\r\n            //update management\r\n\r\n            //object case\r\n            if (tmpValues[k][j].constructor === Object) {\r\n              const key = Object.keys(origArr[j])[0];\r\n              toSend[k].update.push({\r\n                [key]: origArr[j][key],\r\n                new: tmpValues[k][j],\r\n              });\r\n            }\r\n            //non object case (i.e., strings)\r\n            else {\r\n              //remove the old value and add the new one\r\n              toSend[k].add.push(tmpValues[k][j]);\r\n              toSend[k].remove.push(origArr[j]);\r\n            }\r\n          }\r\n          if (j >= origArr.length) toSend[k].add.push(tmpValues[k][j]);\r\n        }\r\n        if (areEqual(toSend[k], { add: [], remove: [], update: [] }))\r\n          delete toSend[k];\r\n      }\r\n      //value is obj\r\n      else if (v.constructor === Object) {\r\n        //compare both obj\r\n      }\r\n      //single valued prop\r\n      else {\r\n        //update when values are different\r\n        if (v !== original[k]) toSend[k] = v;\r\n      }\r\n    }\r\n\r\n    //end da fare\r\n\r\n    const k = Object.keys(tmpValues);\r\n    const missingValues = [];\r\n\r\n    // key[0] is usually the _id or username or name, so it shouldn't be undefined\r\n    // may be unstable\r\n    if (tmpValues[k[0]] === \"\") {\r\n      missingValues.push(k[0]);\r\n    }\r\n    //check if enums fetched from server are not empty\r\n    k.forEach((key) => {\r\n      if (\r\n        (fetchedPageTypes[resource] !== undefined &&\r\n          fetchedPageTypes[resource][key] !== undefined &&\r\n          (tmpValues[key] === \"\" || tmpValues[key] === \"Select \" + key)) ||\r\n        ((key === \"email\" || key === \"password\") && tmpValues[key] === \"\")\r\n      ) {\r\n        missingValues.push(key);\r\n      }\r\n    });\r\n\r\n    if (missingValues.length !== 0) {\r\n      setIsError(true);\r\n      setMsg(locale().define + missingValues.join(\", \"));\r\n      return;\r\n    }\r\n    if (!Object.keys(toSend).length){\r\n      setIsError(true);\r\n      setMsg(locale().no_changes);\r\n      return;\r\n    }\r\n    \r\n    let res;\r\n    try {\r\n      const resp = await put_generic(resource, toSend, id);\r\n      res = resp.response;\r\n      setIsError(false);\r\n      setMsg(res.statusText);\r\n      navigate(\"/\" + resource);\r\n    } catch (error) {\r\n      res = error.error.response;\r\n      //add details\r\n      setIsError(true);\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Edit &nbsp;<b>{resource}</b>&nbsp;of id:&nbsp;<b>{id}</b>&nbsp;\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <FormManager\r\n          values={values}\r\n          resource={resource}\r\n          functionalFields={editFields}\r\n          disabledFields={disabledFields}\r\n          handleChangesCallback={handleChanges}\r\n          arrayDeleteCallback={handleDeleteItemArray}\r\n          submitFunction={submit}\r\n          backFunction={back}\r\n        />\r\n        <br />\r\n        <font\r\n          style={{ marginLeft: 5 + \"px\", color: isError ? \"red\" : \"black\" }}\r\n        >\r\n          {msg}\r\n        </font>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { Button, Form, Accordion, Table } from \"react-bootstrap\";\r\n\r\nexport const FormFile = (props) => {\r\n  //return \"loading\" if something is undefined\r\n  /*console.log({\r\n    submit: props.submitFunction,\r\n    back: props.backFunction,\r\n    setContHead: props.setContentHeader,\r\n    setContBdy: props.setContentBody,\r\n    setContPln: props.setContentPlain,\r\n    setFl: props.setFile,\r\n    contBod: props.contentBody,\r\n    contPln: props.contentPlain,\r\n    contHdr: props.contentHeader,\r\n  });*/\r\n  if (\r\n    props.submitFunction === undefined ||\r\n    props.backFunction === undefined ||\r\n    props.setContentHeader === undefined ||\r\n    props.setContentPlain === undefined ||\r\n    props.setContentBody === undefined ||\r\n    props.setFile === undefined ||\r\n    props.contentBody === undefined ||\r\n    props.contentPlain === undefined ||\r\n    props.contentHeader === undefined\r\n  )\r\n    return \"Loading\";\r\n\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Form.Label>\r\n        <b>{locale().select_file}</b>\r\n      </Form.Label>\r\n      <Form.Control\r\n        className=\"mb-3\"\r\n        type=\"file\"\r\n        accept={props.filePickerExtensions !== undefined ? \"\" : \" .json\"}\r\n        label=\"File\"\r\n        onChange={(e) => {\r\n          const file = e.target.files[0];\r\n          props.setFile(file);\r\n          const fileReader = new FileReader();\r\n\r\n          fileReader.onloadend = () => {\r\n            const content = fileReader.result;\r\n            if (file.name.endsWith(\".csv\")) {\r\n              //not used csv\r\n              const regex = new RegExp(\"\\\\r\", \"g\");\r\n              let splitted = content.replace(regex, \"\").split(\"\\n\");\r\n\r\n              props.setContentHeader(splitted[0]);\r\n              splitted.splice(0, 1);\r\n              props.setContentBody(splitted);\r\n            }\r\n            if (file.name.endsWith(\".json\")) {\r\n              const content = JSON.stringify(\r\n                JSON.parse(fileReader.result),\r\n                null,\r\n                4\r\n              );              \r\n              props.setContentPlain(content);\r\n            }\r\n          };\r\n          fileReader.readAsText(file);\r\n        }}\r\n      />\r\n      {props.contentBody !== null && props.contentHeader !== null && (\r\n        <Accordion>\r\n          <Accordion.Item eventKey=\"0\">\r\n            <Accordion.Header>{locale().file_content}</Accordion.Header>\r\n            <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n              <Table responsive striped bordered hover>\r\n                <thead>\r\n                  <tr>\r\n                    {React.Children.toArray(\r\n                      props.contentHeader.split(\",\").map((h) => {\r\n                        return <th>{h}</th>;\r\n                      })\r\n                    )}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {React.Children.toArray(\r\n                    props.contentBody.map((e) => {\r\n                      return (\r\n                        <tr>\r\n                          {React.Children.toArray(\r\n                            e.split(\",\").map((h) => {\r\n                              return <td>{h}</td>;\r\n                            })\r\n                          )}\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  )}\r\n                </tbody>\r\n              </Table>\r\n            </Accordion.Body>\r\n          </Accordion.Item>\r\n        </Accordion>\r\n      )}\r\n      {props.contentPlain !== null && (\r\n        <Accordion>\r\n          <Accordion.Item eventKey=\"0\">\r\n            <Accordion.Header>{locale().file_content}</Accordion.Header>\r\n            <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n              <textarea\r\n                style={{ resize: \"both\" }}\r\n                cols=\"120\"\r\n                rows=\"10\"\r\n                readOnly\r\n                value={props.contentPlain}\r\n              ></textarea>\r\n            </Accordion.Body>\r\n          </Accordion.Item>\r\n        </Accordion>\r\n      )}\r\n      <Button variant=\"primary\" type=\"submit\" key={\"submit\"}>\r\n        {locale().submit}\r\n      </Button>\r\n      &nbsp;&nbsp;&nbsp;\r\n      <Button variant=\"secondary\" key={\"cancel\"} onClick={props.backFunction}>\r\n        {locale().cancel}\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../config\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddPage(props) {\r\n  //get resource and id from url params\r\n  let { resource } = useParams();\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //check if resource was passed as params - used for tenants creation\r\n  if (props.resource !== undefined) resource = props.resource;\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n  //deep copy addOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => {\r\n          return {\r\n            _id: e._id,\r\n            optionalLabel:\r\n              e.name !== undefined\r\n                ? e.name\r\n                : e.username !== undefined\r\n                ? e.username\r\n                : undefined,\r\n          };\r\n        }),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      tmpValues = maintainEmptyElements(tmpValues, addFields, resource);\r\n      setValues(tmpValues);\r\n    };\r\n\r\n    if (searchParams.get(\"from\") === null || searchParams.get(\"from\") === \"\")\r\n      return;\r\n    const fst = { _id: searchParams.get(\"from\") };\r\n    const qs = { filter: JSON.stringify(fst), select:[\"_id\",\"name\",\"username\"] };\r\n    fetchData(qs);\r\n  }, [searchParams, resource]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    valuesPtr[path[i]] = val;\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n\r\n    if (lastIndexNumber !== -1)\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource\r\n      );\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    tmpPtr.splice(path[i], 1);\r\n\r\n    val = maintainEmptyElement(val, path.slice(0, i), addFields, resource);\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => {\r\n    setIsError(false);\r\n    setMsg(\"\");\r\n    setPostType(eventKey);\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n\r\n    const k = Object.keys(tmpValues);\r\n    const missingValues = [];\r\n\r\n    // key[0] is usually the _id or username or name, so it shouldn't be undefined\r\n    // may be unstable\r\n    if (tmpValues[k[0]] === \"\") {\r\n      missingValues.push(k[0]);\r\n    }\r\n    console.log({ tmpValues, k });\r\n    //check if enums fetched from server are not empty\r\n    k.forEach((key) => {\r\n      if (\r\n        (fetchedPageTypes[resource] !== undefined &&\r\n          fetchedPageTypes[resource][key] !== undefined &&\r\n          (tmpValues[key] === \"\" || tmpValues[key] === \"Select \" + key)) ||\r\n        ((key === \"email\" || key === \"password\") && tmpValues[key] === \"\")\r\n      ) {\r\n        missingValues.push(key);\r\n      }\r\n    });\r\n\r\n    if (missingValues.length !== 0) {\r\n      setIsError(true);\r\n      setMsg(locale().define + missingValues.join(\", \"));\r\n      return;\r\n    }\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setIsError(false);\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setIsError(true);\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      myFetched.RemoveData(resource);\r\n      window.alert(resource+\" uploaded successfully\");\r\n      navigate(\"/\" + resource);      \r\n    }\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file === undefined) {\r\n      setMsg(locale().no_file);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource&nbsp;\r\n        <b>{resource.slice(0, -1)}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={{}}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n              />\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Form, Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddExperimentPage(props) {\r\n  //get resource and id from url params\r\n  const resource = \"experiments\";\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //values\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n  //disabled\r\n  const [disabledFields, setDisabledFields] = useState({});\r\n\r\n  //protocols\r\n  const [protocols, setProtocols] = useState();\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the protocols data from the api\r\n      const response = await get_generic(\"protocols\", qs);\r\n\r\n      setProtocols(response.docs.map((e) => e._id));\r\n    };\r\n    const qs = { limit: 100 };\r\n    fetchData(qs);\r\n  }, [props, searchParams]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      addFields,\r\n      resource,\r\n      item\r\n    );\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  //handle changes to selected protocols\r\n  const handleProtocolChange = async (e) => {\r\n    e.preventDefault();\r\n    const selectedProtocol = e.target.value;\r\n    const fst = { _id: e.target.value };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    const res = await get_generic(\"protocols\", qs);\r\n    const protocol = res.docs[0];\r\n\r\n    const metadata = [];\r\n    for (let i = 0; i < protocol.metadata.length; i++) {\r\n      if (protocol.metadata[i].type === \"scalar\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: NaN,\r\n        });\r\n      }\r\n      if (protocol.metadata[i].type === \"text\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: \"\",\r\n        });\r\n      }\r\n      if (protocol.metadata[i].type === \"vector\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: [NaN],\r\n        });\r\n      }\r\n    }\r\n\r\n    const tmpValues = cloneDeep(values);\r\n    tmpValues[\"protocol\"] = selectedProtocol;\r\n    if (metadata.length !== 0) tmpValues[\"metadata\"] = metadata;\r\n\r\n    const tmpDisabled = cloneDeep(disabledFields);\r\n    tmpDisabled[\"protocol\"] = true;\r\n\r\n    setDisabledFields(tmpDisabled);\r\n    //setProtocol(selectedProtocol);\r\n    setValues(tmpValues);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && protocols !== undefined && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <Form.Select\r\n                aria-label={locale().select + \" protocol\"}\r\n                onChange={handleProtocolChange}\r\n              >\r\n                <option>{locale().select} protocol</option>\r\n                {React.Children.toArray(\r\n                  protocols.map((e) => {\r\n                    return <option value={e}>{e}</option>;\r\n                  })\r\n                )}\r\n              </Form.Select>\r\n              <br />\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={disabledFields}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n              />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_version_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../config\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddVersionsPage(props) {\r\n  //get resource and id from url params\r\n  let { type, resource, id } = useParams();\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //info about entity\r\n  const [resourceEntity, setResourceEntity] = useState({});\r\n\r\n  //check if resource was passed as params - used for tenants creation\r\n  if (props.resource !== undefined) resource = props.resource;\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(addTypes[type][0]);\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");  \r\n  const [isError, setIsError] = useState(false);\r\n  //deep copy addOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(addFields[type]));\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      setResourceEntity(response.docs[0]);\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      tmpValues = maintainEmptyElements(tmpValues, addFields, resource);\r\n      setValues(tmpValues);\r\n    };\r\n\r\n    const fst = { _id: id };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, [resource]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    valuesPtr[path[i]] = val;\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n\r\n    if (lastIndexNumber !== -1)\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource\r\n      );\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    tmpPtr.splice(path[i], 1);\r\n\r\n    val = maintainEmptyElement(val, path.slice(0, i), addFields, resource);\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => {setIsError(false);setMsg(\"\");setPostType(eventKey)};\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setIsError(true);\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      setIsError(false);\r\n      window.alert(\"Version uploaded successfully\");\r\n      navigate(\"/\" + type + \"/\" + resource + \"/\" + id);\r\n    }\r\n  };\r\n\r\n  const postVersionFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file === undefined) {\r\n      setMsg(locale().no_file);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n\r\n    try {\r\n      const resp = await post_version_file_generic(resource, id, formData);\r\n      res = resp.response;\r\n      setIsError(false);\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n\r\n      res = error.error.response;\r\n      //add details\r\n      setIsError(true);\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n    /*\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }*/\r\n\r\n    if (res.status === 200) {\r\n      window.alert(\"Version uploaded successfully\");\r\n      navigate(\"/\" + type + \"/\" + resource + \"/\" + id);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add version of&nbsp;\r\n        {resource.slice(0, -1)}\r\n        :&nbsp;\r\n        {resourceEntity.name !== undefined ? <b>{resourceEntity.name}</b> : \"\"}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey={addTypes[type][0]}\r\n        >\r\n          {addTypes[type].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[type].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={{}}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n              <font style={{ marginLeft: 5 + \"px\" ,color: isError ? \"red\" : \"black\"}}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postVersionFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n                filePickerExtensions={\"\"}\r\n              />\r\n              <font style={{ marginLeft: 5 + \"px\" ,color: isError ? \"red\" : \"black\"}}>{msg}</font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport {\r\n  Form,\r\n  Nav,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Accordion,\r\n} from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageData } from \"../../config\";\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddMeasurementsPage(props) {\r\n  //get resource and id from url params\r\n  const resource = \"measurements\";\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [samples, setSamples] = useState([]);\r\n  const [items, setItems] = useState([]);\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //formValues\r\n  const [formValues, setFormValues] = useState(cloneDeep(addFields[resource]));\r\n  //disabled\r\n  const [disabledFields, setDisabledFields] = useState({});\r\n\r\n  //protocols\r\n  const [features, setFeatures] = useState();\r\n  const [feature, setFeature] = useState(\"\");\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the protocols data from the api\r\n      try {\r\n        const response = await get_generic(\"features\", qs);\r\n\r\n        setFeatures(response.docs.map((e) => e._id));\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    const qs = { limit: 100 };\r\n    fetchData(qs);\r\n  }, [props, searchParams]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(formValues);\r\n    let formValuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      formValuesPtr = formValuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    formValuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n    setFormValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(formValues);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      addFields,\r\n      resource,\r\n      item\r\n    );\r\n    setFormValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  //handle changes to selected feature\r\n  const handleFeatureChange = async (e) => {\r\n    e.preventDefault();\r\n    const selectedFeature = e.target.value;\r\n    const fst = { _id: selectedFeature };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    const res = await get_generic(\"features\", qs);\r\n    const feature = res.docs[0];\r\n\r\n    const items = feature.items;\r\n\r\n    const samples = [];\r\n    const tmp = addSample(samples, items);\r\n    setSamples(tmp);\r\n    setItems(items);\r\n    setFeature(selectedFeature);\r\n    return;\r\n  };\r\n\r\n  const addSample = (samples, items) => {\r\n    const values = [];\r\n    const tmpSample = cloneDeep(samples);\r\n    items.forEach((item) => {\r\n      if (item.type === \"number\") {\r\n        if (item.dimension === 0)\r\n          values.push({ name: item.name, value: NaN, type: item.type });\r\n        else values.push([{ name: item.name, value: NaN, type: item.type }]);\r\n      } else if (item.type === \"text\") {\r\n        if (item.dimension === 0)\r\n          values.push({ name: item.name, value: \"\", type: item.type });\r\n        else values.push([{ name: item.name, value: \"\", type: item.type }]);\r\n      } else if (item.type === \"enum\") {\r\n        if (item.dimension === 0)\r\n          values.push({\r\n            name: item.name,\r\n            value: \"\",\r\n            enumValues: item.range,\r\n            type: item.type,\r\n          });\r\n        else\r\n          values.push([\r\n            {\r\n              name: item.name,\r\n              value: \"\",\r\n              enumValues: item.range,\r\n              type: item.type,\r\n            },\r\n          ]);\r\n      }\r\n    });\r\n    tmpSample.push({ values: values });\r\n    return tmpSample;\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone formValues\r\n    let token = undefined;\r\n    let body = cloneDeep(formValues);\r\n    console.log(samples);\r\n    let tmpSamples = samples.map((sample) => {\r\n      return { values: sample.values.map((v) => v.value) };\r\n    });\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n    removeDefaultElements(body);\r\n    body[\"feature\"] = feature;\r\n    body[\"samples\"] = tmpSamples;\r\n    //let tmpformValues = cloneDeep(body);\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(resource, JSON.stringify(body), token);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && features !== undefined && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <Form.Select\r\n                aria-label={locale().select + \" feature\"}\r\n                onChange={handleFeatureChange}\r\n                value={feature}\r\n              >\r\n                <option>{locale().select} feature</option>\r\n                {React.Children.toArray(\r\n                  features.map((e) => {\r\n                    return <option value={e}>{e}</option>;\r\n                  })\r\n                )}\r\n              </Form.Select>\r\n              <hr />\r\n              <Container fluid>\r\n                <Row>\r\n                  <b>Samples :{samples.length}</b>\r\n                </Row>\r\n                <br />\r\n                {React.Children.toArray(\r\n                  samples.map((sample, i) => {\r\n                    return (\r\n                      <Row\r\n                        style={{\r\n                          padding: 10,\r\n                        }}\r\n                      >\r\n                        <Accordion defaultActiveKey=\"0\">\r\n                          <Accordion.Item eventKey={i}>\r\n                            <Accordion.Header>\r\n                              <b>\r\n                                <i>Sample [{i}]</i>\r\n                              </b>\r\n                            </Accordion.Header>\r\n                            <Accordion.Body>\r\n                              {React.Children.toArray(\r\n                                Object.values(sample.values).map((entr) => {\r\n                                  return (\r\n                                    <Row\r\n                                      style={{\r\n                                        borderBottomStyle: \"solid\",\r\n                                        borderBottomWidth: 1 + \"px\",\r\n                                        marginBottom: 5 + \"px\",\r\n                                        padding: 10,\r\n                                      }}\r\n                                    >\r\n                                      <Col\r\n                                        sm={2}\r\n                                        style={{\r\n                                          borderRightStyle: \"dotted\",\r\n                                          borderRightWidth: 1 + \"px\",\r\n                                        }}\r\n                                      >\r\n                                        <b>\r\n                                          <i>{entr.name}</i>\r\n                                        </b>\r\n                                      </Col>\r\n                                      <Col sm={2}>\r\n                                        {entr.type === \"enum\" ? (\r\n                                          <Form.Select\r\n                                            aria-label={\r\n                                              locale().select + \" \" + entr.name\r\n                                            }\r\n                                            //value={entr.value}\r\n                                            onChange={(e) => {\r\n                                              e.preventDefault();\r\n                                              entr.value = e.target.value;\r\n                                            }}\r\n                                          >\r\n                                            <option value=\"\">\r\n                                              {locale().select +\r\n                                                \" \" +\r\n                                                entr.name}\r\n                                            </option>\r\n                                            {React.Children.toArray(\r\n                                              entr.enumValues.map((e) => {\r\n                                                return (\r\n                                                  <option value={e}>{e}</option>\r\n                                                );\r\n                                              })\r\n                                            )}\r\n                                          </Form.Select>\r\n                                        ) : entr.type === \"text\" ? (\r\n                                          <Form.Control\r\n                                            type=\"text\"\r\n                                            //value={entr.value}\r\n                                            id={entr.name}\r\n                                            onChange={(e) => {\r\n                                              e.preventDefault();\r\n                                              entr.value = e.target.value;\r\n                                            }}\r\n                                            aria-label={\r\n                                              locale().enter + \" \" + entr.name\r\n                                            }\r\n                                          />\r\n                                        ) : (\r\n                                          <Form.Control\r\n                                            type=\"number\"\r\n                                            id={entr.name}\r\n                                            //value={isNaN(entr.value) ? \"\" : entr.value}\r\n                                            onChange={(e) => {\r\n                                              e.preventDefault();\r\n                                              entr.value = parseInt(\r\n                                                e.target.value,\r\n                                                10\r\n                                              );\r\n                                            }}\r\n                                            aria-label={\r\n                                              locale().enter + \" \" + entr.name\r\n                                            }\r\n                                          />\r\n                                        )}\r\n                                      </Col>\r\n                                    </Row>\r\n                                  );\r\n                                })\r\n                              )}\r\n                            </Accordion.Body>\r\n                          </Accordion.Item>\r\n                        </Accordion>\r\n                      </Row>\r\n                    );\r\n                  })\r\n                )}\r\n                {samples.length !== 0 && (\r\n                  <Button\r\n                    variant=\"link\"\r\n                    onClick={() => {\r\n                      const sampl = addSample(samples, items);\r\n                      setSamples(sampl);\r\n                    }}\r\n                  >\r\n                    <i\r\n                      className=\"fa fa-plus-circle\"\r\n                      aria-hidden=\"true\"\r\n                      title={\"Add sample\"}\r\n                      style={{\r\n                        width: 30 + \"px\",\r\n                        height: 30 + \"px\",\r\n                        marginRight: 10 + \"px\",\r\n                        opacity: 0.85,\r\n                      }}\r\n                    ></i>\r\n                  </Button>\r\n                )}\r\n              </Container>\r\n              <hr />\r\n              <br />\r\n              <FormManager\r\n                values={formValues}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={disabledFields}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n              />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { requestPasswordReset } from \"../../services/http_operations\";\r\nimport { languages } from \"../../config\";\r\nimport \"../authPage/authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport LogoHolder from \"../logoHolder/logoHolder\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst emailRef = React.createRef();\r\nconst tenantRef = React.createRef();\r\n\r\nexport default function PasswordRecoveryPage() {\r\n  //const { location, replace } = useHistory();\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    const email = emailRef.current.value;\r\n    const tenant = tenantRef.current.value;\r\n    if (tenant === \"\") {\r\n      setMsg(locale().missing_tenant);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (email === \"\") {\r\n      setMsg(locale().missing_email);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    try {\r\n      const resp = await requestPasswordReset(tenant, email);\r\n      if (resp.response.status === 200) {setIsError(false);setMsg(locale().email_sent_successfully);}\r\n      else {setIsError(true);setMsg(locale().email_sent_errors);}\r\n    } catch (error) {      \r\n      setIsError(true);\r\n      setMsg(error.error.response.data.message + (error.error.response.data.details!==undefined?\" : \"+error.error.response.data.details:\"\"));\r\n      console.log({ error: error.error.response.data });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <LogoHolder />\r\n      </div>\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <Form onSubmit={submitForm}>\r\n          <Container fluid>\r\n            <Row>\r\n              <Col>\r\n                <h4>{locale().password_recovery}</h4>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n                  <Form.Label>{locale().tenant}</Form.Label>\r\n                  <Form.Control\r\n                    ref={tenantRef}\r\n                    type=\"text\"\r\n                    placeholder={locale().tenant_suggestion}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Label>{locale().email}</Form.Label>\r\n                  <Form.Control\r\n                    type=\"email\"\r\n                    ref={emailRef}\r\n                    placeholder={locale().email_suggestion}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Button variant=\"success\" type=\"submit\">\r\n                  {locale().submit}\r\n                </Button>{\" \"}\r\n                &nbsp;&nbsp;&nbsp;\r\n                <Button variant=\"secondary\" onClick={back}>\r\n                  {locale().cancel}\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <div style={{ color: isError?\"red\":\"black\" }}>{msg}</div>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Form>\r\n\r\n        <br />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  resetPassword,\r\n  getPasswordStrength,\r\n} from \"../../services/http_operations\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { languages } from \"../../config\";\r\nimport \"../authPage/authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport LogoHolder from \"../logoHolder/logoHolder\";\r\nimport { useParams, useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport { passwordStrength } from \"check-password-strength\";\r\nconst tenantRef = React.createRef();\r\nconst pswRef = React.createRef();\r\nconst pswConfirmRef = React.createRef();\r\n\r\nexport default function PasswordResetPage() {\r\n  //const { location, replace } = useHistory();\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [token, setToken] = useState(searchParams.get(\"token\"));  \r\n  const [isError, setIsError] = useState(false);\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  const go_login = () => {\r\n    navigate(\"/\");\r\n  };\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    let requiredStr;\r\n    try {\r\n      const res = await getPasswordStrength();\r\n      requiredStr = res.response.data.passwordStrength;\r\n    } catch (error) {     \r\n      console.log(error);\r\n      //Required password strength cannot be acquired from the server, use the default\r\n      requiredStr = 1;\r\n    }\r\n\r\n    const tenant = tenantRef.current.value;\r\n    const psw = pswRef.current.value;\r\n    const pswConfirm = pswConfirmRef.current.value;\r\n\r\n    if (psw === \"\" || pswConfirm === \"\") {\r\n      setMsg(locale().pass_not_null);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n\r\n    if (psw !== pswConfirm) {\r\n      setMsg(locale().pass_not_match);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (tenant === \"\") {\r\n      setMsg(locale().missing_email);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (token === \"\" || token == undefined) {\r\n      setMsg(locale().missing_token);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    const pswDetails = passwordStrength(psw);\r\n\r\n    if (pswDetails.id < requiredStr) {\r\n      setMsg(locale().stronger_password_required);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    //console.log(pswDetails.id);\r\n\r\n    try {\r\n      const resp = await resetPassword(tenant, token, psw);\r\n      if (resp.response.status === 200) {setIsError(false);setMsg(locale().password_changed);}\r\n      else {setIsError(true);setMsg(locale().password_not_changed_errors);}\r\n    } catch (error) {\r\n      setIsError(true);\r\n      console.log(error);\r\n      if (error.error.message === \"Network Error\") {\r\n        setMsg(locale().network_error);\r\n        return;\r\n      }\r\n      setMsg(error.error.response.data.message + \" : \" + error.error.response.data.details);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <LogoHolder />\r\n      </div>\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <Form onSubmit={submitForm}>\r\n          <Container fluid>\r\n            <Row>\r\n              <Col>\r\n                <h4>{locale().password_reset}</h4>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n                  <Form.Label>{locale().tenant}</Form.Label>\r\n                  <Form.Control\r\n                    ref={tenantRef}\r\n                    type=\"text\"\r\n                    placeholder={locale().tenant_suggestion}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>{\" \"}\r\n            {(searchParams.get(\"token\") === null ||\r\n              searchParams.get(\"token\") === \"\") && (\r\n              <Row>\r\n                <Col>\r\n                  <Form.Group className=\"mb-3\" controlId=\"token\">\r\n                    <Form.Label>Token</Form.Label>\r\n                    <Form.Control\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setToken(e.target.value);\r\n                      }}\r\n                      type=\"text\"\r\n                      placeholder={locale().enter + \" token\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Col>\r\n              </Row>\r\n            )}\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n                  <Form.Label>{locale().password}</Form.Label>\r\n                  <Form.Control\r\n                    ref={pswRef}\r\n                    type=\"password\"\r\n                    placeholder={locale().enter + \" new password\"}\r\n                  />\r\n                  <Form.Text className=\"text-muted\">\r\n                    {locale().password_rules}\r\n                  </Form.Text>\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Control\r\n                    type=\"password\"\r\n                    ref={pswConfirmRef}\r\n                    placeholder={locale().repeat + \" new password\"}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Button variant=\"success\" type=\"submit\">\r\n                  {locale().submit}\r\n                </Button>{\" \"}\r\n                &nbsp;&nbsp;&nbsp;\r\n                <Button variant=\"secondary\" onClick={go_login}>\r\n                  {locale().go_login_page}\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <div style={{ color: isError?\"red\":\"black\" }}>{msg}</div>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Form>\r\n\r\n        <br />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  NavLink,\r\n  Routes,\r\n  Navigate,\r\n} from \"react-router-dom\";\r\nimport { AuthPage } from \"./components/authPage/authPage.comp\";\r\nimport { HomePage } from \"./components/homePage/homePage\";\r\nimport { NotFoundPage } from \"./components/notFoundPage/notFoundPage\";\r\nimport Navigation from \"./components/navigation/navigation.comp\";\r\nimport Page from \"./components/page/page\";\r\nimport ProfilePage from \"./components/profilePage/profilePage\";\r\nimport \"./App.scss\";\r\nimport UnauthorizedPage from \"./components/unauthorizedPage/unauthorizedPage\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport NotificationBar from \"./components/notificationBar/notificationBar\";\r\nimport HorizontalNavigationBar from \"./components/horizontalNavigationBar/horizontalNavigationBar\";\r\nimport AppContext from \"./context\";\r\n\r\nimport { notificationManager, get_generic } from \"./services/http_operations\";\r\nimport VersioningPage from \"./components/versioningPage/versioningPage\";\r\nimport EditContentPage from \"./components/editContentPage/editContentPage\";\r\nimport AddPage from \"./components/addPage/addPage\";\r\nimport AddExperimentPage from \"./components/addExperimentPage/addExperimentPage\";\r\nimport AddVersionPage from \"./components/addVersionPage/addVersionPage\";\r\nimport { layout } from \"./config\";\r\nimport AddMeasurementsPage from \"./components/addMeasurementsPage/addMeasurementsPage\";\r\nimport cloneDeep from \"clone-deep\";\r\nimport { SetAPIUrl } from \"./services/http_operations\";\r\nimport PasswordRecoveryPage from \"./components/passwordRecoveryPage/PasswordRecoveryPage\";\r\nimport PasswordResetPage from \"./components/PasswordResetPage/PasswordResetPage\";\r\n/*\r\n    notifications follow this schema\r\n\r\n    {\r\n        name: \"notification name\"\r\n        time: \"\"\r\n        message: \"this is a message\"\r\n    }\r\n\r\n\r\n*/\r\n\r\ninterface INotification {\r\n  type: string;\r\n  time: string;\r\n  msg: string;\r\n}\r\n\r\nfunction App() {\r\n  const [notifications, setNotifications] = useState<INotification[]>([]);\r\n  const [types, setTypes] = useState<Object | undefined>();\r\n  const [data, setData] = useState<Object>({});\r\n\r\n  let layoutRef = React.useRef<string | null>();\r\n  const tkn = localStorage.getItem(\"token\");\r\n\r\n  //set api url to run https operations\r\n  SetAPIUrl();\r\n\r\n  ////////////////NOTIFICATION MANAGEMENT FRAGMENT\r\n  //function to push a new notification at the beginning of the list\r\n  function PushNotification(obj: INotification) {\r\n    setNotifications((prev) => [obj].concat(prev));\r\n    //notifications.push(obj);\r\n  }\r\n\r\n  //function to remove a single notification from list\r\n  function RemoveNotification(id: number) {\r\n    let tmp = [...notifications];\r\n    tmp.splice(id, 1);\r\n    setNotifications(tmp);\r\n  }\r\n\r\n  //function to clear notifications list\r\n  function ClearNotifications() {\r\n    setNotifications([]);\r\n  }\r\n\r\n  const notificationManagement = {\r\n    notifications: notifications,\r\n    PushNotification,\r\n    RemoveNotification,\r\n    ClearNotifications,\r\n  };\r\n\r\n  notificationManager.ClearNotifications = ClearNotifications;\r\n  notificationManager.PushNotification = PushNotification;\r\n  notificationManager.RemoveNotification = RemoveNotification;\r\n\r\n  ///////////////END NOTIFICATION MANAGEMENT FRAGMENT\r\n\r\n  ///////////////FETCHED TYPES AND DATA MANAGEMENT FRAGMENT\r\n  //function to push a new notification at the beginning of the list\r\n  function UpdateData(fetched: string[], key: string) {\r\n    setData((prev) => {\r\n      return { ...prev, [key]: [...fetched] };\r\n    });\r\n  }\r\n\r\n  //function to push a new notification at the beginning of the list\r\n  function RemoveData(key: string) {\r\n    setData((prev) => {\r\n      return { ...prev, [key]: undefined };\r\n    });\r\n  }\r\n\r\n  //use effect to fetch static data from the server /types\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchTypes = async () => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(\"types\", {}, {}, \"\");\r\n\r\n        setTypes(response.response.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    //if types has been already set, ignore it\r\n    if (types !== undefined) return;\r\n    // call the function\r\n    try {\r\n      fetchTypes();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    // make sure to catch any error\r\n  }, []);\r\n\r\n  const fetchedManagement = {\r\n    types: types,\r\n    data: data,\r\n    UpdateData: UpdateData,\r\n    RemoveData: RemoveData,\r\n  };\r\n  ///////////////END FETCHED TYPES MANAGEMENT FRAGMENT\r\n\r\n  //mobile view only allowed to be vertical\r\n  if (/Mobi/i.test(window.navigator.userAgent) == true) {\r\n    layoutRef.current = \"vertical\";\r\n  } else {\r\n    layoutRef.current = layout;\r\n  }\r\n\r\n  //not logged => show auth page\r\n  if (tkn === null)\r\n    return (\r\n      <div className=\"app\">\r\n        <Router>\r\n          <Routes>\r\n            <Route path=\"/\" element={<AuthPage />} />\r\n            <Route\r\n              path=\"/passwordrecovery\"\r\n              element={<PasswordRecoveryPage />}\r\n            />\r\n            <Route path=\"/passwordreset\" element={<PasswordResetPage />} />\r\n            <Route\r\n              path=\"/add/tenants\"\r\n              element={<AddPage resource={\"tenants\"} />}\r\n            />\r\n          </Routes>\r\n        </Router>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        notifications: notificationManagement,\r\n        fetched: fetchedManagement,\r\n      }}\r\n    >\r\n      <Router>\r\n        <Container\r\n          fluid\r\n          style={{\r\n            paddingLeft: 0,\r\n            paddingRight: 0,\r\n            height: 100 + \"vh\",\r\n          }}\r\n        >\r\n          {layoutRef.current === \"horizontal\" ? (\r\n            <Row style={{ padding: 0 }}>\r\n              <HorizontalNavigationBar />\r\n            </Row>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <Row\r\n            style={{\r\n              padding: 0,\r\n            }}\r\n          >\r\n            {layoutRef.current === \"vertical\" ? (\r\n              <Col md=\"auto\" style={{ padding: 0, minWidth: 250 + \"px\" }}>\r\n                <Navigation />\r\n              </Col>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {/Mobi/i.test(window.navigator.userAgent) == true && (\r\n              <Col md=\"auto\" style={{ padding: 0 }}>\r\n                <NotificationBar />\r\n              </Col>\r\n            )}\r\n            <Col style={{ paddingLeft: 0, paddingRight: 0 }}>\r\n              <Routes>\r\n                <Route path=\"/\" element={<HomePage />} />\r\n                <Route path=\"/home\" element={<HomePage />} />\r\n                <Route path=\"/viewProfile\" element={<ProfilePage />} />\r\n                <Route\r\n                  path=\"/add/experiments/\"\r\n                  element={<AddExperimentPage />}\r\n                />\r\n                <Route\r\n                  path=\"/add/measurements/\"\r\n                  element={<AddMeasurementsPage />}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/edit/:resource/:id\"\r\n                  element={<EditContentPage />}\r\n                />\r\n                <Route\r\n                  path=\"/versions/:resource/:id\"\r\n                  element={<VersioningPage />}\r\n                />\r\n                <Route\r\n                  path=\"/add/:type/:resource/:id\"\r\n                  element={<AddVersionPage />}\r\n                />\r\n                <Route path=\"/add/:resource/\" element={<AddPage />} />\r\n                <Route path=\"/:page\" element={<Page res=\":page\" />} />\r\n\r\n                <Route path=\"/unauthorized\" element={<UnauthorizedPage />} />\r\n                <Route path=\"/404\" element={<NotFoundPage />} />\r\n\r\n                <Route path=\"*\" element={<Navigate to=\"/404\" replace />} />\r\n              </Routes>\r\n            </Col>\r\n            {layoutRef.current === \"vertical\" &&\r\n              /Mobi/i.test(window.navigator.userAgent) == false && (\r\n                <Col md=\"auto\" style={{ paddingLeft: 0, paddingRight: 0 }}>\r\n                  <NotificationBar />\r\n                </Col>\r\n              )}\r\n          </Row>\r\n        </Container>\r\n      </Router>\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n"],"sourceRoot":""}