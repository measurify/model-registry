{"version":3,"sources":["common/localizations/localization_it.js","common/localizations/localization_en.js","services/http_operations.js","services/validations.js","config.js","common/locale.ts","components/languageSelector/languageSelector.tsx","components/authPage/authPage.comp.jsx","components/homePage/homePage.tsx","components/notFoundPage/notFoundPage.tsx","services/misc_functions.js","components/navigation/navigation.comp.jsx","components/actionsManager/actionsManager.jsx","components/contentTable/contentTable.jsx","components/page/page.jsx","components/profilePage/profilePage.jsx","components/unauthorizedPage/unauthorizedPage.tsx","context.jsx","components/notificationBar/notificationBar.jsx","components/horizontalNavigationBar/horizontalNavigationBar.jsx","components/formManager/formManager.jsx","services/objects_manipulation.js","components/versioningPage/versioningPage.jsx","components/editContentPage/editContentPage.jsx","components/formFileComp/formFile.jsx","components/addPage/addPage.jsx","components/addExperimentPage/addExperimentPage.jsx","components/addVersionPage/addVersionPage.jsx","components/addMeasurementsPage/addMeasurementsPage.jsx","App.tsx","index.js"],"names":["localization_it","username","password","tenant","keep_logged","select","language","welcome","role","session_expire_in","resources","notifications","file_content","clear_all","enter","username_suggestion","password_suggestion","tenant_suggestion","add_tenant","welcome_hp","left_bar_descr_hp","right_bar_descr_hp","session_expire_info_hp","github_page_hp","github_issue_page_hp","profile_page_desc","pass_change_confirm","pass_not_match","old_pass_empty","old_pass_wrong","pass_not_null","password_changed","oh_no","broken_link","submit","cancel","login","logout","repeat","close","login_error","unauthorised_user","session_expired","localization_en","axios","require","default","https","instance","create","httpsAgent","Agent","notificationManager","PushNotification","obj","RemoveNotification","id","ClearNotifications","body","options","headers","url_string","api_url","Promise","resolve","reject","post","then","response","localStorage","setItem","data","token","token_expiration_time","user","Date","getTime","toString","undefined","type","catch","error","refreshToken","Authorization","GetToken","put","post_file_generic","resource_type","formData","additionalHeader","console","log","tempH","Object","entries","forEach","k","v","name","time","toTimeString","msg","post_version_file_generic","post_generic","put_generic","padStart","length","JSON","stringify","message","delete_generic","delete","statusCode","delete_version","idResource","get_generic","qs","_options","url","filter","concat","limit","page","json","get","docs","totalDocs","totalPages","pagingCounter","hasPrevPage","hasNextPage","prevPage","nextPage","getItem","isFeatureInUse","feature","features","website_name","languages","layout","pages","versionPages","aliasPages","original","timestamp","size","pageActions","viewFields","editFields","metadata","value","status","datasets","tags","users","visibility","addFields","_id","organization","address","email","phone","admin_username","admin_password","passwordhash","ordinal","file","usage","editFieldsSpecifier","policy","items","addTypes","fetchedPageTypes","fetchedPageData","restrictionPages","locale","tkn","navigator","substring","LanguageSelector","setSessionLanguage","window","location","reload","includes","Button","variant","onClick","userRef","React","createRef","pswRef","tenantRef","AuthPage","useState","setMsg","e","preventDefault","current","psw","replace","details","className","Form","onSubmit","Group","controlId","Label","Control","ref","placeholder","style","color","to","title","width","height","marginRight","opacity","HomePage","useEffect","href","target","rel","NotFoundPage","isDefault","isNaN","Array","isArray","def","elem","constructor","nonDefaultLength","removeDefaultElements","entr","i","j","splice","subEntr","areEqual","obj1","obj2","k1","keys","k2","values","capitalize","s","toUpperCase","slice","FormatMetadata","dt","str","map","el","join","fontawesome","library","add","faTimes","faBars","faUserTie","faUserGraduate","faUserCog","faUserTag","faUser","faCheck","intervalRef","loginTime","remainingSeconds","duration","Navigation","isOpened","setIsOpened","usr","rl","tn","CalcEnding","t0","remainingSec","retryLoginTime","parseInt","now","exp","endsWith","DurationToMilliSeconds","clearInterval","setInterval","clear","paddingLeft","paddingBottom","document","Fragment","tools","navData","isActive","ActionContent","props","toShow","resType","subK","resource","row","f","UnrollView","item","Accordion","defaultActiveKey","Children","toArray","key","Item","eventKey","Header","Body","some","single","Table","responsive","striped","bordered","hover","ActionManager","res","setRes","viewPopover","Popover","minWidth","test","userAgent","as","action","OverlayTrigger","trigger","placement","overlay","rootClose","takeSingle","downloadSingle","confirm","removeSingle","ContentTable","header","actions","index","replaceAll","faEye","faPencilAlt","faCopy","faCodeBranch","faDownload","Page","params","useParams","useSearchParams","searchParams","setSearchParams","setResource","setHeader","setActions","pageNum","setPageNum","pageLimit","setPageLimit","hasNext","setHasNext","hasPrev","setHasPrev","setPrevPage","setNextPage","setTotalPages","fetchData","num","RenderPagination","prevEllipsis","nextEllipsis","display","Pagination","alignSelf","marginLeft","First","disabled","Prev","Ellipsis","Next","Last","find","r","tmp","faPlusCircle","ProfilePage","setUsername","setRole","setTenant","oldPassword","setOldPassword","setPassword","passwordConfirm","setPasswordConfirm","submitPassword","Container","fluid","Row","Col","xs","onChange","Text","muted","UnauthorizedPage","AppContext","createContext","oldNotifications","NotificationBar","show","setShow","highlight","setHighlight","layoutRef","useRef","myNotifications","useContext","handleClose","setTimeout","errorNot","textDecoration","Badge","pill","bg","Offcanvas","backgroundColor","onHide","scroll","backdrop","keyboard","Title","ToastContainer","notification","Toast","animation","onClose","src","alt","HorizontalNavigationBar","padding","justifyContent","alignItems","FormManager","myFetched","context","fetched","disabledFields","functionalFields","submitFunction","backFunction","handleChangesCallback","arrayDeleteCallback","types","val","borderBottomStyle","borderBottomWidth","marginBottom","sm","borderRightStyle","borderRightWidth","Select","SelectFormRow","Autocomplete","newValue","getOptionLabel","option","optionalLabel","renderOption","Box","component","sx","mr","flexShrink","renderInput","TextField","label","md","ArrayStringFormRow","idx","_k","_v","ArrayObjectFormRow","NumericFormRow","alias","FetchedFormRow","StringFormRow","cloneDeep","sortObject","template","sortingKeys","ob","indexOf","sort","a","b","reduce","accumulator","maintainEmptyElements","fieldSpecifier","copy","maintainEmptyElement","path","tmpPtr","fieldSpecifierCpy","tmpPath","element","nonDefLen","len","push","VersioningPage","resourceElement","setResourceElement","resourceEntity","setResourceEntity","setOriginal","useNavigate","setValues","setDisabledFields","UpdateData","tmpValues","headerVersion","versions","evaluateSpecifiers","_key","specsEntries","resp","fst","identifier","route","responseType","filename","mimetype","blob","Blob","saveAs","EditContentPage","navigate","deleted","tmpOrig","toSend","remove","update","origArr","indexes","removed","statusText","tmpVals","valuesPtr","lastIndexNumber","NaN","elements","minDel","Infinity","FormFile","setContentHeader","setContentPlain","setContentBody","setFile","contentBody","contentPlain","contentHeader","select_file","accept","filePickerExtensions","files","fileReader","FileReader","onloadend","content","result","regex","RegExp","splitted","split","parse","readAsText","overflow","h","resize","cols","rows","readOnly","AddPage","postType","setPostType","back","postBody","postFile","FormData","append","Nav","justify","onSelect","Link","borderRadius","borderStyle","borderColor","borderWidth","margin","AddExperimentPage","protocols","setProtocols","handleProtocolChange","selectedProtocol","protocol","tmpDisabled","AddVersionsPage","alert","postVersionFile","AddMeasurementsPage","samples","setSamples","setItems","formValues","setFormValues","setFeatures","setFeature","handleFeatureChange","selectedFeature","addSample","tmpSample","dimension","enumValues","range","tmpSamples","sample","sampl","formValuesPtr","App","setNotifications","setTypes","setData","prev","notificationManagement","fetchTypes","fetchedManagement","Provider","paddingRight","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a38e8fac.chunk.js","sourcesContent":["const localization_it = {\r\n  username: \"Nome utente\",\r\n  password: \"Password\",\r\n  tenant: \"Organizzazione\",\r\n  keep_logged: \"Mantieni Accesso\",\r\n  select: \"Seleziona\",\r\n  language: \"Lingua\",\r\n  welcome: \"Bentornato\",\r\n  role: \"Ruolo\",\r\n  session_expire_in: \"La sessione scadrà in \",\r\n  resources: \"Risorse\",\r\n  notifications: \"Notifiche\",\r\n  file_content: \"Contenuto del file\",\r\n\r\n  clear_all: \"Cancella tutto\",\r\n\r\n  ///Completamento campi\r\n  enter: \"Inserisci\",\r\n  username_suggestion: \"Inserisci il nome utente\",\r\n  password_suggestion: \"Inserisci la password\",\r\n  tenant_suggestion: \"Inserisci la tua organizzazione\",\r\n  add_tenant: \"Aggiungi organizzazione\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Benvenuto nel pannello di controllo del Model Registry!\",\r\n  left_bar_descr_hp:\r\n    \"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.\",\r\n  right_bar_descr_hp:\r\n    'La barra a destra può essere aperta cliccando sul pulsante \"Notifiche\" per mostrare la lista delle notifiche.',\r\n  session_expire_info_hp: ``,\r\n  github_page_hp: \"Pagina Github di Measurify\",\r\n  github_issue_page_hp: \"Segnala bug o problemi\",\r\n\r\n  //profile page\r\n  profile_page_desc:\r\n    \"questa è la pagina in cui puoi visionare il tuo profilo o modificare la password\",\r\n  pass_change_confirm: \"La password verrà modificata, procedere?\",\r\n  pass_not_match:\r\n    \"La password inserita e la conferma non combaciano, si prega di reinserirle\",\r\n  old_pass_empty: \"Per favore, inserire la vecchia password\",\r\n  old_pass_wrong: \"La vecchia password è sbagliata\",\r\n  pass_not_null: \"La password non può essere vuota\",\r\n  password_changed: \"Password cambiata\",\r\n  \r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link:\r\n    \"Sembra che tu abbia utilizzato un collegamento non funzionante.\",\r\n\r\n  ///Azioni\r\n  submit: \"Invio\",\r\n  cancel: \"Annulla\",\r\n  login: \"Accedi\",\r\n  logout: \"Esci\",\r\n  repeat: \"Ripeti\",\r\n  close: \"Chiudi\",\r\n\r\n  ///Errori\r\n  login_error: \"Login errata!\",\r\n  unauthorised_user: \"Non sei abilitato a utilizzare questa pagina\",\r\n  session_expired: \"Sessione scaduta\",\r\n};\r\n\r\nexport default localization_it;\r\n","const localization_en = {\r\n  username: \"Username\",\r\n  password: \"Password\",\r\n  tenant: \"Tenant\",\r\n  keep_logged: \"Keep Logged In\",\r\n\r\n  select: \"Select\",\r\n  language: \"Language\",\r\n  welcome: \"Welcome back\",\r\n  role: \"Role\",\r\n  session_expire_in: \"Session will expire in \",\r\n  resources: \"Resources\",\r\n  notifications: \"Notifications\",\r\n  file_content: \"File content\",\r\n\r\n  clear_all: \"Clear all\",\r\n\r\n  enter: \"Enter\",\r\n  username_suggestion: \"Insert your username\",\r\n  password_suggestion: \"Insert your password\",\r\n  tenant_suggestion: \"Insert your tenant\",\r\n  add_tenant: \"Add tenant\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Welcome to the Model Registry dashboard!\",\r\n  left_bar_descr_hp:\r\n    \"The left bar contains the information about your account and  the list of tabs\",\r\n  right_bar_descr_hp:\r\n    'The right bar contains the notification bar (Click on \"Notifications\" to open).',\r\n  session_expire_info_hp: \"\",\r\n  github_page_hp: \"\",\r\n  github_issue_page_hp: \"Report bugs or issues\",\r\n\r\n  //profile page\r\n  profile_page_desc:\r\n    \"from this page you can view your own profile or change the password\",\r\n  pass_change_confirm: \"Password will be changed, do you confirm?\",\r\n  pass_not_match:\r\n    \"Provided password and the confirmation do not match. Please insert them again\",\r\n  old_pass_empty: \"Please. enter old password\",\r\n  old_pass_wrong: \"The old password is wrong\",\r\n  pass_not_null: \"Password cannot be empty\",\r\n  password_changed: \"Password changed\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link: \"It looks like you have clicked on a broken link.\",\r\n\r\n  ///Actions\r\n  submit: \"Submit\",\r\n  cancel: \"Cancel\",\r\n  login: \"Login\",\r\n  logout: \"Logout\",\r\n  repeat: \"Repeat\",\r\n  close: \"Close\",\r\n\r\n  ///Errors\r\n  login_error: \"Wrong login!\",\r\n  unauthorised_user: \"You are not allowed to use this page\",\r\n  session_expired: \"Session expired\",\r\n};\r\n\r\nexport default localization_en;\r\n","import { api_url } from \"../config\";\r\n\r\nconst axios = require(\"axios\").default;\r\n\r\nconst https = require(\"https\");\r\n\r\nconst instance = axios.create({\r\n  httpsAgent: new https.Agent({\r\n    //unsafe, delete in prod\r\n    //rejectUnauthorized: false,\r\n  }),\r\n});\r\n\r\nexport let notificationManager = {\r\n  PushNotification: (obj) => {},\r\n  RemoveNotification: (id) => {},\r\n  ClearNotifications: () => {},\r\n};\r\n\r\n//login\r\nexport function login(username, password, tenant) {\r\n  const body = {\r\n    username: `${username}`,\r\n    password: `${password}`,\r\n    tenant: `${tenant}`,\r\n  };\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      //Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\r\n          \"token-expiration-time\",\r\n          response.data.token_expiration_time\r\n        );\r\n        localStorage.setItem(\"username\", response.data.user.username);\r\n        localStorage.setItem(\"user-tenant\", tenant);\r\n        localStorage.setItem(\"login-time\", new Date().getTime().toString());\r\n\r\n        //model-registry uses role while other measurify servers use type, so check ofr one of thew two\r\n        const role =\r\n          response.data.user.type !== undefined\r\n            ? response.data.user.type\r\n            : response.data.user.role;\r\n        localStorage.setItem(\"user-role\", role);\r\n\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n//refresh token\r\nexport function refreshToken() {\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, {}, options)\r\n      .then((response) => {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"login-time\", new Date().getTime().toString());\r\n        localStorage.setItem(\r\n          \"token-expiration-time\",\r\n          response.data.token_expiration_time\r\n        );\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_file_generic(\r\n  resource_type,\r\n  formData,\r\n  additionalHeader = {},\r\n  token = undefined\r\n) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/file\";\r\n\r\n  console.log(\"POST file:\" + url_string);\r\n\r\n  const tempH = {\r\n    \"Content-Type\": \"multipart/form-data\",\r\n    \"Cache-Control\": \"no-cache\",\r\n    Authorization: token,\r\n  };\r\n\r\n  Object.entries(additionalHeader).forEach(([k, v]) => {\r\n    tempH[k] = v;\r\n  });\r\n  const options = {\r\n    headers: tempH,\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, formData, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of file on: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of file on: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_version_file_generic(\r\n  resource_type,\r\n  id,\r\n  formData,\r\n  additionalHeader = {},\r\n  token = undefined\r\n) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/\"+id+\"/versions\";\r\n\r\n  console.log(\"POST file:\" + url_string);\r\n\r\n  const tempH = {\r\n    \"Content-Type\": \"multipart/form-data\",\r\n    \"Cache-Control\": \"no-cache\",\r\n    Authorization: token,\r\n  };\r\n\r\n  Object.entries(additionalHeader).forEach(([k, v]) => {\r\n    tempH[k] = v;\r\n  });\r\n  const options = {\r\n    headers: tempH,\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, formData, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of file on: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of file on: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_generic(resource_type, body, token = undefined) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/\";\r\n\r\n  console.log(\"POST :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of a resource type: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of a resource type: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function put_generic(resource_type, body, id, token = undefined) {\r\n  const url_string = api_url + \"/\" + resource_type + \"/\" + id;\r\n  if (token === undefined) token = GetToken();\r\n\r\n  console.log(\"PUT :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, body, options)\r\n      .then((response) => {\r\n        //obscure password in notification bar\r\n        if (body[\"password\"] !== undefined)\r\n          body[\"password\"] = \"\".padStart(body[\"password\"].length, \"*\");\r\n\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Successful PUT of a resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body),\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        //obscure password in notification bar\r\n        if (body[\"password\"] !== undefined)\r\n          body[\"password\"] = \"\".padStart(body[\"password\"].length, \"*\");\r\n\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Error doing a PUT on resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body) +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function delete_generic(resource_type, id, token = undefined) {\r\n  let url_string = api_url + \"/\" + resource_type;\r\n  if (token === undefined) token = GetToken();\r\n  if (id !== undefined) {\r\n    url_string += \"/\" + id;\r\n  }\r\n  console.log(\"DELETE :\" + url_string);\r\n\r\n  //url: url_string;\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .delete(url_string, options)\r\n      .then((response) => {\r\n        if (id !== undefined) {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resource: \" + id + \", of type: \" + resource_type,\r\n          });\r\n        } else {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resources of type: \" + resource_type,\r\n          });\r\n        }\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"error deleting resource: \" +\r\n            id +\r\n            \", of type: \" +\r\n            resource_type +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n        if (error.statusCode === 404) {\r\n          //Not found\r\n          notificationManager.PushNotification({\r\n            name: \"error\",\r\n            time: new Date().toTimeString(),\r\n            msg:\r\n              \"Please check if your user is authorized to delete the resource. \" +\r\n              error.message,\r\n          });\r\n        }\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function delete_version(\r\n  resource_type,\r\n  idResource,\r\n  id,\r\n  token = undefined\r\n) {\r\n  if (idResource === undefined || id === undefined) {\r\n    console.log(\"idResource or id can't be null\");\r\n    return;\r\n  }\r\n  let url_string =\r\n    api_url + \"/\" + resource_type + \"/\" + idResource + \"/versions\" + \"/\" + id;\r\n  if (token === undefined) token = GetToken();\r\n\r\n  console.log(\"DELETE :\" + url_string);\r\n\r\n  //url: url_string;\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .delete(url_string, options)\r\n      .then((response) => {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resource: \" + id + \", version of type: \" + resource_type,\r\n          });\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"error deleting resource: \" +\r\n            id +\r\n            \", version of type: \" +\r\n            resource_type +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n        if (error.statusCode === 404) {\r\n          //Not found\r\n          notificationManager.PushNotification({\r\n            name: \"error\",\r\n            time: new Date().toTimeString(),\r\n            msg:\r\n              \"Please check if your user is authorized to delete the resource. \" +\r\n              error.message,\r\n          });\r\n        }\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function get_generic(resource_type, qs = {},_options={}, token) {\r\n  let url = api_url + \"/\" + resource_type + \"/\";\r\n  if (token === undefined) token = GetToken();\r\n\r\n  if (qs.filter !== undefined) {\r\n    url = url.concat(\"?filter=\" + qs.filter);\r\n  } else {\r\n    url = url.concat(\"?filter=\");\r\n  }\r\n  if (qs.limit !== undefined) {\r\n    url = url.concat(\"&limit=\" + qs.limit);\r\n  }\r\n  if (qs.page !== undefined) {\r\n    url = url.concat(\"&page=\" + qs.page);\r\n  }\r\n\r\n  console.log(\"GET :\" + url);\r\n\r\n  let options = {..._options,...{\r\n    headers: {\r\n     \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n\r\n    json: true,\r\n  }};\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((response) => {\r\n        resolve({\r\n          response: response,\r\n          docs: response.data.docs,\r\n          totalDocs: response.data.totalDocs,\r\n          limit: response.data.limit,\r\n          totalPages: response.data.totalPages,\r\n          page: response.data.page,\r\n          pagingCounter: response.data.pagingCounter,\r\n          hasPrevPage: response.data.hasPrevPage,\r\n          hasNextPage: response.data.hasNextPage,\r\n          prevPage: response.data.prevPage,\r\n          nextPage: response.data.nextPage,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        /*commons.PushMsg({\r\n          type: \"error\",\r\n          msg:\r\n            \"Error getting resource(s) of type: \" +\r\n            resource_type +\r\n            \", with filter: \" +\r\n            qs.limit +\r\n            \". \" +\r\n            error.message,\r\n        });*/\r\n        reject({ error: error });\r\n      });\r\n  });\r\n}\r\n\r\n//return the login token from the localstorage\r\nfunction GetToken() {\r\n  return localStorage.getItem(\"token\");\r\n}\r\n","//validation functions used for input disable/validation etc.\r\n//the can be defined when required and used as \"pointer to function\" into the appropriate dict config.js\r\n//return must be coherent with name: i.e isInUse => true when is used\r\n\r\nimport { get_generic } from \"./http_operations\";\r\n\r\n//this function return true if the feature is in use (check on measurements/devices)\r\nexport async function isFeatureInUse(feature) {\r\n  const qs = { filter: JSON.stringify({ feature: feature }) };\r\n\r\n  try {\r\n    //check if feature has associated measurements\r\n    const res = await get_generic(\"measurements\", qs);\r\n    if (res.totalDocs > 0) {\r\n      //has measurements, so it's in use\r\n      return true;\r\n    } else {\r\n      //if the feature has no measurements, check if it has device associated\r\n      const qs = { filter: JSON.stringify({ features: feature }) };\r\n      const res = await get_generic(\"devices\", qs);\r\n\r\n      if (res.totalDocs > 0) {\r\n        //has a device, so it's in use\r\n        return true;\r\n      } else return false;\r\n    }\r\n  } catch (errors) {\r\n    console.log(\"Error on isFeatureInUse\");\r\n    console.log(errors);\r\n    return false;\r\n  }\r\n}\r\n\r\n//this function always return true\r\nexport function alwaysTrue() {\r\n  return true;\r\n}\r\n","import { isFeatureInUse, alwaysTrue } from \"./services/validations\";\r\n\r\n//url of APIs\r\n//export const api_url = \"https://hi-drive.measurify.org:8080/v1\";\r\nexport const api_url = \"https://localhost/v1\";\r\n\r\n//name of this dashboard, shown to users\r\nexport const website_name = \"Model Registry Dashboard\";\r\n\r\n//languages enabled for this GUI, only english \"en\" and italian \"it\" are supported with this version\r\n//if no languages are enabled, the GUI will be localized in english\r\n//export const languages = [\"en\", \"it\"];\r\nexport const languages = [];\r\n\r\n//gui layout\r\n// options are \"horizontal\" or \"vertical\"\r\nexport const layout = \"vertical\";\r\n\r\n//dictionary of pages: key is the route for the API REST, value is an array that contains the fields shown to users\r\n//action is a special field that will enable actions for each row || still required, future version may have it removed\r\nexport const pages = {};\r\npages[\"users\"] = [\"username\", \"role\", \"actions\"];\r\npages[\"tags\"] = [\"_id\", \"usage\", \"actions\"];\r\npages[\"datasets\"] = [\r\n  \"name\",\r\n  \"metadata\",\r\n  \"tags\",\r\n  \"actions\",\r\n];\r\npages[\"models\"] = [\r\n  \"name\",\r\n  \"metadata\",\r\n  \"status\",\r\n  \"tags\",\r\n  \"actions\",\r\n];\r\npages[\"algorithms\"] = [\r\n  \"name\",\r\n  \"metadata\",\r\n  \"status\",\r\n  \"tags\",\r\n  \"actions\",\r\n];\r\n\r\n//version pages: key is the model + \"Version\", value is an array that contains the fields shown to users\r\n//action is a special field that will enable actions for each row || still required, future version may have it removed\r\nexport const versionPages = {};\r\nversionPages[\"datasets\"] = [\"ordinal\", \"original\", \"timestamp\", \"size\", \"actions\"];\r\nversionPages[\"models\"] = [\"ordinal\", \"original\", \"timestamp\", \"size\", \"actions\"];\r\nversionPages[\"algorithms\"] = [\"ordinal\", \"original\", \"timestamp\", \"size\", \"actions\"];\r\n\r\n\r\n//alias dictionary: key is the page, value are object with pairs of the fields that will be renamed into page table header (\"key\" is renamed as \"value\")\r\nexport const aliasPages = {};\r\naliasPages[\"datasets\"] = { original: \"filename\", timestamp: \"data\", size: \"size (byte)\" };\r\naliasPages[\"models\"] = { original: \"filename\", timestamp: \"data\", size: \"size (byte)\" };\r\naliasPages[\"algorithms\"] = { original: \"filename\", timestamp: \"data\", size: \"size (byte)\" };\r\n//aliasPages[\"features\"] = { _id: \"Feature Name\", actions: \"Actions\" };\r\n//aliasPages[\"tags\"] = { _id: \"Tag Name\", actions: \"Actions\" };\r\n//aliasPages[\"devices\"] = { _id: \"Device Name\", actions: \"Actions\" };\r\n\r\n//actions dictionary: key is the page, value is an array that contains actions || working actions arae \"view\" | \"edit\" | \"delete\"\r\nexport const pageActions = {};\r\npageActions[\"users\"] = [\"view\", \"delete\"];\r\npageActions[\"tags\"] = [\"view\", \"delete\"];\r\npageActions[\"datasets\"] = [\"view\", \"edit\", \"versioning\", \"delete\"];\r\npageActions[\"models\"] = [\"view\", \"edit\", \"versioning\", \"delete\"];\r\npageActions[\"algorithms\"] = [\"view\", \"edit\", \"versioning\", \"delete\"];\r\npageActions[\"datasetsVersion\"] = [\"downloadVersion\", \"deleteVersion\"];\r\npageActions[\"modelsVersion\"] = [\"downloadVersion\", \"deleteVersion\"];\r\npageActions[\"algorithmsVersion\"] = [\"downloadVersion\", \"deleteVersion\"];\r\n\r\n//view dictionary: key is the page, value is an array that contains the fields shown to the user with \"view\" action\r\nexport const viewFields = {};\r\nviewFields[\"users\"] = [\"username\", \"role\"];\r\nviewFields[\"tags\"] = [\"_id\", \"usage\", \"owner\", \"actions\"];\r\nviewFields[\"datasets\"] = [\"_id\", \"name\", \"metadata\", \"versions\", \"users\"];\r\nviewFields[\"models\"] = [\r\n  \"name\",\r\n  \"metadata\",\r\n  \"datasets\",\r\n  \"versions\",\r\n  \"users\",\r\n  \"tags\",\r\n];\r\nviewFields[\"algorithms\"] = [\r\n  \"name\",\r\n  \"metadata\",\r\n  \"datasets\",\r\n  \"versions\",\r\n  \"users\",\r\n  \"tags\",\r\n];\r\n\r\n\r\n//edit dictionary: key is the page, value is an array that contains the fields that can be edited with \"edit\" action\r\n//fields should be specified in the same format of the object that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:NaN for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\nexport const editFields = {};\r\n//editFields[\"devices\"] = { visibility: \"\", tags: [\"\"] };\r\n\r\n//editFields[\"tags\"] = { _id:\"\", usage: \"\" };\r\n\r\neditFields[\"models\"] = {\r\n  name: \"\",      \r\n  metadata: [{ name: \"\", value: \"\" }],  \r\n  status: \"\",    \r\n  datasets: [\"\"],\r\n  tags: [\"\"], \r\n  users: [\"\"],\r\n  visibility: \"\"\r\n};\r\n\r\neditFields[\"algorithms\"] = {\r\n  name: \"\",     \r\n  metadata: [{ name: \"\", value: \"\" }],  \r\n  status: \"\",     \r\n  datasets: [\"\"],\r\n  tags: [\"\"], \r\n  users: [\"\"],\r\n  visibility: \"\"\r\n};\r\n\r\neditFields[\"datasets\"] = {\r\n  name: \"\",   \r\n  metadata: [{ name: \"\", value: \"\" }],\r\n  tags: [\"\"],\r\n  users: [\"\"],\r\n  visibility: \"\"\r\n};\r\n\r\n//add dictionary: key is the page, value is an array that contains the fields that can will be used to post the entity\r\n//fields should be specified in the same format of the objet that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:NaN for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\nexport const addFields = {};\r\naddFields[\"tenants\"] = {\r\n  token: \"\",\r\n  _id: \"\",\r\n  organization: \"\",\r\n  address: \"\",\r\n  email: \"\",\r\n  phone: \"\",\r\n  admin_username: \"\",\r\n  admin_password: \"\",\r\n  passwordhash: \"\",\r\n};\r\n\r\naddFields[\"datasets\"] = {\r\n  name: \"\",  \r\n  metadata: [{ name: \"\", value: \"\" }],\r\n  tags: [\"\"],\r\n  users: [\"\"],\r\n  visibility: \"\"\r\n};\r\n\r\naddFields[\"models\"] = {\r\n  name: \"\",  \r\n  metadata: [{ name: \"\", value: \"\" }],\r\n  status: \"\",\r\n  datasets: [\"\"],\r\n  tags: [\"\"],\r\n  users: [\"\"],\r\n  visibility: \"\"  \r\n};\r\n\r\naddFields[\"algorithms\"] = {\r\n  name: \"\",  \r\n  metadata: [{ name: \"\", value: \"\" }],\r\n  status: \"\",\r\n  datasets: [\"\"],\r\n  tags: [\"\"],\r\n  users: [\"\"],\r\n  visibility: \"\"\r\n};\r\n\r\naddFields[\"versions\"] = {\r\n  ordinal: \"\",\r\n  file: \"\",\r\n};\r\n\r\naddFields[\"users\"] = { username: \"\", password: \"\", role: \"\" };\r\n\r\naddFields[\"tags\"] = { _id: \"\", usage: \"\" };\r\n\r\n//edit fields specifiers dictionary\r\n//this dictionary allow to specify particular behaviour for input fields, that can be managed by a specific function\r\n// type can be \"disable\" -> policy is applied to fields to be disabled, true when field should be disabled\r\n//\r\nexport const editFieldsSpecifier = {};\r\neditFieldsSpecifier[\"features\"] = {\r\n  _id: { type: \"disable\", policy: isFeatureInUse },\r\n  items: { type: \"disable\", policy: isFeatureInUse },\r\n};\r\n\r\n//dictionary to select the way to post entity/ies, it's an array which can contain \"form\", \"file\", or both\r\nexport const addTypes = {};\r\naddTypes[\"users\"] = [\"form\", \"file\"];\r\naddTypes[\"tags\"] = [\"form\", \"file\"];\r\naddTypes[\"models\"] = [\"form\", \"file\"];\r\naddTypes[\"algorithms\"] = [\"form\", \"file\"];\r\naddTypes[\"datasets\"] = [\"form\", \"file\"];\r\naddTypes[\"versions\"] = [\"file\"];\r\naddTypes[\"tenants\"] = [\"form\"];\r\n\r\n//dictionary for fetched types\r\n//types are fetched on the /types route and matched with fields following this dictionary\r\nexport const fetchedPageTypes = {};\r\nfetchedPageTypes[\"users\"] = { role: \"UserRoles\" };\r\nfetchedPageTypes[\"datasets\"] = { visibility: \"VisibilityTypes\" };\r\nfetchedPageTypes[\"models\"] = { visibility: \"VisibilityTypes\", status: \"ModelStatusTypes\" };\r\nfetchedPageTypes[\"algorithms\"] = { visibility: \"VisibilityTypes\", status: \"AlgorithmStatusTypes\" };\r\nfetchedPageTypes[\"tags\"] = { usage: \"UsageTypes\" };\r\n\r\n//dictionary for fetched data\r\n//data is fetched on the according resource route and matched with fields following this dictionary\r\n//the value of the specified field is the route to search for data. _ids of that route will be used as options\r\nexport const fetchedPageData = {};\r\n/*fetchedPageData[\"tags\"] = { tags: \"tags\" };\r\nfetchedPageData[\"things\"] = { tags: \"tags\" };\r\nfetchedPageData[\"devices\"] = { features: \"features\" };\r\nfetchedPageData[\"features\"] = { tags: \"tags\" };\r\nfetchedPageData[\"measurements\"] = {\r\n  device: \"devices\",\r\n  thing: \"things\",\r\n  tags: \"tags\",\r\n};*/\r\n\r\nfetchedPageData[\"datasets\"] = { users: \"users\" };\r\nfetchedPageData[\"models\"] = { datasets: \"datasets\", users: \"users\" };\r\nfetchedPageData[\"algorithms\"] = { datasets: \"datasets\", users: \"users\" };\r\n\r\n//restriction dictionary: key is the page, value is an array of roles allowed to access to that page\r\nexport const restrictionPages = {};\r\nrestrictionPages[\"users\"] = [\"admin\"];\r\nrestrictionPages[\"tags\"] = [\"admin\"];","import localization_it from \"./localizations/localization_it\";\r\nimport localization_en from \"./localizations/localization_en\";\r\n\r\nimport { languages } from \"../config\";\r\n\r\ninterface ILocalization {\r\n  username: string;\r\n  password: string;\r\n  tenant: string;\r\n  keep_logged: string;\r\n  select: string;\r\n  language: string;\r\n  welcome: string;\r\n  role: string;\r\n  session_expire_in: string;\r\n  resources: string;\r\n  notifications: string;\r\n  file_content: string;\r\n\r\n  clear_all: string;\r\n\r\n  ///Fields\r\n  enter: string;\r\n  username_suggestion: string;\r\n  password_suggestion: string;\r\n  tenant_suggestion: string;\r\n  add_tenant: string;\r\n\r\n  //homepage\r\n  welcome_hp: string;\r\n  left_bar_descr_hp: string;\r\n  right_bar_descr_hp: string;\r\n  session_expire_info_hp: string;\r\n  github_page_hp: string;\r\n  github_issue_page_hp: string;\r\n\r\n  //profile page\r\n  profile_page_desc: string;\r\n  pass_change_confirm: string;\r\n  pass_not_match: string;\r\n  old_pass_empty: string;\r\n  old_pass_wrong: string;\r\n  pass_not_null: string;\r\n  password_changed: string;\r\n\r\n  //404\r\n  oh_no: string;\r\n  broken_link: string;\r\n\r\n  ///Actions\r\n  submit: string;\r\n  cancel: string;\r\n  login: string;\r\n  logout: string;\r\n  repeat: string;\r\n  close: string;\r\n\r\n  ///Errors\r\n  login_error: string;\r\n  unauthorised_user: string;\r\n  session_expired: string;\r\n}\r\n\r\nexport default function locale() {\r\n  let tkn = localStorage.getItem(\"language\");\r\n  if (languages.length === 0) {\r\n    return localization_en as ILocalization;\r\n  }\r\n  if (languages.length === 1) {\r\n    tkn = languages[0];\r\n  }\r\n  //let localization : ILocalization;\r\n\r\n  //check token first\r\n  if (tkn === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (tkn === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //then check language from browser\r\n  if (navigator.language.substring(0, 2) === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (navigator.language.substring(0, 2) === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //if the token found or language is not valid -> default language: english\r\n  return localization_en as ILocalization;\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { languages } from \"../../config\";\r\nimport \"./languageSelector.scss\";\r\n\r\nexport const LanguageSelector = () => {\r\n  function setSessionLanguage(language: string) {\r\n    localStorage.setItem(\"language\", language);\r\n    window.location.reload();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {locale().language}\r\n      <div>\r\n        {languages.includes(\"it\") && (\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => setSessionLanguage(\"it\")}\r\n          >\r\n            Ita\r\n          </Button>\r\n        )}\r\n        {languages.includes(\"en\") && (\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => setSessionLanguage(\"en\")}\r\n          >\r\n            Eng\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n  //\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { login } from \"../../services/http_operations\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { languages } from \"../../config\";\r\nimport \"./authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nconst userRef = React.createRef();\r\nconst pswRef = React.createRef();\r\nconst tenantRef = React.createRef();\r\n\r\nconst AuthPageComp = () => {\r\n  //const { location, replace } = useHistory();\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    const user = userRef.current.value;\r\n    const psw = pswRef.current.value;\r\n    const tenant = tenantRef.current.value;\r\n\r\n    try {\r\n      await login(user, psw, tenant);\r\n      window.location.replace(\"/\");\r\n    } catch (error) {\r\n      console.log({ error: error.response.data });\r\n      setMsg(error.response.data.message + \" : \" + error.response.data.details);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <div className=\"title-section\">Measurify</div>\r\n        <br />\r\n        <div className=\"subtitle-section\">From the edge to cloud and back</div>\r\n      </div>\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <h4>{locale().login}</h4>\r\n        <Form onSubmit={submitForm}>\r\n          <Form.Group className=\"mb-3\" controlId=\"username\">\r\n            <Form.Label>{locale().username}</Form.Label>\r\n            <Form.Control\r\n              ref={userRef}\r\n              type=\"text\"\r\n              placeholder={locale().username_suggestion}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n            <Form.Label>{locale().password}</Form.Label>\r\n            <Form.Control\r\n              type=\"password\"\r\n              ref={pswRef}\r\n              placeholder={locale().password_suggestion}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n            <Form.Label>{locale().tenant}</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              ref={tenantRef}\r\n              placeholder={locale().tenant_suggestion}\r\n            />\r\n          </Form.Group>\r\n          <Button variant=\"success\" type=\"submit\">\r\n            {locale().submit}\r\n          </Button>\r\n        </Form>\r\n        <br />\r\n        <div style={{ color: \"red\" }}>{msg}</div>\r\n        <br />\r\n        <div className=\"form-row row\">\r\n          <NavLink to={`/add/tenants`}>\r\n            <Button variant=\"outline-success\" size=\"sm\">\r\n              {locale().add_tenant}\r\n              <i\r\n                className=\"fa fa-plus-circle\"\r\n                aria-hidden=\"true\"\r\n                title={\"Add\"}\r\n                style={{\r\n                  width: 30 + \"px\",\r\n                  height: 30 + \"px\",\r\n                  marginRight: 10 + \"px\",\r\n                  opacity: 0.85,\r\n                }}\r\n              ></i>\r\n            </Button>\r\n          </NavLink>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AuthPage = AuthPageComp;\r\n","import React, { useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { website_name } from \"../../config\";\r\n\r\nimport \"./homePage.scss\";\r\n\r\nconst HomePageComp = () => {\r\n  useEffect(() => {});\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">{website_name}</header>\r\n      <main className=\"page-content\">\r\n        <div className=\"home-page\">\r\n          <div className=\"info-box\">\r\n            <div className=\"info-text\">\r\n              {locale().welcome_hp}\r\n              <br />\r\n              <br />\r\n              {locale().left_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().right_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().session_expire_info_hp}\r\n              <br />\r\n              <br />\r\n              <a\r\n                href=\"https://github.com/measurify/server/issues\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                title=\"https://github.com/measurify/server/issues\"\r\n              >\r\n                {locale().github_issue_page_hp}\r\n              </a>\r\n              <br />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const HomePage = HomePageComp;\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./notFoundPage.scss\";\r\n\r\nconst notFoundPageComp = () => {\r\n  return (\r\n    <div className=\"notFound-page\">\r\n      {locale().oh_no}\r\n      <br />\r\n      <br />\r\n      {locale().broken_link}\r\n      <br />\r\n      <br />\r\n      <a\r\n        href=\"https://github.com/measurify/server/issues\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        title=\"https://github.com/measurify/server/issues\"\r\n      >\r\n        {locale().github_issue_page_hp}\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NotFoundPage = notFoundPageComp;\r\n","//check if a generic object is default, according to its type\r\nexport const isDefault = (obj) => {\r\n  //undefined is considered default\r\n  if (obj === undefined) return true;\r\n  //null is considered default\r\n  if (obj == null) return true;\r\n  //Nan is default for numbers\r\n  if (typeof obj === \"number\") {\r\n    return isNaN(obj);\r\n  }\r\n\r\n  //default check for strings\r\n  if (typeof obj === \"string\") {\r\n    return obj === \"\";\r\n  }\r\n\r\n  //input field is an array\r\n  if (Array.isArray(obj)) {\r\n    if (obj.length === 0) return true;\r\n    let def = true;\r\n    obj.forEach((elem) => {\r\n      def = def && isDefault(elem);\r\n    });\r\n    return def;\r\n  }\r\n\r\n  //check all values if object\r\n  if (obj.constructor === Object) {\r\n    let def = true;\r\n    Object.entries(obj).forEach(([_, v]) => {\r\n      def = def && isDefault(v);\r\n    });\r\n    return def;\r\n  }\r\n};\r\n\r\n//non-default items lenght\r\nexport const nonDefaultLength = (obj) => {\r\n  if (Array.isArray(obj) === false) return -1;\r\n  return obj.filter((e) => !isDefault(e)).length;\r\n};\r\n\r\n//remove all default or empty field from an object, recursively\r\nexport const removeDefaultElements = (obj) => {\r\n  if (Array.isArray(obj)) {\r\n  }\r\n  if (obj.constructor === Object) {\r\n    const entr = Object.entries(obj);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      //check if value is an array\r\n      if (Array.isArray(entr[i][1])) {\r\n        for (let j = 0; j < entr[i][1].length; j++) {\r\n          if (\r\n            entr[i][1][j].constructor === Object ||\r\n            Array.isArray(entr[i][1][j])\r\n          ) {\r\n            removeDefaultElements(entr[i][1][j]);\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          } else {\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      //check if value is an Object\r\n      if (entr[i][1].constructor === Object) {\r\n        const subEntr = Object.entries(entr[i][1]);\r\n        for (let j = 0; j < subEntr.length; j++) {\r\n          if (\r\n            subEntr[i][1].constructor === Object ||\r\n            Array.isArray(subEntr[i][1])\r\n          ) {\r\n            removeDefaultElements(subEntr[i][1]);\r\n          } else {\r\n            if (isDefault(subEntr[i][1])) delete entr[i][1][subEntr[i][0]];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return obj;\r\n};\r\n\r\n//check if two objects (arrays, variables or objects) are equal\r\nexport const areEqual = (obj1, obj2) => {\r\n  //undefined check\r\n  if (obj1 === undefined || obj2 === undefined) return false;\r\n  //single value and ref check\r\n  if (obj1 === obj2) return true;\r\n\r\n  if (typeof obj1 !== typeof obj2) return false;\r\n\r\n  //one is array, other isn't\r\n  if (\r\n    (Array.isArray(obj1) && !Array.isArray(obj2)) ||\r\n    (!Array.isArray(obj1) && Array.isArray(obj2))\r\n  )\r\n    return false;\r\n\r\n  //both are array\r\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\r\n    //different length => not equal\r\n    if (obj1.length !== obj2.length) return false;\r\n    for (let i = 0; i < obj1.length; i++) {\r\n      if (!areEqual(obj1[i], obj2[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //one is object, other isn't\r\n  if (\r\n    (obj1.constructor === Object && obj2.constructor !== Object) ||\r\n    (obj1.constructor !== Object && obj2.constructor === Object)\r\n  )\r\n    return false;\r\n\r\n  //both are object\r\n  if (obj1.constructor === Object && obj2.constructor === Object) {\r\n    const k1 = Object.keys(obj1);\r\n    const k2 = Object.keys(obj2);\r\n    if (k1.length !== k2.length) return false;\r\n    if (!areEqual(k1, k2)) return false;\r\n\r\n    const v1 = Object.values(obj1);\r\n    const v2 = Object.values(obj2);\r\n    if (!areEqual(v1, v2)) return false;\r\n\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\n//capitalize the first letter of a string\r\nexport function capitalize(s) {\r\n  return s && s[0].toUpperCase() + s.slice(1);\r\n}\r\n\r\n//format string date into yyyy/mm/dd\r\nexport function FormatDate(dt) {\r\n  dt = dt.replace(\"T\", \" \");\r\n  return dt.slice(0, 19).replaceAll(\"-\", \"/\");\r\n}\r\n\r\n//format metadata [name1:value1 ; name2:value2]\r\nexport function FormatMetadata(dt) {\r\n  const str =\r\n    \"[ \" +\r\n    dt\r\n      .map((el) =>\r\n        el.name + \" : \" + el.value)\r\n      .join(\" ; \") +\r\n    \" ]\";\r\n  return (    \r\n      str.length <= 100\r\n        ? str\r\n        : str.slice(0, 97) + \"...\"    \r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport \"./navigation.scss\";\r\n\r\nimport locale from \"../../common/locale\";\r\nimport { refreshToken } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nimport { restrictionPages, pages, languages, website_name } from \"../../config\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { capitalize } from \"../../services/misc_functions\";\r\n\r\nfontawesome.library.add(\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck\r\n);\r\n\r\nlet intervalRef = React.createRef();\r\nlet loginTime = React.createRef();\r\n\r\nlet remainingSeconds = React.createRef();\r\nlet duration = React.createRef();\r\n\r\nlet role = React.createRef();\r\nlet username = React.createRef();\r\nlet tenant = React.createRef();\r\n\r\nexport default function Navigation() {\r\n  const [isOpened, setIsOpened] = useState(false);\r\n\r\n  const usr = localStorage.getItem(\"username\");\r\n  const rl = localStorage.getItem(\"user-role\");\r\n  const tn = localStorage.getItem(\"user-tenant\");\r\n\r\n  username.current = usr !== null ? usr : \"\";\r\n  role.current = rl !== null ? rl : \"\";\r\n  tenant.current = tn !== null && tn !== \"\" ? tn : \"-\";\r\n\r\n  //useeffect on change time\r\n  useEffect(() => {\r\n    //convert duration time in string format to milliseconds\r\n    function DurationToMilliSeconds() {\r\n      let exp = localStorage.getItem(\"token-expiration-time\");\r\n\r\n      if (exp === null) return 300;\r\n      if (exp.endsWith(\"h\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n      } else if (exp.endsWith(\"m\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n      } else if (exp.endsWith(\"s\")) {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n      //default case, right now the same as seconds\r\n      else {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n    }\r\n\r\n    //calculate remaining seconds and refresh token if required\r\n    function CalcEnding() {\r\n      let t0;\r\n      let remainingSec;\r\n      //if remaining time is already calculated, just decrement that number by 1\r\n      if (remainingSeconds.current !== null) {\r\n        remainingSec = remainingSeconds.current - 1;\r\n      }\r\n      //otherwise, calculate remaining seconds\r\n      else {\r\n        //check if login time is already defined, if it's null get it from localstorage or current time (refresh case)\r\n        if (loginTime.current === null) {\r\n          const retryLoginTime = localStorage.getItem(\"login-time\");\r\n          //if localstorage containst login time, use it and store it into state\r\n          if (retryLoginTime !== null) {\r\n            loginTime.current = retryLoginTime;\r\n            t0 = parseInt(retryLoginTime, 10);\r\n          }\r\n          //otherwise get it from current time and store it into state\r\n          else {\r\n            t0 = Date.now();\r\n            loginTime.current = t0;\r\n          }\r\n        }\r\n        //use logintime stored into state\r\n        else {\r\n          t0 = parseInt(loginTime.current, 10);\r\n        }\r\n        if (duration.current === null)\r\n          duration.current = DurationToMilliSeconds();\r\n        const endTime = t0 + duration.current;\r\n\r\n        remainingSec = (endTime - Date.now()) / 1000;\r\n      }\r\n\r\n      if (remainingSec < 60) {\r\n        clearInterval(intervalRef.current);\r\n        refreshToken().then(() => {\r\n          remainingSeconds.current = null;\r\n          loginTime.current = null;\r\n\r\n          intervalRef.current = setInterval(() => {\r\n            CalcEnding();\r\n          }, 1000);\r\n          return;\r\n        });\r\n      }\r\n      if (remainingSec <= 0) {\r\n        localStorage.clear();\r\n        //session expired, automatically logout\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n\r\n      //const mins = Math.floor(remainingSec / 60);\r\n      //const secs = Math.floor(remainingSec % 60);\r\n\r\n      remainingSeconds.current = parseInt(remainingSec, 10);\r\n    }\r\n\r\n    intervalRef.current = setInterval(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, []);\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIconRole() {\r\n    if (role.current === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role.current === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role.current === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role.current === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {isOpened ? (\r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n        ) : (\r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        )}\r\n      </Button>\r\n      <NavLink to=\"/home\" className=\"nav-wrap\">\r\n        {website_name}\r\n      </NavLink>\r\n      <hr />\r\n      <div className={`app-nav-wrapper ${isOpened ? \"opened\" : \"\"}`}>\r\n        <div className=\"app-nav-links\">\r\n          <hr />\r\n          <div className=\"data-wrapper\">\r\n            <NavLink to={`/viewProfile/`} key={`viewProfile`}>\r\n              {locale().welcome + \" \"}\r\n              <b>{username.current}</b>\r\n            </NavLink>\r\n            <div style={{ paddingLeft: 10 + \"px\" }}>\r\n              <h3>\r\n                {locale().role + \" \"}\r\n                {renderIconRole()}\r\n              </h3>\r\n            </div>\r\n            <div style={{ paddingLeft: 10 + \"px\" }}>\r\n              <h3>\r\n                {locale().tenant + \" \"}\r\n                <b>{tenant.current}</b>\r\n              </h3>\r\n            </div>\r\n            <br />\r\n            <div style={{ paddingLeft: 20 + \"px\", paddingBottom: 20 + \"px\" }}>\r\n              <Button variant=\"outline-danger\" onClick={() => logOut()}>\r\n                {locale().logout}\r\n              </Button>\r\n            </div>\r\n            {languages.length > 1 && (\r\n              <React.Fragment>\r\n                <hr />\r\n                <h2>\r\n                  <LanguageSelector />\r\n                </h2>\r\n              </React.Fragment>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"app-nav-text\">{locale().tools}</div>\r\n          <hr />\r\n          {Object.keys(pages).map((k) => {\r\n            //check if user can access to the page\r\n            if (              \r\n              (restrictionPages[k] !== undefined &&\r\n                !restrictionPages[k].includes(role.current))\r\n            ) {\r\n              return \"\";\r\n            }\r\n            return (\r\n              <NavLink\r\n                to={`/` + k}\r\n                className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n                //activeClassName=\"active\"\r\n                key={k}\r\n                onClick={() => setIsOpened(false)}\r\n              >\r\n                {capitalize(k)}\r\n              </NavLink>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { viewFields } from \"../../config\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faEye,\r\n  faPencilAlt,\r\n  faCopy,\r\n  faCodeBranch,faDownload\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\nimport {\r\n  Button,\r\n  OverlayTrigger,\r\n  Popover,\r\n  Accordion,\r\n  Table,\r\n} from \"react-bootstrap\";\r\n\r\nimport { delete_generic, delete_version } from \"../../services/http_operations\";\r\n\r\nfontawesome.library.add(faEye, faPencilAlt, faCopy, faCodeBranch,faDownload);\r\n\r\nfunction ActionContent(props) {\r\n  const toShow = {};\r\n  viewFields[props.resType].forEach((k) => {\r\n    if (k.constructor === Object) {\r\n      Object.keys(k).forEach((subK) => {\r\n        if (Array.isArray(props.resource[subK])) {\r\n          toShow[subK] = props.resource[subK].map((e) => {\r\n            const row = {};\r\n            k[subK].forEach((f) => {\r\n              row[f] = e[f];\r\n            });\r\n            return row;\r\n          });\r\n        } else {\r\n          toShow[subK] = props.resource[subK];\r\n        }\r\n      });\r\n    } else {\r\n      if (Object.keys(props.resource).includes(k)) {\r\n        toShow[k] = props.resource[k];\r\n      }\r\n    }\r\n  });\r\n\r\n  //render accordion with table when field is array of object\r\n  return UnrollView(toShow);\r\n}\r\n\r\nfunction UnrollView(item) {\r\n  return (\r\n    <Accordion defaultActiveKey={0} size={\"lg\"}>\r\n      {React.Children.toArray(\r\n        Object.entries(item).map(([key, value], i) => {\r\n          return (\r\n            <Accordion.Item eventKey={i}>\r\n              <Accordion.Header>\r\n                <b>{key}</b>\r\n              </Accordion.Header>\r\n              <Accordion.Body>\r\n                {value instanceof Object ? (\r\n                  Array.isArray(value) ? (\r\n                    value[0] !== undefined ? (\r\n                      Object.values(value[0]).some(\r\n                        (e) => e instanceof Object\r\n                      ) ? (\r\n                        React.Children.toArray(\r\n                          value.map((single, i) => {\r\n                            return (\r\n                              <Accordion>\r\n                                <Accordion.Item eventKey=\"0\">\r\n                                  <Accordion.Header>\r\n                                    {key===\"datasets\"?single.name: key} {key!==\"datasets\"?<i>[{i}]</i>:\"\"}\r\n                                  </Accordion.Header>\r\n                                  <Accordion.Body>\r\n                                    {UnrollView(single)}\r\n                                  </Accordion.Body>\r\n                                </Accordion.Item>\r\n                              </Accordion>\r\n                            );\r\n                          })\r\n                        )\r\n                      ) : value[0] instanceof Object ? (\r\n                        <Table responsive striped bordered hover size=\"sm\">\r\n                          <thead>\r\n                            <tr>\r\n                              {React.Children.toArray(\r\n                                Object.keys(value[0]).map((e) => {\r\n                                  return <th>{e}</th>;\r\n                                })\r\n                              )}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {React.Children.toArray(\r\n                              value.map((row) => {\r\n                                return (\r\n                                  <tr>\r\n                                    {React.Children.toArray(\r\n                                      Object.values(row).map((v) => {\r\n                                        return <td>{v}</td>;\r\n                                      })\r\n                                    )}\r\n                                  </tr>\r\n                                );\r\n                              })\r\n                            )}\r\n                          </tbody>\r\n                        </Table>\r\n                      ) : (\r\n                        \"[ \" + value.join(\" , \") + \" ]\"\r\n                      )\r\n                    ) : (\r\n                      \"[ ]\"\r\n                    )\r\n                  ) : (\r\n                    <Table responsive striped bordered hover size=\"sm\">\r\n                      <tbody>\r\n                        {React.Children.toArray(\r\n                          Object.entries(value).map((entr) => {\r\n                            return (\r\n                              <tr>\r\n                                <td>\r\n                                  <b>{entr[0]}</b>\r\n                                </td>\r\n                                <td>{entr[1]}</td>\r\n                              </tr>\r\n                            );\r\n                          })\r\n                        )}\r\n                      </tbody>\r\n                    </Table>\r\n                  )\r\n                ) : value === undefined || value == null ? (\r\n                  <i>None</i>\r\n                ) : (\r\n                  value\r\n                )}\r\n              </Accordion.Body>\r\n            </Accordion.Item>\r\n          );\r\n        })\r\n      )}\r\n    </Accordion>\r\n  );\r\n}\r\n\r\nexport default function ActionManager(props) {\r\n  const [res, setRes] = useState(undefined);\r\n  useEffect(() => {\r\n    //use effect body\r\n  }, [props]);\r\n\r\n  const viewPopover =\r\n    res !== undefined ? (\r\n      <Popover\r\n        id=\"popover-positioned-left\"\r\n        style={{\r\n          width: 20 + \"vw\",\r\n          minWidth:\r\n            /Mobi/i.test(window.navigator.userAgent) == true ? 250 : 400 + \"px\",\r\n        }}\r\n      >\r\n        <Popover.Header as=\"h3\">View Resource</Popover.Header>\r\n        <Popover.Body>\r\n          <ActionContent resource={res} resType={props.resType} />\r\n        </Popover.Body>\r\n      </Popover>\r\n    ) : (\r\n      <Popover id=\"popover-positioned-left\" style={{ width: 20 + \"vw\" }}>\r\n        <Popover.Header as=\"h3\">\r\n          Loading<Popover.Body></Popover.Body>\r\n        </Popover.Header>\r\n      </Popover>\r\n    );\r\n  if (props.action === \"view\") {\r\n    return (\r\n      <OverlayTrigger\r\n        trigger=\"click\"\r\n        placement=\"left\"\r\n        overlay={viewPopover}\r\n        rootClose={true}\r\n      >\r\n        <Button\r\n          variant=\"link\"\r\n          size=\"sm\"\r\n          onClick={() => {\r\n            setRes(props.takeSingle(props.id));\r\n          }}\r\n        >\r\n          <i\r\n            className=\"fa fa-eye\"\r\n            aria-hidden=\"true\"\r\n            title=\"View\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n  if (props.action === \"downloadVersion\") {\r\n    return (\r\n        <Button\r\n          variant=\"link\"\r\n          size=\"sm\"\r\n          onClick={() => {\r\n            setRes(props.downloadSingle(props.id));\r\n          }}\r\n        >\r\n          <i\r\n            className=\"fa fa-download\"\r\n            aria-hidden=\"true\"\r\n            title=\"Download\"\r\n            style={{\r\n              width: 25 + \"px\",\r\n              height: 25 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n    );\r\n  }\r\n  if (props.action === \"delete\") {\r\n    return (\r\n      <Button\r\n        variant=\"link\"\r\n        size=\"sm\"\r\n        onClick={async () => {\r\n          const result = window.confirm(\"Want to delete: \" + props.id + \"?\");\r\n          if (result) {\r\n            try {\r\n              const response = await delete_generic(props.resType, props.id);\r\n\r\n              if (response.response.status === 200) {\r\n                props.removeSingle(props.id);\r\n              }\r\n            } catch (error) {\r\n              console.log(error);\r\n            }\r\n          }\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fa fa-times\"\r\n          aria-hidden=\"true\"\r\n          title=\"Delete\"\r\n          style={{\r\n            width: 30 + \"px\",\r\n            height: 30 + \"px\",\r\n            marginRight: 10 + \"px\",\r\n            opacity: 0.85,\r\n          }}\r\n        ></i>\r\n      </Button>\r\n    );\r\n  }\r\n  if (props.action === \"deleteVersion\") {\r\n    return (\r\n      <Button\r\n        variant=\"link\"\r\n        size=\"sm\"\r\n        onClick={async () => {\r\n          const result = window.confirm(\"Want to delete: \" + props.id + \"?\");\r\n          if (result) {\r\n            try {\r\n              const response = await delete_version(\r\n                props.resType,\r\n                props.idResource,\r\n                props.id\r\n              );\r\n\r\n              if (response.response.status === 200) {\r\n                props.removeSingle(props.id);\r\n              }\r\n            } catch (error) {\r\n              console.log(error);\r\n            }\r\n          }\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fa fa-times\"\r\n          aria-hidden=\"true\"\r\n          title=\"Delete\"\r\n          style={{\r\n            width: 30 + \"px\",\r\n            height: 30 + \"px\",\r\n            marginRight: 10 + \"px\",\r\n            opacity: 0.85,            \r\n          }}\r\n        ></i>\r\n      </Button>\r\n    ) ;\r\n  }   \r\n  if (props.action === \"edit\") {\r\n    return (\r\n      <NavLink to={`/edit/` + props.resType + \"/\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-pencil-alt\"\r\n            aria-hidden=\"true\"\r\n            title=\"Edit\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n  if (props.action === \"duplicate\") {\r\n    return (\r\n      <NavLink to={`/add/` + props.resType + \"/?from=\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-copy\"\r\n            aria-hidden=\"true\"\r\n            title=\"Duplicate\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n  if (props.action === \"versioning\") {\r\n    return (\r\n      <NavLink to={`/versions/` + props.resType + \"/\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-code-branch\"\r\n            aria-hidden=\"true\"\r\n            title=\"Version Management\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n  return <div />;\r\n}\r\n","import React from \"react\";\r\nimport { aliasPages } from \"../../config\";\r\n\r\nimport { Table } from \"react-bootstrap\";\r\nimport ActionManager from \"../actionsManager/actionsManager\";\r\nimport { FormatDate, FormatMetadata } from \"../../services/misc_functions\";\r\n\r\nexport default function ContentTable(props) {\r\n  if (props.header === undefined || props.resources === undefined)\r\n    return <div>Loading</div>;\r\n  if (props.header.includes(\"actions\") && props.actions === undefined)\r\n    return <div>Loading</div>;\r\n  return (\r\n    <div>\r\n      <Table responsive striped bordered hover>\r\n        <thead>\r\n          <tr key={\"header\"}>\r\n            {React.Children.toArray(\r\n              props.header.map((e) => {\r\n                if (aliasPages[props.resType] !== undefined)\r\n                  if (aliasPages[props.resType][e] !== undefined)\r\n                    return <th>{aliasPages[props.resType][e]}</th>;\r\n                return <th>{e}</th>;\r\n              })\r\n            )}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {React.Children.toArray(\r\n            props.resources.map((row, index) => {\r\n              return (\r\n                <tr>\r\n                  {React.Children.toArray(\r\n                    props.header.map((e) => {\r\n                      if (e === \"actions\") {\r\n                        return (\r\n                          <td>\r\n                            {props.actions.includes(\"view\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"view\"\r\n                                k={index + \"_view\"}\r\n                                id={row[\"_id\"]}\r\n                                takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"downloadVersion\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"downloadVersion\"\r\n                                k={index + \"_downloadVersion\"}\r\n                                idResource={props.idResource}\r\n                                id={row[\"ordinal\"]}\r\n                                downloadSingle={props.downloadSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"edit\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"edit\"\r\n                                k={index + \"_edit\"}\r\n                                id={row[\"_id\"]}\r\n                                //takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"duplicate\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"duplicate\"\r\n                                k={index + \"_duplicate\"}\r\n                                id={row[\"_id\"]}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"versioning\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"versioning\"\r\n                                id={row[\"_id\"]}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"delete\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"delete\"\r\n                                k={index + \"_delete\"}\r\n                                id={row[\"_id\"]}\r\n                                removeSingle={props.removeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"deleteVersion\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"deleteVersion\"\r\n                                k={index + \"_deleteVersion\"}\r\n                                idResource={props.idResource}\r\n                                id={row[\"ordinal\"]}\r\n                                removeSingle={props.removeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                          </td>\r\n                        );\r\n                      }\r\n                      if (row[e] === undefined) return;\r\n                      if (Array.isArray(row[e])) {\r\n                        if (\r\n                          row[e][0] !== undefined &&\r\n                          row[e][0].constructor === Object\r\n                        ) {                          \r\n                          if (e === \"metadata\") {\r\n                            return <td>{FormatMetadata(row[e])}</td>;\r\n                          }\r\n                          const str =\r\n                            \"[ \" +\r\n                            row[e]\r\n                              .map((el) =>\r\n                                Object.entries(el)\r\n                                  .map((e) => e[0] + \" : \" + e[1])\r\n                                  .join(\" - \")\r\n                              )\r\n                              .join(\" -- \") +\r\n                            \" ]\";\r\n                          return (\r\n                            <td>\r\n                              {str.length <= 100\r\n                                ? str\r\n                                : str.slice(0, 97) + \"...\"}\r\n                            </td>\r\n                          );\r\n                        }\r\n                        return <td>{\"[ \" + row[e].join(\" , \") + \" ]\"}</td>;\r\n                      }\r\n                      if (e === \"date\" || e === \"timestamp\")\r\n                        return <td>{FormatDate(row[e])}</td>;\r\n                      return <td>{row[e]}</td>;\r\n                    })\r\n                  )}\r\n                </tr>\r\n              );\r\n            })\r\n          )}\r\n        </tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { pages, pageActions, addFields } from \"../../config\";\r\nimport { get_generic } from \"../../services/http_operations\";\r\nimport ContentTable from \"../contentTable/contentTable\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { Pagination } from \"react-bootstrap\";\r\nimport \"./page.scss\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { faPlusCircle } from \"@fortawesome/fontawesome-free-solid\";\r\nfontawesome.library.add(faPlusCircle);\r\n\r\nexport default function Page(params) {\r\n  const { page } = useParams();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [resource, setResource] = useState(undefined);\r\n  const [header, setHeader] = useState(undefined);\r\n  const [actions, setActions] = useState(undefined);\r\n\r\n  const [pageNum, setPageNum] = useState(1);\r\n  const [pageLimit, setPageLimit] = useState(1);\r\n\r\n  const [hasNext, setHasNext] = useState();\r\n  const [hasPrev, setHasPrev] = useState();\r\n\r\n  const [prevPage, setPrevPage] = useState();\r\n  const [nextPage, setNextPage] = useState();\r\n\r\n  const [totalPages, setTotalPages] = useState();\r\n\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(page, qs);\r\n\r\n        // set state with the result\r\n        setHeader(pages[page]);\r\n        setResource(response.docs);\r\n        if (pageActions[page] !== undefined) setActions(pageActions[page]);\r\n\r\n        setHasNext(response.hasNextPage);\r\n        setHasPrev(response.hasPrevPage);\r\n\r\n        setTotalPages(response.totalPages);\r\n\r\n        setPrevPage(response.prevPage);\r\n        setNextPage(response.nextPage);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        setHeader(undefined);\r\n        setResource(undefined);\r\n        setHasNext(undefined);\r\n        setHasPrev(undefined);\r\n        setTotalPages(undefined);\r\n        setPrevPage(undefined);\r\n        setNextPage(undefined);\r\n      }\r\n    };\r\n\r\n    //get params for pagination\r\n    const num =\r\n      searchParams.get(\"page\") !== null ? searchParams.get(\"page\") : 1;\r\n    setPageNum(num);\r\n\r\n    const limit =\r\n      searchParams.get(\"limit\") !== null ? searchParams.get(\"limit\") : 10;\r\n    setPageLimit(limit);\r\n\r\n    const qs = { page: num, limit: limit };\r\n\r\n    // call the function\r\n    fetchData(qs)\r\n      // make sure to catch any error\r\n      .catch(console.error);\r\n  }, [params, page, searchParams]);\r\n\r\n  const takeSingle = (id) => {\r\n    return resource.find((r) => r._id === id);\r\n  };\r\n\r\n  const removeSingle = (id) => {\r\n    let tmp = resource.filter((el) => {\r\n      return el._id !== id;\r\n    });\r\n    setResource(tmp);\r\n  };\r\n\r\n  const RenderPagination = () => {\r\n    const prevEllipsis = parseInt(pageNum, 10) - 2 > 0;\r\n    const nextEllipsis = parseInt(pageNum, 10) + 2 < totalPages;\r\n\r\n    return (\r\n      <div style={{ display: \"inline-flex\", width: 100 + \"%\" }}>\r\n        <Pagination\r\n          style={{\r\n            alignSelf: \"center\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n          }}\r\n        >\r\n          <Pagination.First\r\n            disabled={pageNum === 1}\r\n            onClick={() => setSearchParams({ page: 1, limit: pageLimit })}\r\n          />\r\n          <Pagination.Prev\r\n            disabled={!hasPrev}\r\n            onClick={() =>\r\n              setSearchParams({ page: prevPage, limit: pageLimit })\r\n            }\r\n          />\r\n          {prevEllipsis && <Pagination.Ellipsis />}\r\n          {parseInt(pageNum, 10) - 1 > 0 && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) - 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) - 1}\r\n            </Pagination.Item>\r\n          )}\r\n          <Pagination.Item>\r\n            <b>{pageNum}</b>\r\n          </Pagination.Item>\r\n          {parseInt(pageNum, 10) + 1 <= totalPages && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) + 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) + 1}\r\n            </Pagination.Item>\r\n          )}\r\n          {nextEllipsis && <Pagination.Ellipsis />}\r\n\r\n          <Pagination.Next\r\n            disabled={!hasNext}\r\n            onClick={() =>\r\n              setSearchParams({ page: nextPage, limit: pageLimit })\r\n            }\r\n          />\r\n          <Pagination.Last\r\n            disabled={pageNum === totalPages}\r\n            onClick={() =>\r\n              setSearchParams({ page: totalPages, limit: pageLimit })\r\n            }\r\n          />\r\n        </Pagination>\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        {page}\r\n\r\n        {addFields[page] !== undefined && (\r\n          <NavLink to={`/add/` + page + \"/\"} key={page + \"_add_navlink\"}>\r\n            <Button variant=\"link\" size=\"sm\" key={page + \"button\"}>\r\n              <i\r\n                key={page + \"icon\"}\r\n                className=\"fa fa-plus-circle\"\r\n                aria-hidden=\"true\"\r\n                title={\"Add\"}\r\n                style={{\r\n                  width: 30 + \"px\",\r\n                  height: 30 + \"px\",\r\n                  marginRight: 10 + \"px\",\r\n                  opacity: 0.85,\r\n                }}\r\n              ></i>\r\n            </Button>\r\n          </NavLink>\r\n        )}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <ContentTable\r\n          resType={page}\r\n          header={header}\r\n          resources={resource}\r\n          actions={actions}\r\n          takeSingle={takeSingle}\r\n          removeSingle={removeSingle}\r\n        />\r\n        <RenderPagination />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { put_generic, login } from \"../../services/http_operations\";\r\nimport \"../page/page.scss\";\r\nexport default function ProfilePage(params) {\r\n  //save in status informations of profile\r\n  const [username, setUsername] = useState(\"\");\r\n  const [role, setRole] = useState(\"\");\r\n  const [tenant, setTenant] = useState(\"\");\r\n  const [oldPassword, setOldPassword] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const [msg, setMsg] = useState(\"\");\r\n  function renderIconRole() {\r\n    if (role === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    const username = localStorage.getItem(\"username\");\r\n    const role = localStorage.getItem(\"user-role\");\r\n    const tenant = localStorage.getItem(\"user-tenant\");\r\n    setUsername(username !== null ? username : \"\");\r\n    setRole(role !== null ? role : \"\");\r\n    setTenant(tenant !== null && tenant !== \"\" ? tenant : \"-\");\r\n  }, []);\r\n  const submitPassword = async (e) => {\r\n    e.preventDefault();\r\n    if (oldPassword === \"\") {\r\n      setMsg(locale().old_pass_empty);\r\n    }\r\n    if (password !== passwordConfirm) {\r\n      setMsg(locale().pass_not_match);\r\n      return;\r\n    }\r\n    if (password === \"\" || passwordConfirm === \"\") {\r\n      setMsg(locale().pass_not_null);\r\n      return;\r\n    }\r\n    try {\r\n      await login(\r\n        username,\r\n        oldPassword,\r\n        tenant !== \"-\" ? tenant : undefined,\r\n        false\r\n      );\r\n    } catch (error) {\r\n      setMsg(locale().old_pass_wrong);\r\n      return;\r\n    }\r\n    const result = window.confirm(locale().pass_change_confirm);\r\n    if (result) {\r\n      try {\r\n        const response = await put_generic(\r\n          \"users\",\r\n          { password: password },\r\n          username\r\n        );\r\n        setOldPassword(\"\");\r\n        setPassword(\"\");\r\n        setPasswordConfirm(\"\");\r\n        if (response.response.status === 200) {\r\n          setMsg(locale().password_changed);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        {locale().welcome}&nbsp;<b>{username}</b>:&nbsp;\r\n        {locale().profile_page_desc}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Container fluid>\r\n          <Row>\r\n            <Col xs={1}>Username:&nbsp;</Col>\r\n            <Col>\r\n              <b>{username}</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>{locale().role}</Col>\r\n            <Col>\r\n              {role}&nbsp;\r\n              {renderIconRole()}\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>{locale().tenant + \" \"}</Col>\r\n            <Col>\r\n              <b>{tenant}</b>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <hr />\r\n        <Container fluid>\r\n          <Col>\r\n            <Row>\r\n              <b>Edit password</b>\r\n            </Row>\r\n          </Col>\r\n          <Row>\r\n            <Col>\r\n              <Form onSubmit={submitPassword}>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setOldPassword(e.target.value);\r\n                      }}\r\n                      value={oldPassword}\r\n                      placeholder={locale().enter + \" old password\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setPassword(e.target.value);\r\n                      }}\r\n                      value={password}\r\n                      placeholder={locale().enter + \" new password\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setPasswordConfirm(e.target.value);\r\n                      }}\r\n                      value={passwordConfirm}\r\n                      placeholder={locale().repeat + \" new password\"}\r\n                      aria-describedby=\"passwordHelpBlock\"\r\n                    />\r\n                    <Form.Text id=\"passwordHelpBlock\" muted>\r\n                      {msg}\r\n                    </Form.Text>\r\n                  </Form.Group>\r\n                </Row>\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                  {locale().submit}\r\n                </Button>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </main>\r\n    </div>\r\n  );\r\n}","import \"./unauthorizedPage.scss\";\r\n\r\nimport React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nexport default function UnauthorizedPage() {\r\n  return (\r\n    <div className=\"unAuth-page\">\r\n      <div className=\"info-box\">\r\n        <div className=\"info-text\">{locale().unauthorised_user}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst AppContext = React.createContext();\r\n\r\nexport default AppContext;\r\n","import {\r\n  Button,\r\n  Badge,\r\n  Offcanvas,\r\n  Toast,\r\n  ToastContainer,\r\n} from \"react-bootstrap\";\r\nimport React, { useState, useContext, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport \"./notificationBar.scss\";\r\nimport AppContext from \"../../context\";\r\nimport { layout } from \"../../config\";\r\nconst oldNotifications = React.createRef();\r\n\r\nexport default function NotificationBar(props) {\r\n  const [show, setShow] = useState(false);\r\n  const [highlight, setHighlight] = useState(false);\r\n\r\n  let layoutRef = React.useRef();\r\n  const myNotifications = useContext(AppContext).notifications;\r\n  oldNotifications.current = 0;\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  /*\r\n  handleClick = () => {\r\n    this.setState({ highlight: true });\r\n    setTimeout(() => {\r\n      this.setState({ highlight: false });\r\n    }, 2000);\r\n  };*/\r\n\r\n  useEffect(() => {\r\n    if (oldNotifications.current < myNotifications.notifications.length) {\r\n      oldNotifications.current = myNotifications.notifications.length;\r\n\r\n      setHighlight(true);\r\n      setTimeout(() => {\r\n        setHighlight(false);\r\n      }, 600);\r\n    }\r\n  }, [myNotifications.notifications]);\r\n\r\n  //mobile view only allowed to be vertical\r\n  if (/Mobi/i.test(window.navigator.userAgent) === true) {\r\n    layoutRef.current = \"vertical\";\r\n  } else {\r\n    layoutRef.current = layout;\r\n  }\r\n  const errorNot = myNotifications.notifications.filter(\r\n    (e) => e.name === \"error\"\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className=\"notificationBar\"\r\n      style={\r\n        layoutRef.current === \"vertical\" &&\r\n        /Mobi/i.test(window.navigator.userAgent) === false\r\n          ? { height: 100 + \"vh\" }\r\n          : {}\r\n      }\r\n    >\r\n      <Button\r\n        variant=\"link\"\r\n        onClick={() => {\r\n          handleShow();\r\n        }}\r\n        style={{\r\n          color: \"#fff\",\r\n          textDecoration: \"none\",\r\n        }}\r\n      >\r\n        {locale().notifications}&nbsp;\r\n        <Badge\r\n          pill\r\n          bg={errorNot.length > 0 ? \"danger\" : \"success\"}\r\n          className={`element${highlight ? \" highlight\" : \"\"}`}\r\n        >\r\n          {myNotifications.notifications.length}\r\n        </Badge>\r\n        <span className=\"visually-hidden\">Unread notifications</span>\r\n      </Button>\r\n\r\n      <Offcanvas\r\n        style={{\r\n          backgroundColor: \"#123651\",\r\n          color: \"#fff\",\r\n        }}\r\n        show={show}\r\n        onHide={handleClose}\r\n        placement=\"end\"\r\n        name={\"notification_bar\"}\r\n        scroll={false}\r\n        backdrop={true}\r\n        keyboard={true}\r\n      >\r\n        <Offcanvas.Header>\r\n          <Offcanvas.Title>\r\n            {locale().notifications}\r\n            &nbsp;\r\n            <Badge pill bg={errorNot.length > 0 ? \"danger\" : \"success\"}>\r\n              {myNotifications.notifications.length}\r\n            </Badge>\r\n            &nbsp;&nbsp;&nbsp;\r\n            <Button variant=\"outline-secondary\" onClick={() => handleClose()}>\r\n              {locale().close + \" \" + locale().notifications}\r\n            </Button>\r\n          </Offcanvas.Title>\r\n        </Offcanvas.Header>\r\n        <Offcanvas.Body>\r\n          <div\r\n            style={{\r\n              width: 100 + \"%\",\r\n              height: 100 + \"%\",\r\n            }}\r\n          >\r\n            {myNotifications.notifications.length !== 0 && (\r\n              <Button\r\n                variant=\"warning\"\r\n                onClick={() => myNotifications.ClearNotifications()}\r\n              >\r\n                {locale().clear_all}\r\n              </Button>\r\n            )}\r\n\r\n            <ToastContainer>\r\n              {myNotifications.notifications.map((notification, index) => {\r\n                let type;\r\n                if (notification.name === \"info\") type = \"success\";\r\n                if (notification.name === \"error\") type = \"danger\";\r\n                return (\r\n                  <Toast\r\n                    className=\"d-inline-block m-1\"\r\n                    key={\"notification_\" + index}\r\n                    bg={type}\r\n                    animation={true}\r\n                    onClose={() => {\r\n                      myNotifications.RemoveNotification(index);\r\n                    }}\r\n                  >\r\n                    <Toast.Header>\r\n                      <img\r\n                        src=\"holder.js/20x20?text=%20\"\r\n                        className=\"rounded me-2\"\r\n                        alt=\"\"\r\n                      />\r\n                      <strong className=\"me-auto\">{notification.name}</strong>\r\n                      <small>{notification.time.slice(0, 15)}</small>\r\n                    </Toast.Header>\r\n                    <Toast.Body>{notification.msg}</Toast.Body>\r\n                  </Toast>\r\n                );\r\n              })}\r\n            </ToastContainer>\r\n          </div>\r\n        </Offcanvas.Body>\r\n      </Offcanvas>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Button, Container, Row, Col } from \"react-bootstrap\";\r\nimport NotificationBar from \"../notificationBar/notificationBar\";\r\nimport \"./horizontalNavigationBar.scss\";\r\n\r\nimport locale from \"../../common/locale\";\r\nimport { refreshToken } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nimport { pages, languages, website_name } from \"../../config\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { capitalize } from \"../../services/misc_functions\";\r\n\r\nfontawesome.library.add(\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck\r\n);\r\n\r\nlet intervalRef = React.createRef();\r\nlet loginTime = React.createRef();\r\n\r\nlet remainingSeconds = React.createRef();\r\nlet duration = React.createRef();\r\n\r\nlet role = React.createRef();\r\nlet username = React.createRef();\r\nlet tenant = React.createRef();\r\n\r\nexport default function HorizontalNavigationBar() {\r\n  const [isOpened, setIsOpened] = useState(false);\r\n\r\n  const usr = localStorage.getItem(\"username\");\r\n  const rl = localStorage.getItem(\"user-role\");\r\n  const tn = localStorage.getItem(\"user-tenant\");\r\n\r\n  username.current = usr !== null ? usr : \"\";\r\n  role.current = rl !== null ? rl : \"\";\r\n  tenant.current = tn !== null && tn !== \"\" ? tn : \"-\";\r\n\r\n  //useeffect on change time\r\n  useEffect(() => {\r\n    //convert duration time in string format to milliseconds\r\n    function DurationToMilliSeconds() {\r\n      let exp = localStorage.getItem(\"token-expiration-time\");\r\n\r\n      if (exp === null) return 300;\r\n      if (exp.endsWith(\"h\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n      } else if (exp.endsWith(\"m\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n      } else if (exp.endsWith(\"s\")) {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n      //default case, right now the same as seconds\r\n      else {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n    }\r\n\r\n    //calculate remaining seconds and refresh token if required\r\n    function CalcEnding() {\r\n      let t0;\r\n      let remainingSec;\r\n      //if remaining time is already calculated, just decrement that number by 1\r\n      if (remainingSeconds.current !== null) {\r\n        remainingSec = remainingSeconds.current - 1;\r\n      }\r\n      //otherwise, calculate remaining seconds\r\n      else {\r\n        //check if login time is already defined, if it's null get it from localstorage or current time (refresh case)\r\n        if (loginTime.current === null) {\r\n          const retryLoginTime = localStorage.getItem(\"login-time\");\r\n          //if localstorage containst login time, use it and store it into state\r\n          if (retryLoginTime !== null) {\r\n            loginTime.current = retryLoginTime;\r\n            t0 = parseInt(retryLoginTime, 10);\r\n          }\r\n          //otherwise get it from current time and store it into state\r\n          else {\r\n            t0 = Date.now();\r\n            loginTime.current = t0;\r\n          }\r\n        }\r\n        //use logintime stored into state\r\n        else {\r\n          t0 = parseInt(loginTime.current, 10);\r\n        }\r\n        if (duration.current === null)\r\n          duration.current = DurationToMilliSeconds();\r\n        const endTime = t0 + duration.current;\r\n\r\n        remainingSec = (endTime - Date.now()) / 1000;\r\n      }\r\n\r\n      if (remainingSec < 60) {\r\n        clearInterval(intervalRef.current);\r\n        refreshToken().then(() => {\r\n          remainingSeconds.current = null;\r\n          loginTime.current = null;\r\n\r\n          intervalRef.current = setInterval(() => {\r\n            CalcEnding();\r\n          }, 1000);\r\n          return;\r\n        });\r\n      }\r\n      if (remainingSec <= 0) {\r\n        localStorage.clear();\r\n        //session expired, automatically logout\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n\r\n      //const mins = Math.floor(remainingSec / 60);\r\n      //const secs = Math.floor(remainingSec % 60);\r\n\r\n      remainingSeconds.current = parseInt(remainingSec, 10);\r\n    }\r\n\r\n    intervalRef.current = setInterval(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, []);\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIconRole() {\r\n    if (role.current === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role.current === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role.current === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role.current === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"horizontal-nav\">\r\n      <div className=\"horizontal-nav-links\">\r\n        <div className=\"data-wrapper\">\r\n          <Container fluid>\r\n            <Row style={{ padding: 0 }}>\r\n              <Col>\r\n                <NavLink to=\"/home\" className=\"nav-wrap\">\r\n                  {website_name}\r\n                </NavLink>\r\n              </Col>\r\n              <Col>\r\n                <NavLink to={`/viewProfile/`} key={`viewProfile`}>\r\n                  {locale().welcome + \" \"}\r\n                  <b>{username.current}</b>\r\n                </NavLink>\r\n              </Col>\r\n              <Col>\r\n                <div className=\"horizontal-nav-text\">\r\n                  {locale().role + \" \"}\r\n                  {renderIconRole()}\r\n                </div>\r\n              </Col>\r\n              <Col>\r\n                <div className=\"horizontal-nav-text\">\r\n                  {locale().tenant + \" \"}\r\n                  <b>{tenant.current}</b>\r\n                </div>\r\n              </Col>\r\n              <Col>\r\n                <Button variant=\"outline-danger\" onClick={() => logOut()}>\r\n                  {locale().logout}\r\n                </Button>\r\n              </Col>\r\n\r\n              {languages.length > 1 && (\r\n                <Col>\r\n                  <LanguageSelector />\r\n                </Col>\r\n              )}\r\n              <Col>\r\n                <NotificationBar />\r\n              </Col>\r\n            </Row>\r\n            <Row style={{ padding: 0 }}>\r\n              <hr />\r\n              <div\r\n                style={{\r\n                  justifyContent: \"center\",\r\n                  alignItems: \"center\",\r\n                  alignSelf: \"flex-start\",\r\n                }}\r\n              >\r\n                {locale().tools}\r\n              </div>\r\n            </Row>\r\n            <Row style={{ padding: 0 }}>\r\n              {React.Children.toArray(\r\n                Object.keys(pages).map((k) => {\r\n                  return (\r\n                    <Col>\r\n                      <NavLink\r\n                        to={`/` + k}\r\n                        className={(navData) =>\r\n                          navData.isActive ? \"active\" : \"\"\r\n                        }\r\n                        //activeClassName=\"active\"\r\n                        key={k}\r\n                        onClick={() => setIsOpened(false)}\r\n                      >\r\n                        {capitalize(k)}\r\n                      </NavLink>\r\n                    </Col>\r\n                  );\r\n                })\r\n              )}\r\n            </Row>\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { nonDefaultLength } from \"../../services/misc_functions\";\r\nimport { Button, Form, Accordion, Container, Row, Col } from \"react-bootstrap\";\r\nimport Box from \"@mui/material/Box\";\r\n\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Autocomplete from \"@mui/material/Autocomplete\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../config\";\r\n\r\nexport const FormManager = (props) => {\r\n  //return if something is undefined\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  if (\r\n    props.values === undefined ||\r\n    props.resource === undefined ||\r\n    props.disabledFields === undefined ||\r\n    props.functionalFields === undefined ||\r\n    props.submitFunction === undefined ||\r\n    props.backFunction === undefined ||\r\n    props.handleChangesCallback === undefined ||\r\n    props.arrayDeleteCallback === undefined\r\n  )\r\n    return \"Loading\";\r\n  /*\r\n  console.log({\r\n    values: props.values,\r\n    resource: props.resource,\r\n    disabledFields: props.disabledFields,\r\n    functionalFields: props.functionalFields,\r\n    submitFunction: props.submitFunction,\r\n    backFunction: props.backFunction,\r\n    handleChangesCallback: props.handleChangesCallback,\r\n    arrayDeleteCallback: props.arrayDeleteCallback,\r\n    fetchedData: myFetched.data,\r\n    fetchedTypes: fetchedPageTypes,\r\n  });\r\n*/\r\n  //Numeric for row component\r\n  const NumericFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type=\"number\"\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(parseInt(e.target.value, 10), [\r\n                  key,\r\n                ]);\r\n              }}\r\n              value={isNaN(props.values[key]) ? \"\" : props.values[key]}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //string for row component\r\n  const StringFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type={key === \"password\" ? \"password\" : \"text\"}\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={props.values[key]}\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //fetched data for row component\r\n  const FetchedFormRow = (key, alias) => {\r\n    let options;\r\n    if (\r\n      myFetched !== {} &&\r\n      (myFetched.data[key] !== undefined || myFetched.data[alias] !== undefined)\r\n    ) {\r\n      options = myFetched.data[alias !== undefined ? alias : key];\r\n    }\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Autocomplete\r\n              id={key}\r\n              onChange={(e, newValue) => {\r\n                e.preventDefault();\r\n                if (newValue === \"\" || newValue === null)\r\n                  props.handleChangesCallback(\"\", [key]);\r\n                else\r\n                  props.handleChangesCallback(newValue._id, [\r\n                    key\r\n                  ]);\r\n              }}\r\n              \r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={props.values[key] === \"\" ? null : options.filter((e) => e._id === props.values[key])[0]}\r\n              options={options}\r\n              getOptionLabel={(option) => {\r\n                return option.optionalLabel !== undefined\r\n                  ? option.optionalLabel\r\n                  : option._id;\r\n              }}\r\n              renderOption={(props, option) => (\r\n                <Box\r\n                  component=\"li\"\r\n                  sx={{ \"& > img\": { mr: 2, flexShrink: 0 } }}\r\n                  {...props}\r\n                >\r\n                  {option.optionalLabel !== undefined\r\n                    ? option.optionalLabel\r\n                    : option._id}\r\n                </Box>\r\n              )}\r\n              renderInput={(params) => (\r\n                <TextField\r\n                  {...params}\r\n                  label={locale().enter + \" \" + key}\r\n                />\r\n              )}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //select form row component\r\n  const SelectFormRow = (key, val) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Select\r\n              aria-label=\"Default select\"\r\n              value={props.values[key]}\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n            >\r\n              <option>{locale().select + \" \" + key}</option>\r\n              {React.Children.toArray(\r\n                Object.entries(val).map(([k, v]) => {\r\n                  return <option value={k}>{v}</option>;\r\n                })\r\n              )}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //numbers array form row component\r\n  const ArrayNumberFormRow = (k) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{k}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          {React.Children.toArray(\r\n            props.values[k].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>\r\n                      Insert <b>{k}</b>\r\n                      <i>[{index}]</i>\r\n                    </Form.Label>\r\n                    <Form.Control\r\n                      type=\"number\"\r\n                      disabled={\r\n                        props.disabledFields[k] !== undefined\r\n                          ? props.disabledFields[k]\r\n                          : false\r\n                      }\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        props.handleChangesCallback(\r\n                          parseInt(e.target.value, 10),\r\n                          [k, index]\r\n                        );\r\n                      }}\r\n                      value={\r\n                        isNaN(props.values[k][index])\r\n                          ? \"\"\r\n                          : props.values[k][index]\r\n                      }\r\n                      placeholder={locale().enter + \" \" + k}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //strings array form row component\r\n  const ArrayStringFormRow = (key) => {\r\n    let options;\r\n    if (myFetched !== {} && myFetched.data[key] !== undefined) {\r\n      options = myFetched.data[key];\r\n    }\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  <Col sm={4}>\r\n                    <Form.Group className=\"mb-3\"   style={{backgroundColor:\"white\"}}>\r\n                      {myFetched.data[key] !== undefined &&\r\n                      options !== undefined ? (\r\n                        <Autocomplete\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          id={key}\r\n                          onChange={(e, newValue) => {\r\n                            e.preventDefault();\r\n                            if (newValue === \"\" || newValue === null)\r\n                              props.handleChangesCallback(\"\", [key, index]);\r\n                            else\r\n                              props.handleChangesCallback(newValue._id, [\r\n                                key,\r\n                                index,\r\n                              ]);\r\n                          }}\r\n                          value={\r\n                            value === \"\"\r\n                              ? null\r\n                              : options.filter((e) => e._id === value)[0]\r\n                          }\r\n                          options={options}\r\n                          getOptionLabel={(option) => {\r\n                            return option.optionalLabel !== undefined\r\n                              ? option.optionalLabel\r\n                              : option._id;\r\n                          }}\r\n                          renderOption={(props, option) => (\r\n                            <Box \r\n                              component=\"li\"\r\n                              sx={{ \"& > img\": { mr: 2, flexShrink: 0 }  }}\r\n                              {...props}\r\n                            >\r\n                              {option.optionalLabel !== undefined\r\n                                ? option.optionalLabel\r\n                                : option._id}\r\n                            </Box>\r\n                          )}\r\n                          renderInput={(params) => (\r\n                            <TextField\r\n                              {...params}\r\n                              label={locale().enter + \" \" + key}\r\n                            />\r\n                          )}\r\n                        />\r\n                      ) : (\r\n                        <Form.Control\r\n                          type=\"text\"\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          onChange={(e) => {\r\n                            e.preventDefault();\r\n                            props.handleChangesCallback(e.target.value, [\r\n                              key,\r\n                              index,\r\n                            ]);\r\n                          }}\r\n                          value={props.values[key][index]}\r\n                          placeholder={locale().enter + \" \" + key}\r\n                        />\r\n                      )}\r\n                    </Form.Group>\r\n                  </Col>\r\n\r\n                  <Col md=\"auto\"></Col>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  //strings array form row component\r\n  const ArrayObjectFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((obj, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  {React.Children.toArray(\r\n                    Object.entries(obj).map(([k, value]) => {\r\n                      if (typeof value === \"number\") {\r\n                        return (\r\n                          <Col sm={2}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"number\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(\r\n                                    parseInt(e.target.value, 10),\r\n                                    [key, index, k]\r\n                                  );\r\n                                }}\r\n                                key={key + k + index + \"\"}\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                                value={\r\n                                  isNaN(props.values[key][index][k])\r\n                                    ? \"\"\r\n                                    : props.values[key][index][k]\r\n                                }\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //check if it's an enum\r\n                      if (\r\n                        fetchedPageTypes[props.resource] !== undefined &&\r\n                        fetchedPageTypes[props.resource][key] !== undefined &&\r\n                        fetchedPageTypes[props.resource][key][k] !==\r\n                          undefined &&\r\n                        myFetched.types !== undefined &&\r\n                        myFetched.types[\r\n                          fetchedPageTypes[props.resource][key][k]\r\n                        ] !== undefined\r\n                      ) {\r\n                        return (\r\n                          <Col sm={3}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Select\r\n                                aria-label=\"Default select\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                              >\r\n                                <option>{locale().select + \" \" + k}</option>\r\n                                {React.Children.toArray(\r\n                                  Object.entries(\r\n                                    myFetched.types[\r\n                                      fetchedPageTypes[props.resource][key][k]\r\n                                    ]\r\n                                  ).map(([k, v]) => {\r\n                                    return <option value={k}>{v}</option>;\r\n                                  })\r\n                                )}\r\n                              </Form.Select>\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //input field is a string\r\n                      if (typeof value === \"string\") {\r\n                        return (\r\n                          <Col sm={3}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"text\"\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //the object contains an array\r\n                      if (Array.isArray(value)) {\r\n                        if (value.length === 0) return k + \" is empty\";\r\n\r\n                        //only show range field when enum type is selected, otherwise skip it\r\n                        if (\r\n                          k === \"range\" &&\r\n                          props.values[key][index][\"type\"] !== \"enum\"\r\n                        )\r\n                          return \"\";\r\n                        return (\r\n                          <Row>\r\n                            <Accordion defaultActiveKey=\"0\">\r\n                              <Accordion.Item eventKey=\"0\">\r\n                                <Accordion.Header>\r\n                                  <b>{k}</b> : {nonDefaultLength(value)} items\r\n                                </Accordion.Header>\r\n                                <Accordion.Body>\r\n                                  {React.Children.toArray(\r\n                                    value.map((e, idx) => {\r\n                                      if (e.constructor === Object) {\r\n                                        const entr = Object.entries(e);\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col\r\n                                              sm={1}\r\n                                              style={{\r\n                                                borderRightStyle: \"dotted\",\r\n                                                borderRightWidth: 1 + \"px\",\r\n                                              }}\r\n                                            ></Col>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n\r\n                                            {React.Children.toArray(\r\n                                              entr.map(([_k, _v]) => {\r\n                                                return (\r\n                                                  <Col sm={3}>\r\n                                                    <Form.Group className=\"mb-3\">\r\n                                                      <Form.Control\r\n                                                        type=\"text\"\r\n                                                        disabled={\r\n                                                          props.disabledFields[\r\n                                                            key\r\n                                                          ] !== undefined\r\n                                                            ? props\r\n                                                                .disabledFields[\r\n                                                                key\r\n                                                              ]\r\n                                                            : false\r\n                                                        }\r\n                                                        onChange={(e) => {\r\n                                                          e.preventDefault();\r\n                                                          props.handleChangesCallback(\r\n                                                            e.target.value,\r\n                                                            [\r\n                                                              key,\r\n                                                              index,\r\n                                                              k,\r\n                                                              idx,\r\n                                                              _k,\r\n                                                            ]\r\n                                                          );\r\n                                                        }}\r\n                                                        value={_v}\r\n                                                        placeholder={\r\n                                                          locale().enter +\r\n                                                          \" \" +\r\n                                                          _k\r\n                                                        }\r\n                                                      />\r\n                                                    </Form.Group>\r\n                                                  </Col>\r\n                                                );\r\n                                              })\r\n                                            )}\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"number\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col sm={3}>\r\n                                              <Form.Control\r\n                                                type=\"number\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                key={\"\" + key + index + k + idx}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    parseInt(\r\n                                                      e.target.value,\r\n                                                      10\r\n                                                    ),\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={isNaN(e) ? \"\" : e} //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"string\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col sm={3}>\r\n                                              <Form.Control\r\n                                                type=\"text\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                key={\"\" + key + index + k + idx}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    e.target.value,\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={e} //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      }\r\n                                      return \"Unknown data type\";\r\n                                    })\r\n                                  )}\r\n                                </Accordion.Body>\r\n                              </Accordion.Item>\r\n                            </Accordion>\r\n                          </Row>\r\n                        );\r\n                      }\r\n                      return \"Unknown data type\";\r\n                    })\r\n                  )}\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //object form row comopnent\r\n  const ObjectFormRow = (key) => {\r\n    return \"TODO ObjectFormRow\";\r\n  };\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Container fluid>\r\n        {\r\n          //in case of unfetched data, do nothing\r\n          props.functionalFields[props.resource] === undefined &&\r\n            \"No operation allowed\"\r\n        }\r\n        {props.functionalFields[props.resource] !== undefined &&\r\n          React.Children.toArray(\r\n            Object.entries(props.values).map(([key, value]) => {\r\n              //enum type defined by config\r\n              //check if all the required resources are defined\r\n\r\n              if (\r\n                fetchedPageTypes[props.resource] !== undefined &&\r\n                fetchedPageTypes[props.resource][key] !== undefined &&\r\n                myFetched.types !== undefined &&\r\n                myFetched.types[fetchedPageTypes[props.resource][key]] !==\r\n                  undefined\r\n              ) {\r\n                return SelectFormRow(\r\n                  key,\r\n                  myFetched.types[fetchedPageTypes[props.resource][key]]\r\n                );\r\n              }\r\n              //input field is an array\r\n              if (Array.isArray(value)) {\r\n                if (typeof value[0] === \"number\") {\r\n                  return ArrayNumberFormRow(key);\r\n                }\r\n                if (typeof value[0] === \"string\") {\r\n                  return ArrayStringFormRow(key);\r\n                }\r\n                if (value[0].constructor === Object) {\r\n                  return ArrayObjectFormRow(key);\r\n                }\r\n              }\r\n              //input field is a number\r\n              if (typeof value === \"number\") {\r\n                return NumericFormRow(key);\r\n              }\r\n              //input field for fetched data\r\n\r\n              if (\r\n                fetchedPageData[props.resource] !== undefined &&\r\n                fetchedPageData[props.resource][key] !== undefined &&\r\n                myFetched.data[fetchedPageData[props.resource][key]] !==\r\n                  undefined\r\n              ) {\r\n                return FetchedFormRow(\r\n                  key,\r\n                  fetchedPageData[props.resource][key]\r\n                );\r\n              }\r\n              //input field is a string\r\n              if (typeof value === \"string\") {\r\n                return StringFormRow(key);\r\n              }\r\n\r\n              //input field is an object\r\n              if (value.constructor === Object) {\r\n                return ObjectFormRow();\r\n              }\r\n              //default return\r\n              return \"\";\r\n            })\r\n          )}\r\n      </Container>\r\n      <Button variant=\"primary\" type=\"submit\" key={\"submit\"}>\r\n        {locale().submit}\r\n      </Button>\r\n      &nbsp;&nbsp;&nbsp;\r\n      <Button variant=\"secondary\" key={\"cancel\"} onClick={props.backFunction}>\r\n        {locale().cancel}\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n","import { isDefault, removeDefaultElements, nonDefaultLength } from \"./misc_functions\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n// this function sort keys of an object and of its array-of-objects values (recursively) based on a template\r\nexport function sortObject(obj, template) {\r\n  //keys of the object to sort\r\n  let keys = Object.keys(obj);\r\n  //sorted array of keys\r\n  const sortingKeys = Object.keys(template);\r\n  //remove uncommon keys between the two arrays from the key array\r\n  keys = keys.filter((ob) => {\r\n    return sortingKeys.indexOf(ob) !== -1;\r\n  });\r\n  //sort the keys in the key array\r\n  keys.sort((a, b) => sortingKeys.indexOf(a) - sortingKeys.indexOf(b));\r\n\r\n  const sorted = keys.reduce((accumulator, key) => {\r\n    if (\r\n      Array.isArray(obj[key]) &&\r\n      obj[key].length !== 0 &&\r\n      obj[key][0].constructor === Object\r\n    ) {\r\n      const tmp = obj[key].map((el) => {\r\n        return sortObject(el, template[key][0]);\r\n      });\r\n\r\n      accumulator[key] = tmp;\r\n    } else accumulator[key] = obj[key];\r\n\r\n    return accumulator;\r\n  }, {});\r\n  return sorted;\r\n}\r\n\r\n//this function will check of each field of the object if it's an array, and then, only for array values, check if empty elements are contained into that array\r\nexport function maintainEmptyElements(original, fieldSpecifier, resource) {\r\n  const keys = Object.keys(original);\r\n  let copy = cloneDeep(original);\r\n  for (let i = 0; i < keys.length; i++) {\r\n    if (Array.isArray(copy[keys[i]])) {\r\n      copy = maintainEmptyElement(copy, [keys[i]], fieldSpecifier, resource);\r\n    }\r\n  }\r\n  return copy;\r\n}\r\n\r\n//this function check if an array contains a default element,\r\n//a default element is added when required\r\n//this causes issue for array of boolean, since boolean has no default value is difficult to know when to add an item\r\nexport function maintainEmptyElement(\r\n  original,\r\n  path,\r\n  fieldSpecifier,\r\n  resource,\r\n  item = undefined\r\n) {\r\n  let tmp = cloneDeep(original);\r\n  let tmpPtr = tmp;\r\n  let fieldSpecifierCpy =\r\n    fieldSpecifier !== undefined\r\n      ? cloneDeep(fieldSpecifier[resource])\r\n      : undefined;\r\n  const tmpPath = [...path];\r\n  //get the appropriate array to validate\r\n  for (let i = 0; i < tmpPath.length; i++) {\r\n    if (path[i] === undefined) break;\r\n    tmpPtr = tmpPtr[path[i]];\r\n  }\r\n  const nonDefLen = nonDefaultLength(tmpPtr);\r\n  const len = tmpPtr.length;\r\n  //if at least one element is non default, can return\r\n  if (nonDefLen < len) {\r\n    return tmp;\r\n  }\r\n  //otherwise, need to get the appropriate item to append to array\r\n  let element;\r\n  //get the appropriate item, travelling the fieldSpecified (addFields or editFields) according to path\r\n  //fieldSpecifierCpy becomes undefined when the item cannot be found there\r\n  for (let i = 0; i < tmpPath.length; i++) {\r\n    //if path or fieldSpecifier becomes undefined, break\r\n    if (path[i] === undefined) break;\r\n    if (fieldSpecifierCpy === undefined) break;\r\n    //indexes of path should be treated as 0\r\n    if (typeof path[i] === \"number\") fieldSpecifierCpy = fieldSpecifierCpy[0];\r\n    else fieldSpecifierCpy = fieldSpecifierCpy[path[i]];\r\n  }\r\n  //item found in fieldSpecifierCpy exist and it's not an array return\r\n  if (fieldSpecifierCpy !== undefined && !Array.isArray(fieldSpecifierCpy))\r\n    return tmp;\r\n  //add item according to addfield/editfield dictionary\r\n  if (fieldSpecifierCpy !== undefined) {\r\n    if (fieldSpecifierCpy[0].constructor === Object) {\r\n      element = {\r\n        ...fieldSpecifierCpy[0],\r\n      };\r\n    } else {\r\n      element = \"\";\r\n    }\r\n  }\r\n  //add item according to param item\r\n  if (item !== undefined && fieldSpecifierCpy === undefined) {\r\n    if (item.constructor === Object) {\r\n      element = { ...item };\r\n    } else {\r\n      element = item;\r\n    }\r\n  }\r\n  if (element !== undefined) tmpPtr.push(element);\r\n  return tmp;\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { get_generic, put_generic } from \"../../services/http_operations\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  areEqual,\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\n\r\nimport { editFields, editFieldsSpecifier, fetchedPageData } from \"../../config\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { FormManager } from \"../formManager/formManager\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nimport { versionPages, pageActions, addFields } from \"../../config\";\r\n\r\nimport ContentTable from \"../contentTable/contentTable\";\r\n\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nexport default function VersioningPage(props) {\r\n  //get resource and id from url params\r\n  const { resource, id } = useParams();\r\n\r\n  const [resourceElement, setResourceElement] = useState(undefined);\r\n  const [resourceEntity, setResourceEntity] = useState({});\r\n  const [header, setHeader] = useState(undefined);\r\n  const [actions, setActions] = useState(undefined);\r\n\r\n  const [original, setOriginal] = useState();\r\n\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  //deep copy editOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(editFields[resource]));\r\n\r\n  //keep trace of deleted elements\r\n  const [deleted, setDeleted] = useState({});\r\n\r\n  const [disabledFields, setDisabledFields] = useState(undefined);\r\n  //const [mounted, setMounted] = useState(false);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      //console.log(data.versions);\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      // set state with the result\r\n      const headerVersion = versionPages[resource];\r\n      //console.log(headerVersion);\r\n      //console.log(resource)\r\n      setHeader(headerVersion);\r\n      setResourceElement(response.docs[0].versions);\r\n      setResourceEntity(response.docs[0]);\r\n      if (pageActions[resource + \"Version\"] !== undefined)\r\n        setActions(pageActions[resource + \"Version\"]);\r\n\r\n      //this function evaluate if a field should be disabled or not\r\n      const evaluateSpecifiers = async () => {\r\n        if (editFieldsSpecifier[resource] === undefined) {\r\n          setDisabledFields({});\r\n\r\n          const keys = Object.keys(tmpValues);\r\n          for (let i = 0; i < keys.length; i++) {\r\n            const _key = keys[i];\r\n\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n\r\n          setValues(tmpValues);\r\n          //deep copy and set state\r\n          setOriginal(cloneDeep(tmpValues));\r\n          return;\r\n        }\r\n\r\n        let disabled = {};\r\n        if (disabledFields !== undefined) disabled = disabledFields;\r\n\r\n        const specsEntries = Object.entries(editFieldsSpecifier[resource]);\r\n\r\n        for (let i = 0; i < specsEntries.length; i++) {\r\n          const key = specsEntries[i][0]; //key\r\n          const value = specsEntries[i][1]; //value\r\n\r\n          if (tmpValues[key] === undefined) continue;\r\n\r\n          if (value.type === \"disable\") {\r\n            const resp = await value.policy(id);\r\n\r\n            disabled[key] = resp;\r\n          }\r\n        }\r\n\r\n        const keys = Object.keys(tmpValues);\r\n        for (let i = 0; i < keys.length; i++) {\r\n          const _key = keys[i];\r\n\r\n          if (disabled[_key] === undefined || disabled[_key] === false) {\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n        }\r\n\r\n        setDisabledFields(disabled);\r\n\r\n        setValues(tmpValues);\r\n        //deep copy and set state\r\n        setOriginal(cloneDeep(tmpValues));\r\n      };\r\n\r\n      evaluateSpecifiers();\r\n    };\r\n\r\n    const fst = { _id: id };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, []);\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        editFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      editFields,\r\n      resource,\r\n      item\r\n    );\r\n\r\n    //save removed element into appropriate structure\r\n    //do this only when array is on first layer of object\r\n    if (i === 1) {\r\n      if (deleted[path[0]] === undefined)\r\n        deleted[path[0]] = { indexes: [], elements: [], minDel: Infinity };\r\n\r\n      //ignore default\r\n      if (!isDefault(removed[0])) {\r\n        //save element (maybe not required anymore)\r\n        deleted[path[0]].elements.push(removed[0]);\r\n        //save index of deletion (considering the original ones)\r\n\r\n        deleted[path[0]].indexes.push(\r\n          path[i] >= deleted[path[0]].minDel\r\n            ? path[i] +\r\n                deleted[[path[0]]].indexes.filter((e) => e >= path[i]).length\r\n            : path[i]\r\n        );\r\n\r\n        if (path[i] < deleted[path[0]].minDel)\r\n          deleted[path[0]].minDel = path[i];\r\n      }\r\n    }\r\n\r\n    setValues(val);\r\n  };\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    //da fare\r\n    let tmpValues = cloneDeep(values);\r\n    let tmpOrig = cloneDeep(original);\r\n    removeDefaultElements(tmpValues);\r\n    removeDefaultElements(tmpOrig);\r\n    let toSend = {};\r\n\r\n    const entr = Object.entries(tmpValues);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      const k = entr[i][0];\r\n      const v = entr[i][1];\r\n\r\n      //value is array\r\n      if (Array.isArray(v)) {\r\n        //prepare add/update/remove elements\r\n        if (toSend[k] === undefined)\r\n          toSend[k] = { add: [], remove: [], update: [] };\r\n\r\n        //get original length of that array\r\n        const origArr = [...tmpOrig[k]];\r\n        //add removed elements (from original elements)\r\n        if (deleted[k] !== undefined) {\r\n          for (let i = 0; i < deleted[k].indexes.length; i++) {\r\n            const removed = origArr.splice(deleted[k].indexes[i][0], 1)[0];\r\n            if (removed.constructor === Object) {\r\n              const key = Object.keys(removed)[0];\r\n              toSend[k].remove.push(removed[key]);\r\n            } else {\r\n              toSend[k].remove.push(removed);\r\n            }\r\n          }\r\n        }\r\n        //check other elements\r\n        for (let j = 0; j < tmpValues[k].length; j++) {\r\n          if (j < origArr.length && !areEqual(tmpValues[k][j], origArr[j])) {\r\n            //update management\r\n\r\n            //object case\r\n            if (tmpValues[k][j].constructor === Object) {\r\n              const key = Object.keys(origArr[j])[0];\r\n              toSend[k].update.push({\r\n                [key]: origArr[j][key],\r\n                new: tmpValues[k][j],\r\n              });\r\n            }\r\n            //non object case (i.e., strings)\r\n            else {\r\n              //remove the old value and add the new one\r\n              toSend[k].add.push(tmpValues[k][j]);\r\n              toSend[k].remove.push(origArr[j]);\r\n            }\r\n          }\r\n          if (j >= origArr.length) toSend[k].add.push(tmpValues[k][j]);\r\n        }\r\n        if (areEqual(toSend[k], { add: [], remove: [], update: [] }))\r\n          delete toSend[k];\r\n      }\r\n      //value is obj\r\n      else if (v.constructor === Object) {\r\n        //compare both obj\r\n      }\r\n      //single valued prop\r\n      else {\r\n        //update when values are different\r\n        if (v !== original[k]) toSend[k] = v;\r\n      }\r\n    }\r\n\r\n    //end da fare\r\n\r\n    let res;\r\n    try {\r\n      const resp = await put_generic(resource, toSend, id);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n      navigate(\"/\" + resource);\r\n    } catch (error) {\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n  };\r\n\r\n  const takeSingle = (id) => {\r\n    return resourceElement.find((r) => r.ordinal === id);\r\n  };\r\n\r\n  const removeSingle = (id) => {\r\n    let tmp = resourceElement.filter((el) => {\r\n      return el.ordinal !== id;\r\n    });\r\n    setResourceElement(tmp);\r\n  };\r\n\r\n  const downloadSingle = async (identifier) => {\r\n    try {\r\n      const route=resource+\"/\"+id+\"/versions/\"+identifier;\r\n      const resp = await get_generic(route,{},{responseType: 'arraybuffer'});\r\n      //console.log(JSON.stringify(resp.response.data))\r\n      //console.log(resp)\r\n      //console.log(resp.response.data)\r\n      \r\n      const filename=resourceElement.find((r) => r.ordinal === identifier).original;\r\n      const mimetype=resourceElement.find((r) => r.ordinal === identifier).mimetype;      \r\n      const blob = new Blob([\r\n        resp.response.data\r\n      ],{type: mimetype});\r\n      saveAs(\r\n        blob,\r\n        filename\r\n      );\r\n      //res = resp.response;\r\n      //setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n\r\n      //res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n  };  \r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n      Version of&nbsp;{resource.slice(0,-1)}&nbsp;{resourceEntity.name!==undefined?<b>{resourceEntity.name}</b>:\"\"}&nbsp;(id:&nbsp;{id})\r\n\r\n        {addFields[\"versions\"] !== undefined && (\r\n          <NavLink to={`/add/versions/` + resource + \"/\" + id} key={resource + \"_versions_add_navlink\"}>\r\n            <Button variant=\"link\" size=\"sm\" key={resource + \"button\"}>\r\n              <i\r\n                key={resource + \"icon\"}\r\n                className=\"fa fa-plus-circle\"\r\n                aria-hidden=\"true\"\r\n                title={\"Add\"}\r\n                style={{\r\n                  width: 30 + \"px\",\r\n                  height: 30 + \"px\",\r\n                  marginRight: 10 + \"px\",\r\n                  opacity: 0.85,\r\n                }}\r\n              ></i>\r\n            </Button>\r\n          </NavLink>\r\n        )}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <ContentTable\r\n          resType={resource}\r\n          header={header}\r\n          resources={resourceElement}\r\n          actions={actions}\r\n          takeSingle={takeSingle}\r\n          removeSingle={removeSingle}\r\n          downloadSingle={downloadSingle}\r\n          idResource={id}\r\n        />\r\n        {\r\n          //<RenderPagination />\r\n        }\r\n      </main>\r\n      {/*\r\n      <main className=\"page-content\">\r\n        <FormManager\r\n          values={values}\r\n          resource={resource}\r\n          functionalFields={editFields}\r\n          disabledFields={disabledFields}\r\n          handleChangesCallback={handleChanges}\r\n          arrayDeleteCallback={handleDeleteItemArray}\r\n          submitFunction={submit}\r\n          backFunction={back}\r\n        />\r\n        <br />\r\n        <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n      </main>\r\n  */}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { get_generic, put_generic } from \"../../services/http_operations\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  areEqual,\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\n\r\nimport { editFields, editFieldsSpecifier, fetchedPageData } from \"../../config\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { FormManager } from \"../formManager/formManager\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nexport default function EditContentPage(props) {\r\n  //get resource and id from url params\r\n  const { resource, id } = useParams();\r\n\r\n  const [original, setOriginal] = useState();\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  //deep copy editOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(editFields[resource]));\r\n\r\n  //keep trace of deleted elements\r\n  const [deleted, setDeleted] = useState({});\r\n\r\n  const [disabledFields, setDisabledFields] = useState(undefined);\r\n  //const [mounted, setMounted] = useState(false);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(response.docs.map((e) => {\r\n        return {\r\n          _id: e._id,\r\n          optionalLabel:\r\n            e.name !== undefined\r\n              ? e.name\r\n              : e.username !== undefined\r\n              ? e.username\r\n              : undefined,\r\n        };\r\n      }), res);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n      tmpValues = sortObject(data, tmpValues);\r\n      if (\r\n        data[\"datasets\"] !== undefined &&\r\n        (resource === \"models\" || resource === \"algorithms\")\r\n      )\r\n        tmpValues[\"datasets\"] = data[\"datasets\"].map((el) => el._id);\r\n\r\n        if (\r\n          data[\"users\"] !== undefined &&\r\n          (resource === \"models\" || resource === \"algorithms\"|| resource === \"datasets\")\r\n        )\r\n          tmpValues[\"users\"] = data[\"users\"].map((el) => el._id);\r\n      //this function evaluate if a field should be disabled or not\r\n      const evaluateSpecifiers = async () => {\r\n        if (editFieldsSpecifier[resource] === undefined) {\r\n          setDisabledFields({});\r\n          const keys = Object.keys(tmpValues);\r\n          for (let i = 0; i < keys.length; i++) {\r\n            const _key = keys[i];\r\n\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n          console.log(tmpValues)\r\n          setValues(tmpValues);\r\n          //deep copy and set state\r\n          setOriginal(cloneDeep(tmpValues));\r\n          return;\r\n        }\r\n\r\n        let disabled = {};\r\n        if (disabledFields !== undefined) disabled = disabledFields;\r\n\r\n        const specsEntries = Object.entries(editFieldsSpecifier[resource]);\r\n\r\n        for (let i = 0; i < specsEntries.length; i++) {\r\n          const key = specsEntries[i][0]; //key\r\n          const value = specsEntries[i][1]; //value\r\n\r\n          if (tmpValues[key] === undefined) continue;\r\n\r\n          if (value.type === \"disable\") {\r\n            const resp = await value.policy(id);\r\n\r\n            disabled[key] = resp;\r\n          }\r\n        }\r\n\r\n        const keys = Object.keys(tmpValues);\r\n        for (let i = 0; i < keys.length; i++) {\r\n          const _key = keys[i];\r\n\r\n          if (disabled[_key] === undefined || disabled[_key] === false) {\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n        }\r\n\r\n        setDisabledFields(disabled);\r\n\r\n        setValues(tmpValues);\r\n        //deep copy and set state\r\n        setOriginal(cloneDeep(tmpValues));\r\n      };\r\n\r\n      evaluateSpecifiers();\r\n    };\r\n\r\n    const fst = { _id: id };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, []);\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        editFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      editFields,\r\n      resource,\r\n      item\r\n    );\r\n\r\n    //save removed element into appropriate structure\r\n    //do this only when array is on first layer of object\r\n    if (i === 1) {\r\n      if (deleted[path[0]] === undefined)\r\n        deleted[path[0]] = { indexes: [], elements: [], minDel: Infinity };\r\n\r\n      //ignore default\r\n      if (!isDefault(removed[0])) {\r\n        //save element (maybe not required anymore)\r\n        deleted[path[0]].elements.push(removed[0]);\r\n        //save index of deletion (considering the original ones)\r\n\r\n        deleted[path[0]].indexes.push(\r\n          path[i] >= deleted[path[0]].minDel\r\n            ? path[i] +\r\n                deleted[[path[0]]].indexes.filter((e) => e >= path[i]).length\r\n            : path[i]\r\n        );\r\n\r\n        if (path[i] < deleted[path[0]].minDel)\r\n          deleted[path[0]].minDel = path[i];\r\n      }\r\n    }\r\n\r\n    setValues(val);\r\n  };\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    //da fare\r\n    let tmpValues = cloneDeep(values);\r\n    let tmpOrig = cloneDeep(original);\r\n    removeDefaultElements(tmpValues);\r\n    removeDefaultElements(tmpOrig);\r\n    let toSend = {};\r\n\r\n    const entr = Object.entries(tmpValues);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      const k = entr[i][0];\r\n      const v = entr[i][1];\r\n\r\n      //value is array\r\n      if (Array.isArray(v)) {\r\n        //prepare add/update/remove elements\r\n        if (toSend[k] === undefined)\r\n          toSend[k] = { add: [], remove: [], update: [] };\r\n\r\n        //get original length of that array\r\n        const origArr = [...tmpOrig[k]];\r\n        //add removed elements (from original elements)\r\n        if (deleted[k] !== undefined) {\r\n          for (let i = 0; i < deleted[k].indexes.length; i++) {\r\n            const removed = origArr.splice(deleted[k].indexes[i][0], 1)[0];\r\n            if (removed.constructor === Object) {\r\n              const key = Object.keys(removed)[0];\r\n              toSend[k].remove.push(removed[key]);\r\n            } else {\r\n              toSend[k].remove.push(removed);\r\n            }\r\n          }\r\n        }\r\n        //check other elements\r\n        for (let j = 0; j < tmpValues[k].length; j++) {\r\n          if (j < origArr.length && !areEqual(tmpValues[k][j], origArr[j])) {\r\n            //update management\r\n\r\n            //object case\r\n            if (tmpValues[k][j].constructor === Object) {\r\n              const key = Object.keys(origArr[j])[0];\r\n              toSend[k].update.push({\r\n                [key]: origArr[j][key],\r\n                new: tmpValues[k][j],\r\n              });\r\n            }\r\n            //non object case (i.e., strings)\r\n            else {\r\n              //remove the old value and add the new one\r\n              toSend[k].add.push(tmpValues[k][j]);\r\n              toSend[k].remove.push(origArr[j]);\r\n            }\r\n          }\r\n          if (j >= origArr.length) toSend[k].add.push(tmpValues[k][j]);\r\n        }\r\n        if (areEqual(toSend[k], { add: [], remove: [], update: [] }))\r\n          delete toSend[k];\r\n      }\r\n      //value is obj\r\n      else if (v.constructor === Object) {\r\n        //compare both obj\r\n      }\r\n      //single valued prop\r\n      else {\r\n        //update when values are different\r\n        if (v !== original[k]) toSend[k] = v;\r\n      }\r\n    }\r\n\r\n    //end da fare\r\n\r\n    let res;\r\n    try {\r\n      const resp = await put_generic(resource, toSend, id);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n      navigate(\"/\" + resource);\r\n    } catch (error) {\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Edit &nbsp;<b>{resource}</b>&nbsp;of id:&nbsp;<b>{id}</b>&nbsp;\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <FormManager\r\n          values={values}\r\n          resource={resource}\r\n          functionalFields={editFields}\r\n          disabledFields={disabledFields}\r\n          handleChangesCallback={handleChanges}\r\n          arrayDeleteCallback={handleDeleteItemArray}\r\n          submitFunction={submit}\r\n          backFunction={back}\r\n        />\r\n        <br />\r\n        <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { Button, Form, Accordion, Table } from \"react-bootstrap\";\r\n\r\nexport const FormFile = (props) => {\r\n  //return \"loading\" if something is undefined\r\n  /*console.log({\r\n    submit: props.submitFunction,\r\n    back: props.backFunction,\r\n    setContHead: props.setContentHeader,\r\n    setContBdy: props.setContentBody,\r\n    setContPln: props.setContentPlain,\r\n    setFl: props.setFile,\r\n    contBod: props.contentBody,\r\n    contPln: props.contentPlain,\r\n    contHdr: props.contentHeader,\r\n  });*/\r\n  if (\r\n    props.submitFunction === undefined ||\r\n    props.backFunction === undefined ||\r\n    props.setContentHeader === undefined ||\r\n    props.setContentPlain === undefined ||\r\n    props.setContentBody === undefined ||\r\n    props.setFile === undefined ||\r\n    props.contentBody === undefined ||\r\n    props.contentPlain === undefined ||\r\n    props.contentHeader === undefined\r\n  )\r\n    return \"Loading\";\r\n\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Form.Label>\r\n        <b>{locale().select_file}</b>\r\n      </Form.Label>\r\n      <Form.Control\r\n        className=\"mb-3\"\r\n        type=\"file\"\r\n        accept={props.filePickerExtensions !== undefined ? \"\" : \" .json\"}\r\n        label=\"File\"\r\n        onChange={(e) => {\r\n          const file = e.target.files[0];\r\n          props.setFile(file);\r\n          const fileReader = new FileReader();\r\n\r\n          fileReader.onloadend = () => {\r\n            const content = fileReader.result;\r\n            if (file.name.endsWith(\".csv\")) {\r\n              //not used csv\r\n              const regex = new RegExp(\"\\\\r\", \"g\");\r\n              let splitted = content.replace(regex, \"\").split(\"\\n\");\r\n\r\n              props.setContentHeader(splitted[0]);\r\n              splitted.splice(0, 1);\r\n              props.setContentBody(splitted);\r\n            }\r\n            if (file.name.endsWith(\".json\")) {\r\n              const content = JSON.stringify(\r\n                JSON.parse(fileReader.result),\r\n                null,\r\n                4\r\n              );              \r\n              props.setContentPlain(content);\r\n            }\r\n          };\r\n          fileReader.readAsText(file);\r\n        }}\r\n      />\r\n      {props.contentBody !== null && props.contentHeader !== null && (\r\n        <Accordion>\r\n          <Accordion.Item eventKey=\"0\">\r\n            <Accordion.Header>{locale().file_content}</Accordion.Header>\r\n            <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n              <Table responsive striped bordered hover>\r\n                <thead>\r\n                  <tr>\r\n                    {React.Children.toArray(\r\n                      props.contentHeader.split(\",\").map((h) => {\r\n                        return <th>{h}</th>;\r\n                      })\r\n                    )}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {React.Children.toArray(\r\n                    props.contentBody.map((e) => {\r\n                      return (\r\n                        <tr>\r\n                          {React.Children.toArray(\r\n                            e.split(\",\").map((h) => {\r\n                              return <td>{h}</td>;\r\n                            })\r\n                          )}\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  )}\r\n                </tbody>\r\n              </Table>\r\n            </Accordion.Body>\r\n          </Accordion.Item>\r\n        </Accordion>\r\n      )}\r\n      {props.contentPlain !== null && (\r\n        <Accordion>\r\n          <Accordion.Item eventKey=\"0\">\r\n            <Accordion.Header>{locale().file_content}</Accordion.Header>\r\n            <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n              <textarea\r\n                style={{ resize: \"both\" }}\r\n                cols=\"120\"\r\n                rows=\"10\"\r\n                readOnly\r\n                value={props.contentPlain}\r\n              ></textarea>\r\n            </Accordion.Body>\r\n          </Accordion.Item>\r\n        </Accordion>\r\n      )}\r\n      <Button variant=\"primary\" type=\"submit\" key={\"submit\"}>\r\n        {locale().submit}\r\n      </Button>\r\n      &nbsp;&nbsp;&nbsp;\r\n      <Button variant=\"secondary\" key={\"cancel\"} onClick={props.backFunction}>\r\n        {locale().cancel}\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../config\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddPage(props) {\r\n  //get resource and id from url params\r\n  let { resource } = useParams();\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //check if resource was passed as params - used for tenants creation\r\n  if (props.resource !== undefined) resource = props.resource;\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //deep copy addOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => {\r\n          return {\r\n            _id: e._id,\r\n            optionalLabel:\r\n              e.name !== undefined\r\n                ? e.name\r\n                : e.username !== undefined\r\n                ? e.username\r\n                : undefined,\r\n          };\r\n        }),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      tmpValues = maintainEmptyElements(tmpValues, addFields, resource);\r\n      setValues(tmpValues);\r\n    };\r\n\r\n    if (searchParams.get(\"from\") === null || searchParams.get(\"from\") === \"\")\r\n      return;\r\n    const fst = { _id: searchParams.get(\"from\") };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, [searchParams, resource]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    valuesPtr[path[i]] = val;\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n\r\n    if (lastIndexNumber !== -1)\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource\r\n      );\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    tmpPtr.splice(path[i], 1);\r\n\r\n    val = maintainEmptyElement(val, path.slice(0, i), addFields, resource);\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource&nbsp;\r\n        <b>{resource.slice(0, -1)}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={{}}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n              />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Form, Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddExperimentPage(props) {\r\n  //get resource and id from url params\r\n  const resource = \"experiments\";\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //values\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n  //disabled\r\n  const [disabledFields, setDisabledFields] = useState({});\r\n\r\n  //protocols\r\n  const [protocols, setProtocols] = useState();\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the protocols data from the api\r\n      const response = await get_generic(\"protocols\", qs);\r\n\r\n      setProtocols(response.docs.map((e) => e._id));\r\n    };\r\n    const qs = { limit: 100 };\r\n    fetchData(qs);\r\n  }, [props, searchParams]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      addFields,\r\n      resource,\r\n      item\r\n    );\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  //handle changes to selected protocols\r\n  const handleProtocolChange = async (e) => {\r\n    e.preventDefault();\r\n    const selectedProtocol = e.target.value;\r\n    const fst = { _id: e.target.value };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    const res = await get_generic(\"protocols\", qs);\r\n    const protocol = res.docs[0];\r\n\r\n    const metadata = [];\r\n    for (let i = 0; i < protocol.metadata.length; i++) {\r\n      if (protocol.metadata[i].type === \"scalar\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: NaN,\r\n        });\r\n      }\r\n      if (protocol.metadata[i].type === \"text\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: \"\",\r\n        });\r\n      }\r\n      if (protocol.metadata[i].type === \"vector\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: [NaN],\r\n        });\r\n      }\r\n    }\r\n\r\n    const tmpValues = cloneDeep(values);\r\n    tmpValues[\"protocol\"] = selectedProtocol;\r\n    if (metadata.length !== 0) tmpValues[\"metadata\"] = metadata;\r\n\r\n    const tmpDisabled = cloneDeep(disabledFields);\r\n    tmpDisabled[\"protocol\"] = true;\r\n\r\n    setDisabledFields(tmpDisabled);\r\n    //setProtocol(selectedProtocol);\r\n    setValues(tmpValues);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && protocols !== undefined && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <Form.Select\r\n                aria-label={locale().select + \" protocol\"}\r\n                onChange={handleProtocolChange}\r\n              >\r\n                <option>{locale().select} protocol</option>\r\n                {React.Children.toArray(\r\n                  protocols.map((e) => {\r\n                    return <option value={e}>{e}</option>;\r\n                  })\r\n                )}\r\n              </Form.Select>\r\n              <br />\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={disabledFields}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n              />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_version_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../config\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddVersionsPage(props) {\r\n  //get resource and id from url params\r\n  let { type, resource, id } = useParams();\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //info about entity\r\n  const [resourceEntity, setResourceEntity] = useState({});\r\n\r\n  //check if resource was passed as params - used for tenants creation\r\n  if (props.resource !== undefined) resource = props.resource;\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(addTypes[type][0]);\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //deep copy addOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(addFields[type]));\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      setResourceEntity(response.docs[0]);\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      tmpValues = maintainEmptyElements(tmpValues, addFields, resource);\r\n      setValues(tmpValues);\r\n    };\r\n\r\n    const fst = { _id: id };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, [resource]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    valuesPtr[path[i]] = val;\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n\r\n    if (lastIndexNumber !== -1)\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource\r\n      );\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    tmpPtr.splice(path[i], 1);\r\n\r\n    val = maintainEmptyElement(val, path.slice(0, i), addFields, resource);\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      window.alert(\"Version uploaded successfully\");\r\n      navigate(\"/\" + type + \"/\" + resource + \"/\" + id);\r\n    }\r\n  };\r\n\r\n  const postVersionFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n\r\n    try {\r\n      const resp = await post_version_file_generic(resource, id, formData);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n    /*\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }*/\r\n\r\n    if (res.status === 200) {\r\n      window.alert(\"Version uploaded successfully\");\r\n      navigate(\"/\" + type + \"/\" + resource + \"/\" + id);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add version of&nbsp;\r\n        {resource.slice(0, -1)}\r\n        :&nbsp;\r\n        {resourceEntity.name !== undefined ? <b>{resourceEntity.name}</b> : \"\"}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey={addTypes[type][0]}\r\n        >\r\n          {addTypes[type].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[type].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={{}}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postVersionFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n                filePickerExtensions={\"\"}\r\n              />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport {\r\n  Form,\r\n  Nav,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Accordion,\r\n} from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageData } from \"../../config\";\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddMeasurementsPage(props) {\r\n  //get resource and id from url params\r\n  const resource = \"measurements\";\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [samples, setSamples] = useState([]);\r\n  const [items, setItems] = useState([]);\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //formValues\r\n  const [formValues, setFormValues] = useState(cloneDeep(addFields[resource]));\r\n  //disabled\r\n  const [disabledFields, setDisabledFields] = useState({});\r\n\r\n  //protocols\r\n  const [features, setFeatures] = useState();\r\n  const [feature, setFeature] = useState(\"\");\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the protocols data from the api\r\n      try {\r\n        const response = await get_generic(\"features\", qs);\r\n\r\n        setFeatures(response.docs.map((e) => e._id));\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    const qs = { limit: 100 };\r\n    fetchData(qs);\r\n  }, [props, searchParams]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(formValues);\r\n    let formValuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      formValuesPtr = formValuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    formValuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n    setFormValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(formValues);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      addFields,\r\n      resource,\r\n      item\r\n    );\r\n    setFormValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  //handle changes to selected feature\r\n  const handleFeatureChange = async (e) => {\r\n    e.preventDefault();\r\n    const selectedFeature = e.target.value;\r\n    const fst = { _id: selectedFeature };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    const res = await get_generic(\"features\", qs);\r\n    const feature = res.docs[0];\r\n\r\n    const items = feature.items;\r\n\r\n    const samples = [];\r\n    const tmp = addSample(samples, items);\r\n    setSamples(tmp);\r\n    setItems(items);\r\n    setFeature(selectedFeature);\r\n    return;\r\n  };\r\n\r\n  const addSample = (samples, items) => {\r\n    const values = [];\r\n    const tmpSample = cloneDeep(samples);\r\n    items.forEach((item) => {\r\n      if (item.type === \"number\") {\r\n        if (item.dimension === 0)\r\n          values.push({ name: item.name, value: NaN, type: item.type });\r\n        else values.push([{ name: item.name, value: NaN, type: item.type }]);\r\n      } else if (item.type === \"text\") {\r\n        if (item.dimension === 0)\r\n          values.push({ name: item.name, value: \"\", type: item.type });\r\n        else values.push([{ name: item.name, value: \"\", type: item.type }]);\r\n      } else if (item.type === \"enum\") {\r\n        if (item.dimension === 0)\r\n          values.push({\r\n            name: item.name,\r\n            value: \"\",\r\n            enumValues: item.range,\r\n            type: item.type,\r\n          });\r\n        else\r\n          values.push([\r\n            {\r\n              name: item.name,\r\n              value: \"\",\r\n              enumValues: item.range,\r\n              type: item.type,\r\n            },\r\n          ]);\r\n      }\r\n    });\r\n    tmpSample.push({ values: values });\r\n    return tmpSample;\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone formValues\r\n    let token = undefined;\r\n    let body = cloneDeep(formValues);\r\n    console.log(samples);\r\n    let tmpSamples = samples.map((sample) => {\r\n      return { values: sample.values.map((v) => v.value) };\r\n    });\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n    removeDefaultElements(body);\r\n    body[\"feature\"] = feature;\r\n    body[\"samples\"] = tmpSamples;\r\n    //let tmpformValues = cloneDeep(body);\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(resource, JSON.stringify(body), token);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && features !== undefined && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <Form.Select\r\n                aria-label={locale().select + \" feature\"}\r\n                onChange={handleFeatureChange}\r\n                value={feature}\r\n              >\r\n                <option>{locale().select} feature</option>\r\n                {React.Children.toArray(\r\n                  features.map((e) => {\r\n                    return <option value={e}>{e}</option>;\r\n                  })\r\n                )}\r\n              </Form.Select>\r\n              <hr />\r\n              <Container fluid>\r\n                <Row>\r\n                  <b>Samples :{samples.length}</b>\r\n                </Row>\r\n                <br />\r\n                {React.Children.toArray(\r\n                  samples.map((sample, i) => {\r\n                    return (\r\n                      <Row\r\n                        style={{\r\n                          padding: 10,\r\n                        }}\r\n                      >\r\n                        <Accordion defaultActiveKey=\"0\">\r\n                          <Accordion.Item eventKey={i}>\r\n                            <Accordion.Header>\r\n                              <b>\r\n                                <i>Sample [{i}]</i>\r\n                              </b>\r\n                            </Accordion.Header>\r\n                            <Accordion.Body>\r\n                              {React.Children.toArray(\r\n                                Object.values(sample.values).map((entr) => {\r\n                                  return (\r\n                                    <Row\r\n                                      style={{\r\n                                        borderBottomStyle: \"solid\",\r\n                                        borderBottomWidth: 1 + \"px\",\r\n                                        marginBottom: 5 + \"px\",\r\n                                        padding: 10,\r\n                                      }}\r\n                                    >\r\n                                      <Col\r\n                                        sm={2}\r\n                                        style={{\r\n                                          borderRightStyle: \"dotted\",\r\n                                          borderRightWidth: 1 + \"px\",\r\n                                        }}\r\n                                      >\r\n                                        <b>\r\n                                          <i>{entr.name}</i>\r\n                                        </b>\r\n                                      </Col>\r\n                                      <Col sm={2}>\r\n                                        {entr.type === \"enum\" ? (\r\n                                          <Form.Select\r\n                                            aria-label={\r\n                                              locale().select + \" \" + entr.name\r\n                                            }\r\n                                            //value={entr.value}\r\n                                            onChange={(e) => {\r\n                                              e.preventDefault();\r\n                                              entr.value = e.target.value;\r\n                                            }}\r\n                                          >\r\n                                            <option value=\"\">\r\n                                              {locale().select +\r\n                                                \" \" +\r\n                                                entr.name}\r\n                                            </option>\r\n                                            {React.Children.toArray(\r\n                                              entr.enumValues.map((e) => {\r\n                                                return (\r\n                                                  <option value={e}>{e}</option>\r\n                                                );\r\n                                              })\r\n                                            )}\r\n                                          </Form.Select>\r\n                                        ) : entr.type === \"text\" ? (\r\n                                          <Form.Control\r\n                                            type=\"text\"\r\n                                            //value={entr.value}\r\n                                            id={entr.name}\r\n                                            onChange={(e) => {\r\n                                              e.preventDefault();\r\n                                              entr.value = e.target.value;\r\n                                            }}\r\n                                            aria-label={\r\n                                              locale().enter + \" \" + entr.name\r\n                                            }\r\n                                          />\r\n                                        ) : (\r\n                                          <Form.Control\r\n                                            type=\"number\"\r\n                                            id={entr.name}\r\n                                            //value={isNaN(entr.value) ? \"\" : entr.value}\r\n                                            onChange={(e) => {\r\n                                              e.preventDefault();\r\n                                              entr.value = parseInt(\r\n                                                e.target.value,\r\n                                                10\r\n                                              );\r\n                                            }}\r\n                                            aria-label={\r\n                                              locale().enter + \" \" + entr.name\r\n                                            }\r\n                                          />\r\n                                        )}\r\n                                      </Col>\r\n                                    </Row>\r\n                                  );\r\n                                })\r\n                              )}\r\n                            </Accordion.Body>\r\n                          </Accordion.Item>\r\n                        </Accordion>\r\n                      </Row>\r\n                    );\r\n                  })\r\n                )}\r\n                {samples.length !== 0 && (\r\n                  <Button\r\n                    variant=\"link\"\r\n                    onClick={() => {\r\n                      const sampl = addSample(samples, items);\r\n                      setSamples(sampl);\r\n                    }}\r\n                  >\r\n                    <i\r\n                      className=\"fa fa-plus-circle\"\r\n                      aria-hidden=\"true\"\r\n                      title={\"Add sample\"}\r\n                      style={{\r\n                        width: 30 + \"px\",\r\n                        height: 30 + \"px\",\r\n                        marginRight: 10 + \"px\",\r\n                        opacity: 0.85,\r\n                      }}\r\n                    ></i>\r\n                  </Button>\r\n                )}\r\n              </Container>\r\n              <hr />\r\n              <br />\r\n              <FormManager\r\n                values={formValues}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={disabledFields}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n              />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  NavLink,\r\n  Routes,\r\n  Navigate,\r\n} from \"react-router-dom\";\r\nimport { AuthPage } from \"./components/authPage/authPage.comp\";\r\nimport { HomePage } from \"./components/homePage/homePage\";\r\nimport { NotFoundPage } from \"./components/notFoundPage/notFoundPage\";\r\nimport Navigation from \"./components/navigation/navigation.comp\";\r\nimport Page from \"./components/page/page\";\r\nimport ProfilePage from \"./components/profilePage/profilePage\";\r\nimport \"./App.scss\";\r\nimport UnauthorizedPage from \"./components/unauthorizedPage/unauthorizedPage\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport NotificationBar from \"./components/notificationBar/notificationBar\";\r\nimport HorizontalNavigationBar from \"./components/horizontalNavigationBar/horizontalNavigationBar\";\r\nimport AppContext from \"./context\";\r\n\r\nimport { notificationManager, get_generic } from \"./services/http_operations\";\r\nimport VersioningPage from \"./components/versioningPage/versioningPage\";\r\nimport EditContentPage from \"./components/editContentPage/editContentPage\";\r\nimport AddPage from \"./components/addPage/addPage\";\r\nimport AddExperimentPage from \"./components/addExperimentPage/addExperimentPage\";\r\nimport AddVersionPage from \"./components/addVersionPage/addVersionPage\";\r\nimport { layout } from \"./config\";\r\nimport AddMeasurementsPage from \"./components/addMeasurementsPage/addMeasurementsPage\";\r\nimport cloneDeep from \"clone-deep\";\r\n/*\r\n    notifications follow this schema\r\n\r\n    {\r\n        name: \"notification name\"\r\n        time: \"\"\r\n        message: \"this is a message\"\r\n    }\r\n\r\n\r\n*/\r\n\r\ninterface INotification {\r\n  type: string;\r\n  time: string;\r\n  msg: string;\r\n}\r\n\r\nfunction App() {\r\n  const [notifications, setNotifications] = useState<INotification[]>([]);\r\n  const [types, setTypes] = useState<Object | undefined>();\r\n  const [data, setData] = useState<Object>({});\r\n\r\n  let layoutRef = React.useRef<string | null>();\r\n  const tkn = localStorage.getItem(\"token\");\r\n\r\n  ////////////////NOTIFICATION MANAGEMENT FRAGMENT\r\n  //function to push a new notification at the beginning of the list\r\n  function PushNotification(obj: INotification) {\r\n    setNotifications((prev) => [obj].concat(prev));\r\n    //notifications.push(obj);\r\n  }\r\n\r\n  //function to remove a single notification from list\r\n  function RemoveNotification(id: number) {\r\n    let tmp = [...notifications];\r\n    tmp.splice(id, 1);\r\n    setNotifications(tmp);\r\n  }\r\n\r\n  //function to clear notifications list\r\n  function ClearNotifications() {\r\n    setNotifications([]);\r\n  }\r\n\r\n  const notificationManagement = {\r\n    notifications: notifications,\r\n    PushNotification,\r\n    RemoveNotification,\r\n    ClearNotifications,\r\n  };\r\n\r\n  notificationManager.ClearNotifications = ClearNotifications;\r\n  notificationManager.PushNotification = PushNotification;\r\n  notificationManager.RemoveNotification = RemoveNotification;\r\n\r\n  ///////////////END NOTIFICATION MANAGEMENT FRAGMENT\r\n\r\n  ///////////////FETCHED TYPES AND DATA MANAGEMENT FRAGMENT\r\n  //function to push a new notification at the beginning of the list\r\n  function UpdateData(fetched: string[], key: string) {\r\n    setData((prev) => {\r\n      return { ...prev, [key]: [...fetched] };\r\n    });\r\n  }\r\n\r\n  //use effect to fetch static data from the server /types\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchTypes = async () => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(\"types\", {}, {},\"\");\r\n\r\n        setTypes(response.response.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    //if types has been already set, ignore it\r\n    if (types !== undefined) return;\r\n    // call the function\r\n    try {\r\n      fetchTypes();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    // make sure to catch any error\r\n  }, []);\r\n\r\n  const fetchedManagement = {\r\n    types: types,\r\n    data: data,\r\n    UpdateData: UpdateData,\r\n  };\r\n  ///////////////END FETCHED TYPES MANAGEMENT FRAGMENT\r\n\r\n  //mobile view only allowed to be vertical\r\n  if (/Mobi/i.test(window.navigator.userAgent) == true) {\r\n    layoutRef.current = \"vertical\";\r\n  } else {\r\n    layoutRef.current = layout;\r\n  }\r\n\r\n  //not logged => show auth page\r\n  if (tkn === null)\r\n    return (\r\n      <div className=\"app\">\r\n        <Router>\r\n          <Routes>\r\n            <Route path=\"/\" element={<AuthPage />} />\r\n            <Route\r\n              path=\"/add/tenants\"\r\n              element={<AddPage resource={\"tenants\"} />}\r\n            />\r\n          </Routes>\r\n        </Router>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        notifications: notificationManagement,\r\n        fetched: fetchedManagement,\r\n      }}\r\n    >\r\n      <Router>\r\n        <Container\r\n          fluid\r\n          style={{\r\n            paddingLeft: 0,\r\n            paddingRight: 0,\r\n            height: 100 + \"vh\",\r\n          }}\r\n        >\r\n          {layoutRef.current === \"horizontal\" ? (\r\n            <Row style={{ padding: 0 }}>\r\n              <HorizontalNavigationBar />\r\n            </Row>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <Row\r\n            style={{\r\n              padding: 0,\r\n            }}\r\n          >\r\n            {layoutRef.current === \"vertical\" ? (\r\n              <Col md=\"auto\" style={{ padding: 0, minWidth: 250 + \"px\" }}>\r\n                <Navigation />\r\n              </Col>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {/Mobi/i.test(window.navigator.userAgent) == true && (\r\n              <Col md=\"auto\" style={{ padding: 0 }}>\r\n                <NotificationBar />\r\n              </Col>\r\n            )}\r\n            <Col style={{ paddingLeft: 0, paddingRight: 0 }}>\r\n              <Routes>\r\n                <Route path=\"/\" element={<HomePage />} />\r\n                <Route path=\"/home\" element={<HomePage />} />\r\n                <Route path=\"/viewProfile\" element={<ProfilePage />} />\r\n                <Route\r\n                  path=\"/add/experiments/\"\r\n                  element={<AddExperimentPage />}\r\n                />\r\n                <Route\r\n                  path=\"/add/measurements/\"\r\n                  element={<AddMeasurementsPage />}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/edit/:resource/:id\"\r\n                  element={<EditContentPage />}\r\n                />\r\n                <Route\r\n                  path=\"/versions/:resource/:id\"\r\n                  element={<VersioningPage />}\r\n                />\r\n                <Route\r\n                  path=\"/add/:type/:resource/:id\"\r\n                  element={<AddVersionPage />}\r\n                />\r\n                <Route path=\"/add/:resource/\" element={<AddPage />} />\r\n                <Route path=\"/:page\" element={<Page res=\":page\" />} />\r\n\r\n                <Route path=\"/unauthorized\" element={<UnauthorizedPage />} />\r\n                <Route path=\"/404\" element={<NotFoundPage />} />\r\n\r\n                <Route path=\"*\" element={<Navigate to=\"/404\" replace />} />\r\n              </Routes>\r\n            </Col>\r\n            {layoutRef.current === \"vertical\" &&\r\n              /Mobi/i.test(window.navigator.userAgent) == false && (\r\n                <Col md=\"auto\" style={{ paddingLeft: 0, paddingRight: 0 }}>\r\n                  <NotificationBar />\r\n                </Col>\r\n              )}\r\n          </Row>\r\n        </Container>\r\n      </Router>\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n"],"sourceRoot":""}